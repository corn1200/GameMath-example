# 게임 수학 정리 문서
게임 개발에 필요한 수학 개념에 대해 정리한 문서입니다.

# 목차
* [1. 수와 집합](#1-수와-집합)
    * [1.1. 연산과 수의 구조](#11-연산과-수의-구조)
    * [1.2. 수의 구조](#12-수의-구조)
    * [1.3. 수의 표현](#13-수의-표현)
* [2. 함수](#2-함수)
    * [2.1. 함수의 개념과 종류](#21-함수의-개념과-종류)
    * [2.2. 합성함수](#22-합성함수)
    * [2.3. 항등함수와 역함수](#23-항등함수와-역함수)
    * [2.4. 곱집합을 활용한 좌표 평면으로의 확장](#24-곱집합을-활용한-좌표-평면으로의-확장)
* [3. 데카르트 좌표계](#3-데카르트-좌표계)
* [4. 벡터 공간과 벡터](#4-벡터-공간과-벡터)
    * [4.1. 스칼라와 벡터](#41-스칼라와-벡터)
    * [4.2. 벡터 공간의 연산](#42-벡터-공간의-연산)
    * [4.3. 벡터의 크기와 이동](#43-벡터의-크기와-이동)
* [5. 벡터의 결합과 생성](#5-벡터의-결합과-생성)
* [6. 삼각함수](#6-삼각함수)
    * [6.1. 삼각함수의 성질](#61-삼각함수의-성질)
    * [6.2. 각의 측정법](#62-각의-측정법)
* [7. 삼각함수를 활용한 물체의 회전](#7-삼각함수를-활용한-물체의-회전)
* [8. 삼각함수의 역함수](#8-삼각함수의-역함수)
* [9. 극좌표계](#9-극좌표계)
* [10. 선형성: 예측 가능한 비례 관계](#10-선형성-예측-가능한-비례-관계)
    * [10.1. 선형 함수](#101-선형-함수)
    * [10.2. 벡터 공간의 선형 변환](#102-벡터-공간의-선형-변환)
* [11. 행렬](#11-행렬)
    * [11.1. 행렬의 기본 연산](#111-행렬의-기본-연산)
    * [11.2. 행렬의 곱셈](#112-행렬의-곱셈)
    * [11.3. 정방행렬의 곱셈](#113-정방행렬의-곱셈)
* [12. 행렬의 설계](#12-행렬의-설계)
    * [12.1. 크기 변환행렬](#121-크기-변환행렬)
    * [12.2. 회전 변환행렬](#122-회전-변환행렬)
    * [12.3. 전단 변환행렬](#123-전단-변환행렬)
    * [12.4. 삼각함수의 덧셈 정리](#124-삼각함수의-덧셈-정리)
* [13. 역행렬](#13-역행렬)
    * [13.1. 역행렬의 존재를 판별하는 행렬식](#131-역행렬의-존재를-판별하는-행렬식)
    * [13.2. 크기 변환행렬의 역행렬](#132-크기-변환행렬의-역행렬)
    * [13.3. 전단 변환행렬의 역행렬](#133-전단-변환행렬의-역행렬)
    * [13.4. 회전 변환행렬의 역행렬](#134-회전-변환행렬의-역행렬)
    * [13.5. 행렬 곱의 역행렬](#135-행렬-곱의-역행렬)
* [14. 이동 변환을 위한 아핀 공간](#14-이동-변환을-위한-아핀-공간)
* [15. 아핀 공간의 구성 요소](#15-아핀-공간의-구성-요소)
    * [15.1. 점](#151-점)
    * [15.2. 이동 벡터](#152-이동-벡터)
    * [15.3. 아핀 공간의 성질](#153-아핀-공간의-성질)
* [16. 아핀 결합](#16-아핀-결합)
    * [16.1. 두 점의 결합](#161-두-점의-결합)
* [17. 벡터의 내적](#17-벡터의-내적)
    * [17.1. 내적의 성질](#171-내적의-성질)
    * [17.2. 내적과 삼각함수의 관계](#172-내적과-삼각함수의-관계)
    * [17.3. 행렬의 곱셈을 내적으로 표현하기](#173-행렬의-곱셈을-내적으로-표현하기)
* [18. 시야 판별](#18-시야-판별)
    * [18.1. 앞뒤 판별](#181-앞뒤-판별)
    * [18.2. 시야 판별](#182-시야-판별)
* [19. 조명 효과의 구현](#19-조명-효과의-구현)
* [20. 투영 벡터](#20-투영-벡터)
* [21. 세 점의 결합](#21-세-점의-결합)
* [22. 메시](#22-메시)
* [23. 무게중심좌표](#23-무게중심좌표)
    * [23.1. 무게중심좌표의 계산](#231-무게중심좌표의-계산)
* [24. 텍스처 매핑](#24-텍스처-매핑)
* [25. 3차원 공간의 설계](#25-3차원-공간의-설계)
* [26. 3차원 공간의 트랜스폼](#26-3차원-공간의-트랜스폼)
    * [26.1. 오일러 각](#261오일러-각)
    * [26.2. 회전행렬의 유도](#262-회전행렬의-유도)
    * [26.3. 3차원 모델링 행렬](#263-3차원-모델링-행렬)
* [27. 카메라 공간](#27-카메라-공간)
* [28. 오일러 각의 특징](#28-오일러-각의-특징)
    * [28.1 짐벌락 현상](#281-짐벌락-현상)
    * [28.2 회전 보간의 계산](#282-회전-보간의-계산)
* [29. 벡터의 외적](#29-벡터의-외적)
    * [29.1. 평행성 판별](#291-평행성-판별)
    * [29.2. 법선 벡터](#292-법선-벡터)
    * [29.3. 좌우 방향 판별](#293-좌우-방향-판별)
* [30. 벡터로부터 회전행렬 생성](#30-벡터로부터-회전행렬-생성)
* [31. 렌더링 계산량을 줄여주는 백페이스 컬링](#31-렌더링-계산량을-줄여주는-백페이스-컬링)
* [32. 오일러 각의 문제를 해결하는 로드리게스 회전 공식](#32-오일러-각의-문제를-해결하는-로드리게스-회전-공식)
* [33. 삼중곱](#33-삼중곱)
    * [33.1. 스칼라 삼중곱](#331-스칼라-삼중곱)
    * [33.2. 벡터 삼중곱](#332-벡터-삼중곱)
* [34. 원근 투영 변환의 원리](#34-원근-투영-변환의-원리)
* [35. 동차 좌표계](#35-동차-좌표계)
* [36. 깊이 값](#36-깊이-값)
* [37. 원근 보정 매핑](#37-원근-보정-매핑)
* [38. 깊이 버퍼](#38-깊이-버퍼)
* [39. 절두체 컬링](#39-절두체-컬링)
    * [39.1. 평면의 방정식](#391-평면의-방정식)
    * [39.2. 평면의 방정식의 정규화](#392-평면의-방정식의-정규화)
    * [39.3. 평면의 방정식을 활용한 절두체 표현](#393-평면의-방정식을-활용한-절두체-표현)
    * [39.4. 원근 투영 행렬로부터 평면의 방정식 만들기](#394-원근-투영-행렬로부터-평면의-방정식-만들기)
* [40. 바운딩 볼륨](#40-바운딩-볼륨)
    * [40.1. 구 바운딩 볼륨의 판정](#401-구-바운딩-볼륨의-판정)
    * [40.2. aabb와의 판정](#402-aabb와의-판정)
* [41. 삼각형 클리핑](#41-삼각형-클리핑)
* [42. 복소수](#42-복소수)
    * [42.1. 허수](#421-허수)
    * [42.2. 복소수의 구조](#422-복소수의-구조)
* [43. 복소평면](#43-복소평면)
    * [43.1. 단위 복소수와의 곱](#431-단위-복소수와의-곱)
    * [43.2. 켤레 복소수의 회전 변환](#432-켤레-복소수의-회전-변환)
* [44. 복소수와 행렬의 관계](#44-복소수와-행렬의-관계)
* [45. 자연지수함수](#45-자연지수함수)
    * [45.1. 무리수 e](#451-무리수-e)
    * [45.2. 자연지수함수](#452-자연지수함수)
* [46. 미분](#46-미분)
    * [46.1. 도함수](#461-도함수)
    * [46.2. 자연지수함수의 도함수)](#462-자연지수함수의-도함수)
    * [46.3. sin 함수와 cos 함수의 도함수)](#463-sin-함수와-cos-함수의-도함수)
* [47. 급수](#47-급수)
    * [47.1. 등비수열](#471-등비수열)
    * [47.2. 급수](#472-급수)
    * [47.3. 매클로린 급수](#473-매클로린-급수)
* [48. 오일러 공식](#48-오일러-공식)
* [49. 사원수 대수](#49-사원수-대수)
    * [49.1. 사원수를 구성하는 세 허수](#491-사원수를-구성하는-세-허수)
    * [49.2. 사원수의 구조](#492-사원수의-구조)
    * [49.3. 사원수와 벡터](#493-사원수와-벡터)
* [50. 사원수의 회전](#50-사원수의-회전)
    * [50.1. 사원수와 오일러 공식](#501-사원수와-오일러-공식)
    * [50.2. 회전 사원수를 이용한 3차원 공간에서의 회전](#502-회전-사원수를-이용한-3차원-공간에서의-회전)
* [51. 사원수의 변환](#51-사원수의-변환)
    * [51.1. 오일러 각에서 사원수로의 변환](#511-오일러-각에서-사원수로의-변환)
    * [51.2. 사원수에서 오일러 각으로의 변환](#512-사원수에서-오일러-각으로의-변환)
    * [51.3. 사원수에서 회전 변환행렬로의 변환](#513-사원수에서-회전-변환행렬로의-변환)
    * [51.4. 회전 변환행렬에서 사원수로의 변환](#514-회전-변환행렬에서-사원수로의-변환)
* [52. 사원수의 보간](#52-사원수의-보간)

# 1. 수와 집합
### 선요약

> 집합: 서로 구분되는 원소로 구성된 묶음 = 소박한 집합론         
> 대표적인 수집합: 자연수, 정수, 유리수, 실수, 복소수, 사원수 등        
> 명제: 집합의 성질을 참과 거짓으로 명확하게 구분하는 문장      
> 공리: 명제 중에서 증명할 필요가 없는 기본 명제    
> 
> 공리를 기반으로 대상을 구분하는 집합론 = 공리적 집합론
> 
> |집합론|설명|
> |---|---|
> |소박한 집합론|용도에 따라 수집합을 구분하고 인간의 언어를 통해 정의한다|
> |공리적 집합론|수가 가지는 연산에 대한 공리를 기반으로 수를 분류한다|

* * *

[본문](/README-ORIGIN.md#1-수와-집합)

# 1.1. 연산과 수의 구조
### 선요약

> 수집합의 고유한 특징: 원소를 이용해 연산      
> 대표적인 연산: 덧셈, 뺄셈, 곱셈, 나눗셈     
> 이항연산: 사칙연산과 같이 두 개의 원소를 사용해 새로운 원소를 만들어내는 연산       
> 
> |이항연산의 성질|정의|덧셈|곱셈|비고|
> |---|---|---|---|---|
> |닫혀 있음|어떤 집합에서 두 원소를 사용한 이항연산의 결과가 항상 그 집합에 속하는 성질|O|O||
> |교환법칙|두 원소의 좌우 순서를 바꿔도 결과가 동일한 성질|$$a + b = b + a$$|$$a \cdot b = b \cdot a$$||
> |결합법칙|세 원소의 연산 순서를 바꿔도 결과가 동일한 성질|$$(a + b) + c = a + (b + c)$$|$$(a \cdot b) \cdot c = a \cdot (b \cdot c)$$||
> |분배법칙|두 이항연산에 대해 $a \cdot (b + c) = a \cdot b + a \cdot c$와 $(b + c) \cdot a = b \cdot a + c \cdot a$의 결과가 나오는 성질|$$a \cdot (b + c) = a \cdot b + a \cdot c$$|$$(b + c) \cdot a = b \cdot a + c \cdot a$$||
> |항등원|주어진 원소와의 이항연산 결과가 언제나 주어진 원소가 되는 특별한 원소|$$a + 0 = a$$|$$a \cdot 1 = a$$||
> |역원|주어진 원소와의 이항연산 결과가 언제나 항등원이 되는 특별한 원소|$$a + (-a) = 0$$|$$a \cdot \frac{1}{a} = 1 \quad a \neq 0$$|실수에서 덧셈의 역원은 반대수, 곱셈의 역원은 역수라고 부른다|

* * *

[본문](/README-ORIGIN.md#11-연산과-수의-구조)

# 1.2. 수의 구조
### 선요약

> 체의 구조: 공리적 집합론에서 덧셈과 곱셈 연산에 대해 11가지 공리를 모두 만족하는 수 집합
> 
> 체의 구조 11가지 공리:
> 1. 연산에 대해 닫혀 있다.
> 2. 연산에 대해 결합법칙이 성립한다.
> 3. 연산에 대한 항등원이 존재한다.
> 4. 연산에 대한 역원이 존재한다.
> 5. 연산에 대해 교환법칙이 성립한다.
> 6. 두 번째 연산에 대해 닫혀 있다.
> 7. 두 번째 연산에 대해 결합법칙이 성립한다.
> 8. 첫 번째 연산과 두 번째 연산에 대해 분배법칙이 성립한다.
> 9. 두 번째 연산에 대해 교환법칙이 성립한다.
> 10. 두 번째 연산에 대해 항등원이 존재한다.
> 11. 두 번째 연산에 대해 역원이 존재한다(단 0은 제외).
> 
> 대표적인 체의 구조를 가지는 수 집합: 유리수(Q), 실수(R)
> 
> 체의 구조에서 뺄셈과 나눗셈: 교환법칙을 만족하지 않기 때문에 체의 구조를 지니지 못한다.     
> 
> $$a - b \neq b - a$$
> 
> $$a \div b \neq b \div a$$
> 
> 뺄셈, 나눗셈 대신 덧셈, 곱셈의 역원을 사용하면 교환법칙이 성립하면서 같은 결과를 만들어낸다.
> 
> $$a + (-b) = (-b) + a$$
> 
> $$a \cdot \frac{1}{b} = \frac{1}{b} \cdot a$$
> 
> 체의 구조 특징: 특별한 예외 상황 없이 덧셈과 곱셈을 안전하고 자유롭게 사용할 수 있다.       
> 체는 사칙연산이 자유로이 시행될 수 있고 산술의 잘 알려진 규칙들(교환법칙, 분배법칙, 결합법칙)을 만족하는 수의 구조다.

* * *

[본문](/README-ORIGIN.md#12-수의-구조)

# 1.3. 수의 표현
### 선요약

> 유리수: 유리수는 $\pi$나 $\sqrt{2}$ 같은 무리수를 표현할 수 없기 때문에 직선의 어느 지점에서는 빈틈이 발생
> 실수: 유리수 사이에 무리수를 채워 완벽한 연속성을 가지는 직선을 만들어내는 수
> 수직선(Number line): 실수를 대응시켜 표현한 직선

* * *

[본문](/README-ORIGIN.md#13-수의-표현)

# 2. 함수
***함수(Function)란 두 집합에서 첫 번째 집합의 모든 원소가 빠짐없이 두 번째 집합의 어떤 원소에 대응하는 관계를 의미한다***.

# 2.1. 함수의 개념과 종류
### 선요약

> 두 집합 $X, Y$와 집합의 원소 $x, y$를 $X$에서 $Y$로 대응되는 함수: $y = f(x)$       
> 
> 함수의 규칙:      
> 1. 첫 번째 집합의 모든 원소에 대한 대응 관계가 존재해야 함
> 2. 첫 번째 집합의 원소는 두 번째 집합의 한 원소에만 대응되어야 함
> 
> - 정의역(Domain): 함수에서 왼쪽에 위치한 첫 번째 집합     
> - 공역(Codomain): 함수에서 오른쪽에 위치한 두 번째 집합       
> - 치역(Range): 정의역에 대응되는 공역의 원소만 따로 모은 부분집합(Subset)     
> 정의역의 모든 원소는 공역의 원소에 대응되어야 하지만, 공역의 모든 원소가 정의역에 대응할 필요는 없다.      
> 
> |함수|정의|
> |---|---|
> |전사함수(Surjection)|공역의 모든 요소가 정의역에 대응되는 함수를 의미(공역과 치역이 동일한 함수)|
> |단사함수(Injection)|정의역과 공역의 요소가 일대일로 대응되는 함수를 의미(정의역의 모든 요소가 공역의 요소에 일대일로 대응되는 함수)|
> |전단사함수(Bijection)|정의역과 공역의 모든 요소가 빠짐없이 일대일로 대응되는 함수를 의미(전사함수와 단사함수의 두 가지 성질을 모두 만족하는 함수)|

* * *

[본문](/README-ORIGIN.md#21-함수의-개념과-종류)

# 2.2. 합성함수
### 선요약

> - 함수의 합성(Function composition): 2개의 함수를 연쇄적으로 이어서 하나의 함수로 만드는 연산
> - 합성함수 표기: $g \circ f$, $g(f(x))$     
> 먼저 실행되는 함수 $f$가 합성함수 기호($\circ$)의 오른쪽에 놓인다.
> 
> 세 함수로부터 만들어지는 합성함수 경우의 수: $(h \circ (g \circ f))(w)$, $((h \circ g) \circ f)(w)$
> 
> 합성 함수를 이항연산으로 규정하면, 합성 함수는 결합법칙이 성립한다.

* * *

[본문](/README-ORIGIN.md#22-합성함수)

# 2.3. 항등함수와 역함수
### 선요약

> - 항등함수(Identity function): 정의역과 공역이 동일한 값으로 대응되는 함수
> - 역함수(Inverse function): 어떤 함수와 역함수를 합성한 결과는 언제나 항등함수가 된다       
> 역함수는 위 첨자를 붙여 $f^{-1}$로 표기한다
> 
> 역함수를 가지는 조건:
> - 전단사함수: 하나의 원소가 두 개의 원소에 대응되기 때문에 함수의 기본 조건을 만족하지 못함
> - 단사함수: 정의역의 모든 원소가 대응하지 않기 때문에 함수의 기본 조건을 만족하지 못함
> - 전단사함수: 정의역과 공역의 모든 원소가 일대일로 대응하기 때문에 모든 경우에서 역함수가 보장된다      
> 어떤 함수가 역함수를 가지기 위해서는 반드시 전단사함수의 형태가 되어야 한다
> 
> 합성함수의 역함수가 가지는 성질:
> - 합성함수 $g \circ f$를 거꾸로 뒤집은 역함수 $(g \circ f)^{-1}$는 두 함수의 역함수 $f^{-1}$과 $g^{-1}$를 반대 순서로 합성한 결과다
> - $(g \circ f)^{-1} = f^{-1} \circ g^{-1}$

* * *

[본문](/README-ORIGIN.md#23-항등함수와-역함수)

# 2.4. 곱집합을 활용한 좌표 평면으로의 확장
### 선요약

> - 곱집합(Cartesian product 혹은 Product set): 두 집합의 원소를 순서쌍으로 묶은 원소의 집합        
> - 집합 $A$와 $B$의 곱집합 표시: $A \times B$
> - 원소 $a$와 $b$의 순서쌍 표시: $(a, b)$
> 
> 두 실수 집합의 곱집합 $R \times R$을 구성하고 정의역으로 설정해 입력 요소를 2개로 지정하면 수의 이항연산을 함수로 표현하는 것이 가능하고, 하나의 직선으로 표현한 실수 집합 $R$을 확장해 두 실수 집합의 곱집합 $R \times R$을 평면으로 나타낼 수 있다.       
> 두 실수 집합의 곱집합으로 형성된 평면에 다시 실수 집합을 곱집합으로 설정하면 3차원 공간이 된다.

* * *

[본문](/README-ORIGIN.md#24-곱집합을-활용한-좌표-평면으로의-확장)

# 3. 데카르트 좌표계
### 선요약

> - 벡터(Vector): 평면을 구성하는 원소
> - 데카르트 좌표계(Cartesian coordinate system): 직선의 수 집합을 수직으로 배치해 평면을 표기하는 방식=곱집합/데카르트 곱(Cartesian product)
> - 좌표(Coordinate): 데카르트 좌표계의 한 원소, 곱집합과 동일하게 순서쌍으로 표현 $(x, y)$

* * *

[본문](/README-ORIGIN.md#3-데카르트-좌표계)

# 4. 벡터 공간과 벡터
# 4.1. 스칼라와 벡터
### 선요약

> - 벡터 공간(Vector space): 공리적 집합론의 관점에서 두 개 이상의 실수를 곱집합으로 묶어 형성된 집합
> - 벡터(Vector): 벡터 공간의 원소
> - 스칼라(Scalar): 체의 구조를 가지는 수 집합의 원소     
> 공리적 집합론의 관점에서는 특정한 수 집합을 지칭하지 않고 연산이 갖는 성질만 다루기 때문에, 좌푯값으로 사용하는 $x$와 $y$를 실수로 규정하기보다는 체의 구조를 지니는 집합, 즉 체 집합의 원소로 규정한다

* * *

[본문](/README-ORIGIN.md#41-스칼라와-벡터)

# 4.2. 벡터 공간의 연산
### 선요약

> 벡터 공간의 두 가지 기본 연산:
> 1. 벡터와 벡터의 덧셈(벡터의 합)        
> 
> $$\vec{v_1} + \vec{v_2} = (x_1, y_1) + (x_2, y_2) = (x_1 + x_2, y_1 + y_2)$$
> 
> 2. 스칼라와 벡터의 곱셈(스칼라 곱셈)
> 
> $$a \cdot \vec{v} = a \cdot (x, y) = (a \cdot x, a \cdot y)$$
> 
> 벡터 공간의 공리:
> |No|분류|공리|수식|
> |---|---|---|---|
> |1|벡터의 합|벡터의 합의 결합법칙|$\vec{u} + (\vec{v} + \vec{w}) = (\vec{u} + \vec{v}) + \vec{w}$|
> |2|벡터의 합|벡터의 합의 교환법칙|$\vec{u} + \vec{v} = \vec{v} + \vec{u}$|
> |3|벡터의 합|벡터의 합의 항등원|$\vec{v} + \vec{0} = \vec{v}$|
> |4|벡터의 합|벡터의 합의 역원|$\vec{v} + (-\vec{v}) = \vec{0}$|
> |5|스칼라 곱셉|스칼라 곱셈의 호환성|$a(b\vec{v}) = (ab)\vec{v}$|
> |6|스칼라 곱셉|스칼라 곱셈의 항등원|$1 \cdot \vec{v} = \vec{v}$|
> |7|스칼라 곱셉|벡터의 합에 대한 분배법칙|$a(\vec{u} + \vec{v}) = a\vec{u} + a\vec{v}$|
> |8|스칼라 곱셉|스칼라 덧셈에 대한 분배법칙|$(a + b)\vec{v} = a\vec{v} + b\vec{v}$|
> 
> 스칼라 곱셈은 스칼라배라고도 불린다.        
> 스칼라곱은 스칼라 곱셈과 다른 연산이며 내적을 의미한다.

* * *

[본문](/README-ORIGIN.md#42-벡터-공간의-연산)

# 4.3. 벡터의 크기와 이동
### 선요약

> - 벡터의 크기: 원점으로부터의 최단 거리=노름(Norm)
> - 벡터 크기의 측정: 원점과 벡터를 연결해 직각삼각형을 그린 후, 피타고라스 정리를 사용해 거리를 측정
> 
> $$c^2 = a^2 + b^2$$
> 
> $$\therefore = \sqrt{a^2 + b^2}$$
> 
> - 단위 벡터(Unit Vector): 크기가 1인 벡터       
> 모자 기호(Hat)를 씌워 $\hat{v}$ 형태로 표시한다
> - 정규화(Normalize): 임의의 벡터 $\vec{v}$를 크기가 1인 단위 벡터 $\hat{v}$로 다듬는 작업       
> 스칼라 곱셈의 성질을 이용해 임의 벡터 $\vec{v}$를 이의 크기인 $|\vec{v}|$로 나누면 단위 벡터 $\hat{v}$를 얻을 수 있다
> 
> $$\hat{v} = \frac{\vec{v}}{|\vec{v}|}$$

* * *

[본문](/README-ORIGIN.md#43-벡터의-크기와-이동)

# 5. 벡터의 결합과 생성
### 선요약

> - 선형 연산: 선형성이 존재하는 연산     
> 벡터 공간의 벡터의 합과 스칼라 곱셈 연산이 해당됨
> - 선형 결합(Linear combination): 선형 연산을 사용해 $n$개의 스칼라 $a_1, ..., a_n$과 $n$개의 벡터 $\vec{v_1}, ..., \vec{v_n}$를 결합해 새로운 벡터 $\vec{v'}$를 생성하는 수식
> 
> $$a_1\vec{v_1} + a_2\vec{v_2} + a_3\vec{v_3} + ... + a_n\vec{v_n} = \vec{v'}$$
> 
> - 선형 종속의 관계: 선형 결합에 사용된 벡터의 모든 $a$가 0이 아님에도 영벡터를 만들 수 있는 경우
> 
> $$2 \cdot (1, 1) + (-1) \cdot (2, 2) = (0, 0)$$
> 
> - 선형 독립의 관계: 선형 결합에 사용된 벡터들의 모든 $a$값이 0이어야 영벡터가 나오는 경우       
> 선형 독립의 관계를 가지는 벡터를 선형 결합하면 벡터 공간에 속한 모든 벡터를 생성할 수 있다
> 
> $$0 \cdot (1, 2) + 0 \cdot (2, 1) = (0, 0)$$
> 
> 평행한 두 벡터(선형 종속의 관계)를 결합한 결과는 두 개의 벡터 결합이 아닌 하나의 벡터에 스칼라 곱을 적용한 결과에 불과하기 때문에, 어떤 스칼라 값을 대입하더라도 선형 결합의 결과는 벡터와 평행한 벡터만 생성될 뿐이고 이와 평행하지 않은 벡터를 생성하는 것은 불가능하다
> 
> - 기저(Basis): 벡터 공간 내 모든 벡터를 생성할 수 있는 선형 독립 관계를 가지는 벡터의 집합
> - 기저벡터(Basis vector): 기저에 속한 원소
> - 차원(Dimension): 평면으로 구성된 벡터 공간을 생성하기 위한 기저는 수많은 경우의 수가 존재하지만, 기저 집합의 원소 수는 언제나 2개 뿐이다      
> 따라서 평면에 대응하는 벡터 공간을 2차원으로 정의할 수 있다
> - 2차원 실벡터 공간(Real vector space): 두 개의 실수 집합을 결합해 생성한 벡터 공간     수 집합의 기호와 차원의 정보를 첨자로 결합해 $R^2$로 나타낸다
> - 표준기저(Standard basis): 2차원을 구성하는 다양한 기저 중에서 한 축만 사용하는 단위 벡터 $(1, 0), (0, 1)$로 구성된 집합
> - 표준기저벡터(Standard basis vector): 기저의 각 원소
> 
> $$e_1 = (1, 0)$$
> 
> $$e_2 = (0, 1)$$

* * *

[본문](/README-ORIGIN.md#5-벡터의-결합과-생성)

# 6. 삼각함수
### 선요약

> - 삼각비(Trigonometric Ratio): 직각삼각형을 구성하는 세 변에서 두 변을 뽑아 각각의 비례관계를 나타낸 것
> - 대표적인 삼각비: 사인(Sine), 코사인(Cosine), 탄젠트(Tangent)
> 
> 밑변의 길이=a, 높이의 길이=b, 빗변의 길이=c, 빗변과 밑변의 사잇각=$\theta$:
> 
> $$\sin \theta = \frac{b}{c}$$
> 
> $$\cos \theta = \frac{a}{c}$$
> 
> $$\tan \theta = \frac{b}{a}$$
> 
> - 삼각함수(Trigonometric function): 직각삼각형을 데카르트 좌표계 상에 배치하고 사잇각의 범위를 실수 전체($R$ 집합)로 확장한 대응 관계
> - 단위 원(Unit circle): 원점을 중심으로 반지름이 1인 원     
> 단위 원의 원주 위에 있는 임의의 점을 이어 직각삼각형을 그리면 빗변의 길이는 항상 1이다.      
> 빗변 $c$의 길이가 1이므로 삼각비 $\sin \theta$의 값은 높이 $b$와 같고 $\cos \theta$ 값은 밑변 $a$와 같다.       
> 
> $$\sin \theta = \frac{b}{1} = b$$
> 
> $$\cos \theta = \frac{a}{1} = a$$
> 
> 데카르트 좌표계에서 빗변이 가리키는 단위 원의 좌표는 $(\cos \theta, \sin \theta)$로 표현할 수 있다.     
> 이를 삼각함수로 확장하면 원주 위의 모든 좌표는 $(\cos \theta, \sin \theta)$에 대응한다.
> 
> 밑변 $a$의 $x$좌표는 $\cos \theta$가 되고 높이 $b$의 $y$좌표는 $\sin \theta$가 되는데 이를 피타고라스 정리 $a^2 + b^2 = c^2$에 대입하면 다음 공식을 얻을 수 있다.
> 
> $$\cos^2\theta + \sin^2\theta = 1$$
> 
> 반지름이 $r$인 원에서의 빗변은 벡터의 개념으로 보았을 때 길이가 1인 벡터와 평행하고 길이는 $r$배만큼 증가했으므로 스칼라 곱셈에 의해 $r \cdot (\cos \theta, \sin \theta)$라는 좌표를 갖게 된다.         
> 빗변의 길이가 $r$인 직각삼각형의 밑변의 길이는 $r \cdot \cos \theta$가 되고, 높이의 길이는 $r \cdot \sin \theta$가 된다.
> 
> 빗변과 삼각비의 관계를 나타내는 식은 반지름의 길이와 무관하게 성립한다.
> 
> $$r^2(\cos^2 \theta + \sin^2 \theta) = r^2$$
> 
> $$\therefore \cos^2 \theta + \sin^2 \theta = 1$$

* * *

[본문](/README-ORIGIN.md#6-삼각함수)

# 6.1. 삼각함수의 성질
### 선요약

> - 데카르트 좌표계에서 각도: $x$축에서 원의 궤적을 따라 반시계 방향으로 회전한 크기
> - 각도 $0^\circ$: 단위 원에서 아직 회전하지 않아 $x$축 상에 위치한 빗변 $\vec{v}$의 좌표는 $(1, 0)$이다     
> 
> $$\vec{v} = (v_x, v_y) = (\cos 0^\circ, \sin 0^\circ) = (1, 0)$$
> 
> $$\therefore \sin 0^\circ = 0, \cos 0^\circ = 1$$
> 
> 각도를 $0^\circ$에서 $90^\circ$까지 서서히 증가시키면서 회전하는 빗변의 좌표 $v_x$와 $v_y$의 변화를 살펴보면 각도가 증가할수록 $v_x$값은 감소하고 $v_y$값은 증가한다.       
> 목적지인 $90^\circ$에 도달하면 $y$축 상에 위치한 좌표 $(0, 1)$과 일치하는 벡터가 만들어진다.
> 
> 각도가 $90^\circ$를 넘어서면 $v_x$값은 0을 지나 음수가 되고, $v_y$값은 다시 0을 향해 감소하기 시작한다.     
> 한바퀴에 해당하는 $360^\circ$까지 빗변의 좌표 변화를 관찰하면, -1에 도달할 때까지 계속 감소하다가 -1에 도달하면 방향을 바꿔서 1을 향해 증가하며, 1에 도달하면 다시 -1을 향해 감소하는 패턴을 반복한다.      
> 이러한 값의 변화는 $[-1, 1]$ 범위 내에서 $360^\circ$마다 반복된다.
> 
> - 진폭(Amplitude): 변화 값의 범위
> - 주기(Period): 반복되는 각도
> 
> $\cos$ 함수, $\sin$ 함수의 그래프로부터 정리한 함수의 성질:
> 1. $\sin$ 함수와 $\cos$ 함수는 항상 -1에서 1 사이를 일정하게 반복하는 패턴을 띈다.
> 2. $\sin$ 함수와 $\cos$ 함수의 값은 $360^\circ$ 주기로 반복된다.
> 3. $y$축을 기준으로 좌우를 접어 포갰을 때 $\cos$ 함수 그래프는 좌우 대칭인 반면, $\sin$ 함수 그래프는 상하가 반전된 원점 대칭의 형태를 띈다.        
> 
> - 우함수 또는 짝함수(Even function): $\cos$ 함수와 같이 좌우 대칭의 성질을 가진 함수
> - 기함수 또는 홀함수(Odd function): $\sin$ 함수와 같이 원점 대칭의 성질을 가진 함수
> 
> 홀함수와 짝함수의 성질:
> 
> $$\cos(-\theta) = \cos(\theta)$$
> 
> $$\sin(-\theta) = -\sin(\theta)$$
> 
> $\tan$ 함수는 빗변과 무관하게 밑변과 높이의 관계만을 나타낸다   
> 
> $$\tan \theta = \frac{b}{a}$$
> 
> 밑변과 높이를 모두 빗변 값으로 각각 나누면 $\cos$과 $\sin$으로 $\tan$ 함수를 표현할 수 있다
> 
> $$\tan \theta = \frac{\frac{b}{c}}{\frac{a}{c}} = \frac{\sin \theta}{\cos \theta}$$
> 
> 분모의 값은 0이 될 수 없기 때문에 분모에 해당하는 $\cos$ 함수 값이 0이 되는 $90^\circ, 270^\circ, -90^\circ, -270^\circ$에서는 $\tan$ 값이 존재하지 않는다      
> 때문에 $\tan$ 함수의 정의역에는 해당 구간이 포함되지 않는다     
> $\sin$ 함수와 동일하게 홀함수의 성질을 지닌다

* * *

[본문](/README-ORIGIN.md#61-삼각함수의-성질)

# 6.2. 각의 측정법
### 선요약

> - 각도법(Degree): 일상 생활에서 각(Angle)의 크기를 잴 때 0에서 360까지의 수를 사용하는 방법       
> 각도법에서 기준으로 삼는 360이라는 수는 약수가 많아 원을 다양한 방법으로 쪼개어 활용할 수 있지만 일상생활에서의 편리를 위한 것일 뿐, 표준으로 사용하기에는 큰 수다
> - 호도법(Radian): 호의 길이를 기준으로 각을 측정하는 방법       
> 호도법은 호의 길이가 1이 되는 부채꼴의 각을 기준으로 각을 측정한다      
> $180^\circ$에 해당하는 반원의 호 길이는 파이($\pi$)이고 호의 길이가 1인 부채꼴의 중심각은 $180^\circ$를 $\pi$로 나누어 약 $57.2958^\circ$의 무리수가 된다        
> 이 부채꼴의 각이 호도법에서 사용하는 각의 기준인 $1rad$(라디안)이다
> 
> 반원의 중심각은 호 길이가 $\pi$이므로 라디안을 기준으로 $\pi$배만큼 크다        
> 따라서 각도법과 호도법 사이에는 다음의 대응 관계가 성립한다
> 
> $$\pi(rad) = 180^\circ$$
> 
> $$1^\circ = \frac{\pi}{180}(rad)$$
> 
> $$1(rad) = (\frac{180}{\pi})^\circ$$
> 
> 가장 흔히 사용하는 각의 각도와 호도:
> 
> |각도법|호도법|
> |---|---|
> |$30^\circ$|$\frac{\pi}{6}$|
> |$45^\circ$|$\frac{\pi}{4}$|
> |$60^\circ$|$\frac{\pi}{3}$|
> |$90^\circ$|$\frac{\pi}{2}$|
> |$180^\circ$|$\pi$|
> |$360^\circ$|$2\pi$|

* * *

[본문](/README-ORIGIN.md#62-각의-측정법)

# 7. 삼각함수를 활용한 물체의 회전
### 선요약

> 물체를 이동시키고 크기를 늘리는 동작은 서로 수직인 $x$축과 $y$축이 서로 독립적으로 적용된다.        
> 따라서 $x$축과 $y$축을 분리해 따로따로 계산한 후 두 결과를 결합한 것과 동일하다.
> 
> 회전이라는 동작은 $x$와 $y$값이 함께 영향을 미치기 때문에 $x$축과 $y$축을 독립적으로 계산할 수 없다.        
> 회전을 위해 실벡터 공간 $R^2$ 전체를 각 $\theta$만큼 회전시키면, 두 표준기저벡터 $e_1$과 $e_2$의 좌표는 다음과 같이 변화한다.
> 
> $$e_1' = (\cos \theta, \sin \theta)$$
> 
> $$e_2' = (-\sin \theta, \cos \theta)$$
> 
> 좌표 $(1, 1)$의 값을 가진 벡터 $\vec{v}$를 각 $\theta$만큼 회전한 벡터 $\vec{v'}$는 다음과 같이 회전된 표준기저벡터 $e_1'$과 $e_2'$를 선형 결합하여 얻을 수 있다.       
> 
> $$\vec{v'} = 1 \cdot (\cos \theta, \sin \theta) + 1 \cdot (-\sin \theta, \cos \theta)$$
> 
> 따라서 좌표 $(1, 1)$이 각 $\theta$만큼 회전한 벡터 $\vec{v'}$의 좌표는 다음과 같다.
> 
> $$\vec{v'} = (\cos \theta - \sin \theta, \sin \theta + \cos \theta)$$
> 
> 임의의 벡터 $\vec{u} = (x, y)$에 대해 각 $\theta$만큼 회전한 벡터 $\vec{u'} = (x', y')$을 구할 수 있는 일반적인 수식은 다음과 같이 정리된다.
> 
> $$\vec{u} = (x, y) = x \cdot e_1 + y \cdot e_2 = x \cdot (1, 0) + y \cdot (0, 1)$$
> 
> $$\vec{u'} = (x', y') = x \cdot (\cos \theta, \sin \theta) + y \cdot (-\sin \theta, \cos \theta) \\
> = (x \cos \theta - y \sin \theta, x \sin \theta + y \cos \theta)$$
> 
> 임의의 벡터 $(x, y)$가 각 $\theta$만큼 회전된 결과 $(x', y')$는 다음과 같다.
> 
> $$x' = x \cos \theta - y \sin \theta$$
> 
> $$y' = x \sin \theta + y \cos \theta$$

* * *

[본문](/README-ORIGIN.md#7-삼각함수를-활용한-물체의-회전)

# 8. 삼각함수의 역함수
### 선요약

> 주어진 벡터의 좌표로부터 이에 대응하는 각도를 얻어내기 위해선 삼각함수의 역함수에 대해 알아야 한다.     
> $\sin$ 함수가 가진 $x$와 $y$ 사이의 대응 관계를 살펴보면 정의역의 여러 요소가 공역의 한 요소에 대응된다.        
> 만일 공역의 범위를 실수 집합 전체가 아닌 $|-1, 1|$ 구간으로 한정해 정의하면, $\sin$ 함수는 전사함수의 성질을 띤다.      
> 여기서 정의역의 범위를 $|-90^\circ, 90^\circ|$로 좁혀 정의역의 한 요소가 공역의 한 요소에 대응되는 전단사함수의 성질을 띠게 만든다.     
> $\sin$ 함수의 정의역과 공역의 범위를 좁혀 전단사함수로 만들면, $\sin x$값이 주어졌을 때 거꾸로 각 $x$를 구할 수 있는 역함수가 존재하게 된다.        
> 
> $\sin$ 함수와 동일하게 $\cos$ 함수의 정의역을 $|0^\circ, 180^\circ|$, 공역을 $|-1, 1|$로 좁혀 전단사함수로 만들고 역함수를 구할 수 있다.
> 
> $\tan$ 함수의 치역은 실수 영역 전체인데 반해, 정의역이 존재하지 않는 구간이 존재한다.       
> 따라서 $\tan$ 함수의 정의역 구간을 제한해서 한정해야 한다.      
> $\tan$ 함수는 $x$값이 $-90^\circ$와 $90^\circ$일 때의 $y$값이 존재하지 않으므로 전단사함수가 되기 위한 정의역 구간은 $-90^\circ$와 $90^\circ$ 값을 제외한 $(-90^\circ, 90^\circ)$ 범위가 되어야 한다.
> 
> - $\arcsin$(아크사인): 정의역과 공역의 범위를 제한시켜 얻은 $\sin$ 함수의 역함수
> - $\arccos$(아크코사인): 정의역과 공역의 범위를 제한시켜 얻은 $\cos$ 함수의 역함수
> - $\arctan$(아크탄젠트): 정의역 범위를 제한시켜 얻은 $\tan$ 함수의 역함수
> 
> $\arctan$ 함수는 벡터의 각도를 구하는 데 유용하게 사용된다.     
> 임의의 벡터를 $\vec{v} = (x, y)$라고 할 때 분수식 $\frac{y}{x}$를 계산해 벡터로부터 $\tan$ 함수 값을 얻을 수 있다.      
> 이 $\tan$ 값을 $\arctan$ 함수에 넣으면 해당 벡터가 $x$축과 이루는 사잇각을 얻어낼 수 있다.
> 
> $\arctan$ 함수의 치역은 $(-90^\circ, 90^\circ)$ 구간이므로 $\arctan$ 함수로 얻을 수 있는 각의 범위에는 한계가 있다.     
> 하지만 인자에 분수 $\frac{y}{x}$ 값을 넣지 않고 $x$와 $y$의 두 값을 분리해 전달하면 4분면 전체에 해당하는 각의 정보를 얻을 수 있다.
> 
> $x$와 $y$를 따로 전달하는 $\arctan$ 함수를 $atan2$ 함수라고 부르며, 이는 분수 $\frac{y}{x}$를 연상하기 쉽게 $y$값에 이어 $x$값을 전달하도록 설계된다.       
> $atan2$를 사용하면 평면의 모든 사분면에 대응하는 각도를 얻을 수 있다.

* * *

[본문](/README-ORIGIN.md#8-삼각함수의-역함수)

# 9. 극좌표계
### 선요약

> 데카르트 좌표계로 회전을 구현하면 회전에 따른 $x$와 $y$의 변화를 매번 계산하는 번거로움이 발생한다.     
> 
> - 극좌표계(Polar coordinate system): 편리하게 회전을 관리하고 구현하기 위해 회전 동작을 기반으로 설계된 좌표계다.    
> 극좌표계는 원점으로부터의 거리 $r$과 각 $\theta$의 두 요소로 구성되며 극좌표계의 좌표는 $(r, \theta)$로 표시한다.
> 
> 데카르트 좌표계로 표현된 벡터 $(x, y)$는 벡터의 크기와 $\arctan$ 함수를 사용해 다음과 같이 극좌표계 $(r, \theta)$로 변환할 수 있다.
> 
> $$r = \sqrt{x^2 + y^2}$$
> 
> $$\theta = atan2(y, x)$$
> 
> 반대로 극좌표계의 좌표 $(r, \theta)$를 데카르트 좌표계 $(x, y)$로 변환하는 식은 삼각함수를 사용해 구한다.
> 
> $$x = r \cdot \cos \theta$$
> 
> $$y = r \cdot \sin \theta$$
> 
> 극좌표계가 지니는 원형 공간의 성질은 회전에 관련된 여러 효과를 줄 때 유용하게 사용된다.     
> 예를 들어 게임에서 사용되는 스킬 아이콘의 쿨타임 효과가 대표적이다.

* * *

[본문](/README-ORIGIN.md#9-극좌표계)

# 10. 선형성: 예측 가능한 비례 관계
### 선요약

> - 선형성(Linerity): 직선의 형태를 띠는 성질, 가법성과 1차 동차성 두 가지 조건을 모두 만족하는 함수의 성질을 의미한다.
> - 가법성(Additivity): $f(x_1 + x_2) = f(x_1) + f(x_2)$
> - 1차 동차성(Homogeneity of degree 1): $f(k \cdot x) = k \cdot f(x)$

* * *

[본문](/README-ORIGIN.md#10-선형성-예측-가능한-비례-관계)

# 10.1. 선형 함수
### 선요약

> 입력에 사용하는 요소 $x$와 출력이 모두 실수면서 선형성을 지니는 함수의 예시:
> 
> $$f(x) = ax$$
> 
> 가법성을 만족하는 수식 $f(x_1 + x_2) = f(x_1) + f(x_2)$에 대입했을 때 $a, x_1, x_2$가 모두 체의 성질을 가지는 실수라면 분배법칙에 의해 $a(x_1 + x_2) = ax_1 + ax_2$가 성립한다.     
> 따라서 함수 $f(x) = ax$는 가법성을 만족한다.
> 
> 1차 동차성을 만족하는 수식 $f(k \cdot x) = k \cdot f(x)$에 대입했을 때 $a, x, k$가 모두 체의 성질을 가지는 실수라면 곱셈에 대한 결합법칙과 교환법칙이 성립하므로, $a(kx) = k(ax)$가 성립한다.       
> 따라서 함수 $f(x) = ax$는 1차 동차성을 만족한다.
> 
> $y = x^2$와 $y = ax + b$는 선형성을 만족하지 못한다.     
> 선형성이란 단지 곧게 뻗은 직선의 성질을 뜻하는 것이 아니라, 두 집합의 순수한 비(Ratio)로 구성된 1차적 대응 관계를 의미한다.     

* * *

[본문](/README-ORIGIN.md#101-선형-함수)

# 10.2. 벡터 공간의 선형 변환
### 선요약

> 2차원 벡터를 입력받고 2차원 벡터를 출력하는 함수에서 선형성을 가지는 함수를 설계하기 위해선 입력에 사용한 2차원 벡터가 $(x, y)$로 구성된 경우, $x$와 $y$는 서로 독립된 관계를 형성해야 한다.        
> 선형성을 가지는 함수는 순수한 비의 형태로 구성되어 있기 때문에 $x$와 $y$는 각각에 대해 선형성을 유지하기 위해 $ax$와 $by$ 같은 단순 비의 형태를 사용하고, 이를 섞은 최종 결과는 각 비의 결과를 더한 $ax + by$의 형태가 된다.        
> 따라서 2차원 벡터를 입출력으로 사용하는 선형성을 가지는 함수는 다음과 같이 설계된다.
> 
> $$f(\vec{v}) = f(x, y) = (ax + by, cx + dy)$$
> 
> 위 함수는 가법성과 1차 동차성을 모두 만족하므로 선형 함수다.
> 
> - 변환(Transformation): 두 공간이 동일한 구조를 지닐 때 두 공간의 대응 관계     
> 예를 들어 표준기저벡터의 선형 결합으로 형성된 벡터 공간은 선형성을 지니고 이 벡터 공간을 선형 함수로 변화시킨 새로운 공간도 기저벡터의 선형 결합으로 형성되므로 선형성을 지닌다
> - 선형 변환(Linear transformation): 선형성을 유지시켜주는 선형 함수
> 예를 들어 $f(x, y) = (ax + by, cx + dy)$
> 
> 임의의 벡터 $\vec{v}$의 크기를 $k$배 늘리는 작업은 다음과 같이 스칼라 곱셈으로 표현이 가능하다.
> 
> $$f(\vec{v}) = f(x, y) = (kx, ky)$$
> 
> 이는 $(ax + by, cx + dy)$의 형식에 $a = k, b = 0, c = 0, d = k$를 대입한 결과와 동일하므로 선형 변환이다.
> 
> 임의의 벡터 $\vec{v}$를 각 $\theta$만큼 회전시키는 작업은 다음과 같은 함수로 표현이 가능하다.
> 
> $$f(\vec{v}) = f(x, y) = (\cos \theta x - \sin \theta y, \sin \theta x + \cos \theta y)$$
> 
> 이는 $(ax + by, cx + dy)$의 형식에 $a = \cos \theta, b = -\sin \theta, c = \sin \theta, d = \cos \theta$를 대입한 결과와 동일하므로 선형 변환이다.
> 
> 벡터 공간에서의 선형 변환은 단순한 비례 관계로 구성된 선형 함수 $f(x) = ax$처럼 두 집합의 순수한 비를 통해 예측할 수 있는 형태로 변환되며, 역함수를 통해 변환 후의 벡터로부터 변환 전의 벡터를 파악할 수 있다.

* * *

[본문](/README-ORIGIN.md#102-벡터-공간의-선형-변환)

# 11. 행렬
### 선요약

> - 행렬(Matrix): 수를 사각형의 형태로 행과 열을 맞춰 배열한 테이블       
> n개의 행과 m개의 열로 구성된 반듯한 사각형의 형태를 띤다        
> 선형 변환과 벡터를 나타내는 데 사용된다
> - 벡터를 행렬로 표현: 한 줄로 구성된 행렬로 표현        
> 가로와 세로 두 가지 표현 방식이 존재하며 $(x, y)$로 구성된 2차원의 벡터는 $A$(열벡터) 혹은 $B$(열벡터) 행렬로 표기할 수 있다
> 
> $$
A = 
\begin{bmatrix}
x \\
y \\
\end{bmatrix}$$
> 
> $$
B = 
\begin{bmatrix}
x & y \\
\end{bmatrix}$$
> 
> - 정방행렬(Square matrix): 행과 열이 크기가 같은 행렬       
> 선형 변환을 표현할 때 사용      
> 2차원 벡터 공간의 선형 변환 $f(x, y) = (ax + by, cx + dy)$는 다음과 같은 $2 \times 2$ 크기의 정방행렬로 표현한다      
> 정방행렬 $A$는 2개의 행벡터 또는 2개의 열벡터로 구성된다고 할 수 있다
> 
> $$
A = 
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix}$$
> 

* * *

[본문](/README-ORIGIN.md#11-행렬)

# 11.1. 행렬의 기본 연산
### 선요약

> 행렬의 주요 연산 4가지:
> - 행렬과 행렬의 덧셈
> - 행렬과 스칼라의 곱셈
> - 행렬의 전치(Transpose of a matrix)
> - 행렬과 행렬의 곱셈 (행렬 곱)
> 
> 행렬과 행렬의 덧셈: 행렬의 크기가 같은 경우에만 성립되며, 같은 위치의 원소끼리 더한다
> 
> $$
A + B = 
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix} + 
\begin{bmatrix}
e & f \\
g & h \\
\end{bmatrix} = 
\begin{bmatrix}
a + e & b + f \\
c + g & d + h \\
\end{bmatrix}$$
> 
> 행렬과 스칼라의 곱셈: 행렬을 구성하는 모든 원소에 스칼라를 곱한다
> 
> $$
k \cdot A = k \cdot 
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix} =
\begin{bmatrix}
k \cdot a & k \cdot b \\
k \cdot c & k \cdot d \\
\end{bmatrix}$$
> 
> 행렬의 전치: 첨자 $T$로 표시하며, 행과 열을 바꾸는 작업을 수행한다      
> 예를 들어 $3 \times 2$ 행렬의 전치연산은 $2 \times 3$ 행렬이 된다       
> 정방행렬의 전치연산은 행과 열의 정보가 동일한 대각 성분의 원소는 그대로 유지되고, 나머지 원소는 대각성분을 중심으로 대칭된 행렬을 만든다
> 
> $$
\begin{bmatrix}
a & d \\
b & e \\
c & f \\
\end{bmatrix}^T = 
\begin{bmatrix}
a & b & c \\
d & e & f \\
\end{bmatrix}$$
> 
> $$
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix}^T =
\begin{bmatrix}
a & c \\
b & d \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md#111-행렬의-기본-연산)

# 11.2. 행렬의 곱셈
### 선요약

> 행렬의 곱셈: 앞에 위치한 행렬의 행벡터와 뒤에 위치한 행렬의 열벡터를 각각 곱하는 방식으로 진행      
> 
> $$
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix} \cdot
\begin{bmatrix}
e & f \\
g & h \\
\end{bmatrix} =
\begin{bmatrix}
ae + bg & af + bh \\
ce + dg & cf + dh \\
\end{bmatrix}$$
> 
> 행렬 곱셈의 연산 법칙 성립 여부:
> 
> |법칙|성립|
> |---|---|
> |교환법칙|X|
> |결합법칙|O|
> 
> 행렬 곱을 전치한 결과는 순서를 바꾼 후 각각 전치해 곱한 결과와 동일하다
> 
> $$(A \cdot B)^T = 
\begin{bmatrix}
ae + bg & af + bh \\
ce + dg & cf + dh \\
\end{bmatrix}^T = 
\begin{bmatrix}
ae + bg & ce + dg \\
af + bh & cf + dh \\
\end{bmatrix}$$
> 
> $$B^T \cdot A^T = 
\begin{bmatrix}
e & g \\
f & h \\
\end{bmatrix} \cdot
\begin{bmatrix}
a & c \\
b & d \\
\end{bmatrix} =
\begin{bmatrix}
ea + gb & ec + gd \\
fa + hb & fc + hd \\
\end{bmatrix}$$
> 
> $$\therefore (A \cdot B)^T = B^T \cdot A^T$$
> 
> $a, b, c, d$ 네 개의 원소로 구성된 $2 \times 2$ 정방행렬과 2차원 벡터 $(x, y)$를 열벡터로 설정한 두 행렬의 곱은 다음과 같이 전개된다        
> 행렬 곱의 결과는 2차원 벡터 공간의 선형 변환 $f(x, y) = (ax + by, cx + dy)$와 동일하다      
> 따라서 $2 \times 2$ 정방행렬 $A$는 2차원 공간의 선형 변환에 대응되는 함수를 의미하고, 이 수식은 $f(x, y) = (ax + by, cx + dy)$ 2차원 벡터에 선형 변환을 적용해 새로운 벡터를 생성하는 작업으로 해석할 수 있다       
> 벡터에 선형 변환을 적용하기 위한 연산 순서는 오른쪽에서 왼쪽 방향으로 이뤄진다
> 
> $$
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix} \cdot 
\begin{bmatrix}
x \\
y \\
\end{bmatrix} = 
\begin{bmatrix}
ax + by \\
cx + dy \\
\end{bmatrix}$$
> 

* * *

[본문](/README-ORIGIN.md#112-행렬의-곱셈)

# 11.3. 정방행렬의 곱셈
### 선요약

> $2 \times 2$ 정방행렬이 2차원 벡터 공간의 선형 변환에 대응된다면, $2 \times 2$ 정방행렬 간의 곱은 합성함수에 대응되는 연산이다
> 
> 합성함수는 결합법칙을 만족하고, 합성함수에 대응하는 행렬의 곱셈 역시 결합법칙을 만족한다        
> 따라서 행렬의 연산 순서를 바꿔도 최종 계산된 벡터 $\vec{w}$ 값은 동일하다
> 
> 이처럼 결합법칙이 성립하는 행렬 곱의 성질은 컴퓨터 그래픽 연산에서 아주 유용하게 활용된다       
> 예를 들어 100개의 점으로 구성된 물체가 모니터에 표현되기까지 5번의 선형 변환이 발생한다는 가정하면 각 점마다 5번의 행렬 곱이 수행되므로 100개 점에 대한 행렬 곱의 총 횟수는 500이 된다
> 
> 결합법칙이 성립하는 행렬 연산의 특징을 사용하면 계산량을 줄이되 동일한 결과를 얻을 수 있다      
> 행렬 곱을 4번 수행해서 합성함수에 해당하는 행렬 $F$를 미리 만들어 각 점에 대해 미리 계산된 행렬 $F$만 곱하면 동일한 결과가 나온다       
> 이 경우 100개 점에 대한 행렬 곱의 총 횟수는 최초 합성 변환을 만들기 위한 4번의 행렬 곱과 벡터마다 1번의 행렬 곱이 수행되므로 104가 된다     
> 
> 이 결과는 앞서 구한 500번의 행렬 곱 연산과 동일하다     
> 가상 공간의 한 캐릭터를 표현하는 데 보통 10만 개의 점이 사용되므로, 컴퓨터 그래픽에서 행렬은 가상 세계를 구축하는 데 필요한 계산량을 크게 줄여주는 중요한 역할을 수행한다는 걸 알 수 있다

* * *

[본문](/README-ORIGIN.md#113-정방행렬의-곱셈)

# 12. 행렬의 설계
### 선요약

> $2 \times 2$ 정방행렬=2차원 벡터 공간의 선형 변환       
> 
> 원 벡터 공간 $V$의 벡터 $\vec{v} = (x, y)$는 다음과 같은 표준기저벡터의 선형 결합을 통해 생성된다
> 
> $$\vec{v} = (x, y) = x \cdot (1, 0) + y \cdot (0, 1)$$
> 
> 같은 방법으로 벡터 $\vec{v}$가 선형 변환되는 경우에는 동일한 선형 결합식을 사용해 벡터 $\vec{w}$는 다음과 같이 계산된다
> 
> $$\vec{w} = x(a, c) + y(b, d) = (ax + by, cx + dy)$$
> 
> 이는 $a, b, c, d$로 만들어진 정방행렬에 벡터 $(x, y)$를 곱한 결과와 동일하다
> 
> $$
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix} \cdot 
\begin{bmatrix}
x \\
y \\
\end{bmatrix} =
\begin{bmatrix}
ax + by \\
cx + dy \\
\end{bmatrix}$$
> 
> 위의 정방행렬과 표준기저벡터가 변화된 두 벡터 $(a, c)$와 $(b, d)$와의 관계를 분석하면 이들은 정방행렬을 구성하는 열벡터로 해석할 수 있다

* * *

[본문](/README-ORIGIN.md#12-행렬의-설계)

# 12.1. 크기 변환행렬
### 선요약

> - 크기 변환: 각 표준기저벡터를 동일한 방향으로 지정한 크기만큼 늘리는 변환
> - 크기 변환행렬(Scale transformation matrix): 물체의 크기를 변경하는 행렬
> - 표준기저벡터 $e_1$을 $a$배만큼 늘리거나 줄인 벡터: $a \cdot (1, 0) = (a, 0)$
> - 표준기저벡터 $e_2$를 $b$배만큼 늘리거나 줄인 벡터: $b \cdot (0, 1) = (0, b)$
> 
> 변환된 두 표준기저벡터 $(a, 0)$과 $(0, b)$를 열벡터로 설정해 생성한 크기 변환행렬:
> 
> $$S = 
\begin{bmatrix}
a & 0 \\
0 & b \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md#121-크기-변환행렬)

# 12.2. 회전 변환행렬
### 선요약

> - 회전 변환행렬(Rotation transformation matrix): 주어진 각 $\theta$로 벡터 공간을 회전시키는 행렬
> - 표준기저벡터 $e_1$을 $90^\circ$ 회전한 벡터: $(0, 1)$
> - 표준기저벡터 $e_2$를 $90^\circ$ 회전한 벡터: $(-1, 0)$
> 
> $90^\circ$ 회전 변환을 수행하는 행렬:
> 
> $$R_{90^\circ} = R_\frac{\pi}{2} = 
\begin{bmatrix}
0 & -1 \\
1 & 0 \\
\end{bmatrix}$$
> 
> - 표준기저벡터 $e_1$을 $-90^\circ$ 회전한 벡터: $(0, -1)$
> - 표준기저벡터 $e_2$을 $-90^\circ$ 회전한 벡터: $(1, 0)$
> 
> $-90^\circ$ 회전 변환을 수행하는 행렬:
> 
> $$R_{90^\circ} = R_{-\frac{\pi}{2}} = 
\begin{bmatrix}
0 & 1 \\
-1 & 0 \\
\end{bmatrix}$$
> 
> - 표준기저벡터 $e_1$을 $\theta$만큼 회전한 벡터: $(\cos \theta, \sin \theta)$
> - 표준기저벡터 $e_2$를 $\theta$만큼 회전한 벡터: $(-\sin \theta, \cos \theta)$
> 
> 각 $\theta$에 대한 회전 변환행렬:
> 
> $$R_\theta =
\begin{bmatrix}
\cos \theta & -\sin \theta \\
\sin \theta & \cos \theta \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md#122-회전-변환행렬)

# 12.3. 전단 변환행렬
### 선요약

> - 전단 변환행렬(Shear transformation matrix): 표준기저벡터 $e_1$을 고정한 상태에서 표준기저벡터 $e_2$를 $x$축 방향으로 미는 변환처럼 대각선으로 밀리는 형태의 변환 행렬
> - 표준기저벡터 $e_1$의 변환 결과: $(1, 0)$ (변화 없음)
> - 표준기저벡터 $e_2$의 변환 결과: $(1, 1)$
> 
> 표준기저벡터 $e_2$를 $x$축 방향으로 1만큼 밀어내는 전단 변환행렬:
> 
> $$S = 
\begin{bmatrix}
1 & 1 \\
0 & 1 \\
\end{bmatrix}$$
> 
> 전단 변환에서 미는 크기는 1행 2열에 위치한 원소 값을 변경해 조절이 가능하다     
> $x$축 방향으로 $a$만큼 민다면 각 표준기저벡터 $e_1$과 $e_2$는 다음과 같이 변환된다
> - 표준기저벡터 $e_1$의 변환 결과: $(1, 0)$ (변화 없음)
> - 표준기저벡터 $e_2$의 변환 결과: $(a, 1)$
> 
> $x$축 방향으로 $a$만큼 미는 전단 변환행렬:
> 
> $$S = 
\begin{bmatrix}
1 & a \\
0 & 1 \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md#123-전단-변환행렬)

# 12.4. 삼각함수의 덧셈 정리
### 선요약

> 삼각함수를 응용할 때 유용하게 사용되는 삼각함수의 덧셈:
> - $\cos(\alpha + \beta) = \cos \alpha \cos \beta - \sin \alpha \sin \beta$
> - $\sin(\alpha + \beta) = \sin \alpha \cos \beta + \cos \alpha \sin \beta$
> 
> 회전행렬의 원리를 사용해 덧셈 정리를 유도할 수 있다     
> 회전 변환에 사용하는 두 각 $\alpha$와 $\beta$가 있을 때, 이 둘을 합한 $\alpha + \beta$ 만큼 회전한 변환은 두 각에 대한 회전 변환을 순서대로 적용한 결과와 동일하다      
> 각 $\alpha$에 대한 회전 변환행렬과 각 $\beta$에 대한 회전 변환행렬을 행렬 곱하면 삼각함수의 덧셈 정리를 얻을 수 있다
> 
> 삼각함수의 배각 공식: 삼각함수의 덧셈 정리를 응용한 삼각함수의 배각 공식은 각 $\beta$ 대신 $\alpha$를 대입해 얻을 수 있다
> - $\cos 2 \alpha = \cos(\alpha + \alpha)$       
> $\qquad = \cos^2\alpha - \sin^2\alpha$      
> $\qquad = 1 - 2\sin^2\alpha$
> - $\sin 2 \alpha = \sin(\alpha + \alpha)$     
> $\qquad = 2 \sin \alpha \cos \alpha$

* * *

[본문](/README-ORIGIN.md#124-삼각함수의-덧셈-정리)

# 13. 역행렬
### 선요약

> - 항등행렬(Indentity matrix): 항등행렬은 원 공간의 변화없이 동일한 공간으로 유지하는 변환을 의미      
> 항등행렬은 $I$로 표기한다       
> 
> $$I = 
\begin{bmatrix}
1 & 0 \\
0 & 1 \\
\end{bmatrix}$$
> 
> - 역행렬(Inverse matrix): 행렬 곱의 결과가 항등행렬이 나오는 특별한 행렬   
> 벡터 공간 $V$가 선형 변환된 벡터 공간 $W$에서 원 벡터 공간 $V$로 되돌리는 선형 변환이라고 해석할 수 있다            
> 역함수와 동일하게 위 첨자 $^{-1}$을 사용해 표시하며 임의의 행렬을 $A$라고 했을 때  다음의 수식이 성립한다      
> 
> $$A \cdot A^{-1} = A^{-1} \cdot A = I$$

* * *

[본문](/README-ORIGIN.md#13-역행렬)

# 13.1. 역행렬의 존재를 판별하는 행렬식
### 선요약

> - 어떤 함수가 역함수를 갖기 위한 조건: 전단사함수여야한다       
> 행렬도 함수이므로 두 공간의 변환이 전단사로 대응될 때만 역행렬이 존재함
> - 행렬식(Determination): 어떤 행렬에 대해 역행렬이 존재하는지 파악할 수 있는 특별한 수식        
> 행렬식은 $det()$의 기호로 표시하며, 일반적인 $2 \times 2$ 정방행렬 $A$의 행렬식은 다음과 같이 계산한다      
> 
> $$A = 
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix}$$
> 
> $$det(A) = ad - bc$$
> 
> 행렬식 $det(A)$의 값이 0인 선형 변환은 전단사 대응이 성립하지 않아 역행렬이 존재하지 않는다     
> 행렬식의 값이 0인 경우, 공간적으로 행렬 $A$의 두 기저벡터의 기울기가 같아지며 2차원의 평면 영역이 1차원의 직선 영역으로 압축됐다고 볼 수 있다(두 기저벡터가 선형종속이다)
> 
> 차원이 줄어들어 원 공간의 정보가 소멸되면, 거꾸로 벡터 공간 $W$에서 벡터 공간 $V$로 변환되는 것은 불가능하다        
> 따라서 역행렬이 존재할 수 없다
> 
> 행렬식 값이 음수가 나오는 경우 평면이 뒤집혔다고 해석할 수 있다

* * *

[본문](/README-ORIGIN.md#131-역행렬의-존재를-판별하는-행렬식)

# 13.2. 크기 변환행렬의 역행렬
### 선요약

> - 크기 변환행렬의 역행렬: 변화된 크기만큼 거꾸로 크기를 변화시키는 방법으로 구할 수 있다        
> 크기 변환에 사용한 두 원소의 역수를 사용해 크기 변환을 설계하면 변환된 두 기저벡터는 다시 표준기저벡터로 돌아온다
> 
> 원 공간에서 $x$축을 $a$배, $y$축을 $b$배만큼 크기를 변화시킨 크기 변환행렬 $S$의 역행렬 $S^{-1}$는 다음과 같이 $a$와 $b$의 역수를 대입해 구할 수 있다
> 
> $$S^{-1} = 
\begin{bmatrix}
\frac{1}{a} & 0 \\
0 & \frac{1}{b} \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md#132-크기-변환행렬의-역행렬)

# 13.3. 전단 변환행렬의 역행렬
### 선요약

> - 전단 변환행렬의 역행렬: 표준기저벡터 $e_1$을 고정한 상태에서 민 방향의 반대 방향으로 밀면 밀린 공간은 원래대로 돌아온다       
> 
> 원 공간에서 $x$축으로 $a$만큼 민 전단 변환행렬 $S$의 역행렬 $S^{-1}$는 $a$의 반대수를 대입해 다음과 같이 구한다
> 
> $$S^{-1} = 
\begin{bmatrix}
1 & -a \\
0 & 1 \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md#133-전단-변환행렬의-역행렬)

# 13.4. 회전 변환행렬의 역행렬
### 선요약

> - 회전 변환행렬의 역행렬: 회전각 $\theta$에 대한 회전 변환행렬의 역행렬은 반대방향의 회전각 $-\theta$에 대한 회전 변환을 의미한다
> 
> $$R_{\theta}^{-1} = R_{(-\theta)}$$
> 
> $\sin$ 함수와 $\cos$ 함수의 성질:
> 
> $$\cos(-\theta) = \cos(\theta)$$
> 
> $$\sin(-\theta) = -\sin(\theta)$$
> 
> 이를 활용하면 회전행렬의 역행렬은 다음과 같이 정리할 수 있다
> 
> $$R_{\theta}^{-1} = R_{(-\theta)} = 
\begin{bmatrix}
\cos \theta & \sin \theta \\
-\sin \theta & \cos \theta \\
\end{bmatrix}$$
> 
> 역행렬에서 부호가 변하지 않는 $\cos$ 함수는 대각선 영역에만 위치하므로 회전행렬과 이것의 역행렬은 서로 전치 관게에 있다
> 
> $$R_\theta = 
\begin{bmatrix}
\cos \theta & -\sin \theta \\
\sin \theta & \cos \theta \\
\end{bmatrix}$$
> 
> $$R_{\theta}^{-1} = 
\begin{bmatrix}
\cos \theta & \sin \theta \\
-\sin \theta & \cos \theta \\
\end{bmatrix}$$
> 
> 따라서 회전행렬의 역행렬은 별도로 삼각함수를 사용하지 않아도 기존 행렬에 전치연산을 적용하는 방법으로 쉽게 구할 수 있다
> 
> $$R_\theta^{-1} = R_\theta^T$$

* * *

[본문](/README-ORIGIN.md#134-회전-변환행렬의-역행렬)

# 13.5. 행렬 곱의 역행렬
### 선요약

> 합성함수에 해당하는 두 행렬 곱의 역행렬은 다음의 수식이 성립한다
> 
> $$(A \cdot B)^{-1} = B^{-1} \cdot A^{-1}$$

* * *

[본문](/README-ORIGIN.md#135-행렬-곱의-역행렬)

# 14. 이동 변환을 위한 아핀 공간
### 선요약

> - 이동 선형 변환: $2 \times 2$ 정방 행렬의 곱셈으로는 2차원 평면에서의 이동을 구현할 수 없다        
> 임의의 벡터 $(x, y)$를 지정한 크기 $(a, b)$만큼 이동시키는 기능은 행렬의 덧셈으로 구할 수 있다
> 
> $$
\begin{bmatrix}
x \\
y \\
\end{bmatrix} + 
\begin{bmatrix}
a \\
b \\
\end{bmatrix} =
\begin{bmatrix}
x + a \\
y + b \\
\end{bmatrix}$$
> 
> 하지만 다음의 행렬 곱을 만족하는 정방행렬 $A$는 존재하지 않는다
> 
> $$A \cdot 
\begin{bmatrix}
x \\
y \\
\end{bmatrix} =
\begin{bmatrix}
x + a \\
y + b \\
\end{bmatrix}$$
> 
> 표준기저벡터의 원점을 이동시키는 변환이 행렬이 되기 위해서는 선형성을 만족해야 하는데, 선형성이 되기 위해서는 기저벡터는 원점에서부터 출발해야 한다는 조건을 만족해야 한다
> 
> 공간의 차원을 하나 더 늘린다면 이를 구현하는 것이 가능하다      
> 물체를 표현하는데 두 개의 차원을 사용하고, 차원 하나를 더 추가해 선형 변환을 위한 원점과의 연결고리로 활용한다면 선형 변환의 형태로 이동을 구현할 수 있다
> 
> 2차원 이동 변환을 구현하기 위해 차원을 한 개 늘리고 마지막 차원 $z$의 값을 1로 조건을 고정한 전단 변환을 설계하면 다음과 같다
> 
> $$
\begin{bmatrix}
1 & 0 & a \\
0 & 1 & b \\
0 & 0 & 1 \\
\end{bmatrix} \cdot 
\begin{bmatrix}
x \\
y \\
1 \\
\end{bmatrix} =
\begin{bmatrix}
x + a \\
y + b \\
1 \\
\end{bmatrix}$$
> 
> 이는 $z = 1$의 조건에서 임의의 벡터 $(x, y)$를 지정한 크기 $(a, b)$만큼 이동시키는 2차원의 이동 변환을 만든다
> 
> - 이동 변환행렬(Translate transformation matrix): 마지막 차원의 값이 1이라는 특정 조건을 가지는 전단 변환을 활용한 이동 기능 행렬
> 
> $$T = 
\begin{bmatrix}
1 & 0 & a \\
0 & 1 & b \\
0 & 0 & 1 \\
\end{bmatrix}$$
> 
> - 아핀 공간(Affine space): 벡터 공간에서 이동을 위해 마지막 차원 값을 1로 한정한 부분 공간
> - 아핀 변환(Affine transformation): 행렬 곱의 장점을 살리기 위해 한 차원을 높여 설계한 선형 변환        
> 
> 임의의 벡터 $(x, y, 1)$과 아핀 변환행렬의 결과는 아핀 공간에 닫혀 있다

* * *

[본문](/README-ORIGIN.md#14-이동-변환을-위한-아핀-공간)

# 15. 아핀 공간의 구성 요소
### 선요약

> 이동 기능을 아핀 변환으로 구현해야 하는 이유: 행렬 곱의 장점을 활용하기 위해서
> 
> 아핀 공간에 속한 물체의 마지막 차원 값은 언제나 1이 되어야 한다

* * *

[본문](/README-ORIGIN.md#15-아핀-공간의-구성-요소)

# 15.1. 점
### 선요약

> - 아핀 공간의 점(Point): 마지막 차원 값이 1인 아핀 공간의 원소      
> 행렬 곱을 사용해 이동이 가능하다        
> 가상 공간이 이동하려면 물체는 점으로 구성되어야 한다        
> 2차원 공간에서 점은 항상 $(x, y, 1)$의 형태여야 한다

* * *

[본문](/README-ORIGIN.md#151-점)

# 15.2. 이동 벡터
### 선요약

> - 아핀 공간의 벡터(변위 벡터 / Displacement vector): 벡터는 아핀 공간 내의 이동을 지정하기 위해 사용됨       
> 아핀 공간의 점 $P_1, P_2$와 이동 벡터 $\vec{v}$에 대해 다음의 식이 성립한다     
> $P_1 + \vec{v} = P_2$, $\vec{v} = P_2 - P_1$, $P_1 - P_2 = -\vec{v}$        
> 점 $P_1$의 좌표를 $(x_1, y_1, 1)$로 $P_2$의 좌표를 $(x_2, y_2, 1)$로 지정할 때 두 점을 빼서 만든 이동 벡터의 마지막 차원 값은 $x, y$값과 무관하게 항상 0이 된다     
> $(x_1 - x_2, y_1 - y_2, 0)$     
> 따라서 이동 벡터들이 모이면 마지막 차원 $z$의 값이 항상 0인 영역을 형성한다

* * *

[본문](/README-ORIGIN.md#152-이동-벡터)

# 15.3. 아핀 공간의 성질
### 선요약

> - 아핀 공간의 원점 $O$: $(0, 0, 1)$
> - 아핀 공간에 속한 임의의 점 $P$로 향하는 이동벡터 $\vec{v}$: $\vec{v} = P - O = (x, y, 1) - (0, 0, 1) = (x, y, 0)$
> 
> 점과 벡터의 덧셈 연산은 아핀 공간에 대해 닫혀 있다      
> 따라서 점과 이동 벡터를 구분하는 마지막 차원값을 생략해도 2차원 평면에서 아핀 공간의 점을 점으로, 이동 벡터를 화살표로 표시하면 둘을 구분할 수 있다
> 
> - 유클리드 공간(Euclidean space): 물리적인 관점에서 바라본 현실 세계의 3차원 공간       
> - 유클리드 벡터(Euclidean vector): 유클리드 공간에서 작용하는 힘        
> 이에 대응되는 개념이 각각 아핀 공간과 이동 벡터다
> 
> - 점: 물체를 표현하고 위치를 지정하는 데 사용한다. 마지막 차원의 값은 항상 1이다
> - 이동 벡터(이하 벡터): 물체를 움직이는 데 사용한다. 마지막 차원의 값은 항상 0이다
> 
> 점과 벡터의 마지막 차원 값을 토대로 두 요소 사이에는 다음과 같은 연산 규칙이 성립된다       
> 이때 점과 점을 더하는 수식은 성립하지 않는데, 점과 점을 더하면 마지막 차원 값이 2가 되어 아핀 공간 영영을 벗어나기 때문이다
> 
> - $점 - 점 = 벡터$ (예: $1 - 1 = 0$)
> - $점 + 벡터 = 점$ (예: $1 + 0 - 1$)
> - $벡터 + 벡터 = 벡터$ (예: $0 + 0 = 0$)
> - $점 + 점 \neq 점$ (예: $1 + 1 \neq 1$)

* * *

[본문](/README-ORIGIN.md#153-아핀-공간의-성질)

# 16. 아핀 결합
### 선요약

> 일반적으로 아핀 공간을 다룰 때 점과 점을 더한 결과는 사용할 수 없다     
> 점과 점을 더할 때 그대로 더하는 것이 아닌 선형 결합의 형태로 점에 스칼라(계수)를 곱해 더한다면, 특정 조건에서 새로운 점을 생성하는 것이 가능하다
> 
> 2차원 평면상 임의의 두 점의 선형 결합의 식:
> 
> $$a \cdot P_1 + b \cdot P_2 = (ax_1 + bx_2, ay_1 + by_2, a + b)$$
> 
> 두 점의 선형 결합 결과가 언제나 점이 되려면 마지막 차원 값 $a + b$가 1이 되어야 한다        
> $x$와 $y$ 값과 무관하게 $a + b = 1$의 조건을 유지한다면 점과 점을 결합해 새로운 점을 만들 수 있다       
> 세 점에 대해서도 동일한 원리가 적용된다
> 
> - 아핀 결합(Affine combination): 여러 개의 점을 결합해 새로운 점을 생성하는 수식

* * *

[본문](/README-ORIGIN.md#16-아핀-결합)

# 16.1. 두 점의 결합
### 선요약

> 두 점의 아핀 결합이 성립하려면 점에 곱한 두 스칼라의 합이 $a + b = 1$을 만족해야 하는데, $b$를 $1 - a$로 치환하면 계수 $a$에 대한 식을 얻게 되며 이는 언제나 점의 생성을 보장한다       
> 
> 아핀 결합으로 생성된 점 $P'$의 수식:
> 
> $$a \cdot P_1 + (1 - a) \cdot P_2 = P'$$
> 
> 스칼라 $a$ 값의 변화에 따라 생성되는 점:
> 
> $$1 \cdot P_1 + 0 \cdot (x_2, y_2, 1) = P_1$$
> 
> $$0 \cdot (x_1, y_1, 1) + P_2 = P_2$$
> 
> $$\frac{1}{2} \cdot (x_1, y_1, 1) + \frac{1}{2} \cdot (x_2, y_2, 1) = (\frac{x_1 + x_2}{2}, \frac{y_1 + y_2}{2}, 1)$$
> 
> 두 점 $P_1$과 $P_2$의 아핀 결합을 통해 새로운 점을 생성하면, $a$ 값이 양의 방향으로 커질수록 $P_1$의 바깥쪽 방향에 점이 생성되고, $a$ 값이 음의 방향으로 커질수록 $P_2$의 바깥쪽 방향에 점이 생성된다       
> 이러한 점을 모두 모으면 두 점 $P_1$과 $P_2$를 지나는 무한한 긴 선이 만들어진다
> 
> 아핀 결합으로 생성되는 점의 수식에 모든 실수 $a$를 대입하면 두 점을 이은 양 끝으로 무한히 뻗은 선을 얻을 수 있다        
> 이 수식을 직선의 방정식이라고 한다
> 
> 직선의 방정식:
> 
> $$L(a) = a \cdot P_1 + (1 - a) \cdot P_2$$
> 
> $a$의 범위에 따른 선의 종류:
> 
> |종류|범위|설명|
> |---|---|---|
> |직선(Line)|$-\infty < a < \infty$|두 점의 양쪽 방향으로 무한히 뻗어나가는 선의 형태. 추상적인 선의 성질을 표현할 때 사용한다.|
> |반직선(Ray)|$0 \leq a \leq \infty$|지정한 위치에서 한쪽 방향으로만 뻗어나가는 선을 뜻한다. 게임 제작에서 전방에 물체가 있는지 탐지하기 위해 사용하는 기능에 레이캐스팅(Raycasting)이 있다.|
> |선분(Line segment)|$0 \leq a \leq 1$|시작점과 끝점의 위치가 정해져 있는 선을 말한다. 프로그래밍을 활용해 화면에 선을 그리기 위해선 무한이라는 추상적인 개념을 배제하고 명확하게 시작점과 끝점을 정해주어 선분의 형태로 정보가 제공되어야 한다.|

* * *

[본문](/README-ORIGIN.md#161-두-점의-결합)

# 17. 벡터의 내적
### 선요약

> - 내적(Dot product): 같은 차원의 두 벡터가 주어졌을 때, 벡터를 구성하는 각 성분을 곱한 후 이들을 더해 스칼라를 만들어내는 연산      
> 내적은 곱셈 기호와 동일한 가운뎃점($\cdot$)을 사용한다
> 
> $$\vec{u} = (a, b)$$
> 
> $$\vec{v} = (c, d)$$
> 
> $$\vec{u} \cdot \vec{v} = a \cdot c + b \cdot d$$

* * *

[본문](/README-ORIGIN.md#17-벡터의-내적)

# 17.1. 내적의 성질
### 선요약

> 내적의 연산 법칙 성립:
> 
> |법칙|성립 여부|이유|
> |---|---|---|
> |교환법칙|O|내적은 스칼라의 곱셈과 덧셈으로 구성되어 있음|
> |결합법칙|X|내적의 결과가 벡터가 아닌 스칼라로 나오기 때문에 성립하지 않음|
> |분배법칙|O|덧셈에 대한 분배법칙이 성립함|
> 
> 같은 벡터의 내적: 벡터의 크기를 제곱한 결과가 나온다        
> 이 내적의 성질은 모든 차원의 벡터에 동일하게 적용된다
> 
> $$(x, y) \cdot (x, y) = x^2 + y^2$$
> 
> $$\therefore \vec{v} \cdot \vec{v} = |\vec{v}|^2$$

* * *

[본문](/README-ORIGIN.md#171-내적의-성질)

# 17.2. 내적과 삼각함수의 관계
### 선요약

> - 벡터의 내적 특징: 두 벡터의 사잇각에 대한 $\cos$ 함수와 비례한다
> 
> $$\vec{u} \cdot \vec{v} = |\vec{u}||\vec{v}| \cos \theta$$
> 
> 내적의 성질은 덧셈과 곱셈만 사용해 $\cos$ 함수 값을 빠르게 계산할 수 있어 유용하게 활용된다     
> 위 식에서 영벡터가 아닌 경우, 내적 값이 0이 되기 위한 조건은 $\cos$ 함수 값이 0이 되는 경우뿐인데, 이는 두 벡터의 사잇각이 $90^\circ$ 혹은 $270(-90^\circ)$처럼 두 벡터가 서로 직교하는 경우다
> 
> 따라서 두 벡터의 내적이 0이면 두 벡터는 직교한다고 결론내릴 수 있으며 이는 두 벡터의 직교성을 판별하는 데 활용된다

* * *

[본문](/README-ORIGIN.md#172-내적과-삼각함수의-관계)

# 17.3. 행렬의 곱셈을 내적으로 표현하기
### 선요약

> 행렬과 벡터의 곱셈은 행렬을 구성하는 두 개의 행벡터 $(a, b), (c, d)$와 벡터를 구성하는 열벡터 $(x, y)$의 내적으로 표현할 수 있다
> 
> $$
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
\end{bmatrix} =
\begin{bmatrix}
ax + by \\
cx + dy \\
\end{bmatrix} =
\begin{bmatrix}
(a, b) \cdot (x, y) \\
(c, d) \cdot (x, y) \\
\end{bmatrix}$$
> 
> 행렬의 곱셈 또한 벡터의 내적으로 바꿔 표현할 수 있다
> 
> $$
\begin{bmatrix}
a & b \\
c & d \\
\end{bmatrix}
\begin{bmatrix}
e & f \\
g & h \\
\end{bmatrix} =
\begin{bmatrix}
ae + bg & af + bh \\
ce + dg & cf + dh \\
\end{bmatrix} =
\begin{bmatrix}
(a, b) \cdot (e, g) & (a, b) \cdot (f, h) \\
(c, d) \cdot (e, g) & (c, d) \cdot (f, h) \\
\end{bmatrix}$$
> 
> - 직교행렬(Orthogonal matrix): 정방행렬을 구성하는 모든 행벡터와 열벡터의 크기가 1이고 벡터들이 서로 직교하는 행렬      
> $a, b, c, d$로 구성된 직교행렬을 $Q$로 지정하면 열벡터와 행벡터를 구성하는 $(a, b), (b, d), (a, c), (c, d)$의 크기는 1이고 $(a, b)$와 $(c, d)$는 서로 직교한다      
> 
> $$Q = 
\begin{bmatrix}
a & c \\
b & d \\
\end{bmatrix}$$
> 
> 직교행렬의 전치행렬은 역행렬이 된다     
> 때문에 직교행렬 $Q$와 이의 전치행렬 $Q^T$의 곱은 항등행렬이 된다
> 
> $$Q \cdot Q^T = I$$
> 
> - 강체 변환(Rigid Transformation): 물체의 형태가 그대로 유지되는 선형 변환
> 
> 강체 변환 조건:
> 1. 변환된 기저벡터의 크기는 모두 1이어야 한다
> 2. 모든 기저벡터는 서로 직교해야 한다
> 3. 행렬식 값이 1이어야 한다

* * *

[본문](/README-ORIGIN.md/#173-행렬의-곱셈을-내적으로-표현하기)

# 18. 시야 판별
# 18.1. 앞뒤 판별
### 선요약

> - 목표물의 앞뒤 판별: 내적의 부호를 통해 파악할 수 있다
> 
> 벡터 내적의 부호는 $\cos$ 함수가 결정한다       
> $\cos$ 함수는 $(-90^\circ, 90^\circ)$ 영역에 대해 양의 부호를 가지고 $-90^\circ$와 $90^\circ$에서는 0, 나머지 범위에서는 음의 부호를 가진다     
> 따라서 벡터 내적의 부호는 두 벡터가 이루는 사잇각의 범위에 따라 결정된다
> 
> - 벡터 내적의 결과가 양수: 두 벡터는 같은 방향을 향하고 있다
> - 벡터 내적의 결과가 음수: 두 벡터는 다른 방향을 향하고 있다        
> 벡터는 위치의 개념이 없으므로 두 벡터는 서로 마주보고 있다로도 해석할 수 있다
> - 벡터 내적의 결과가 0: 두 벡터는 서로 직교한다
> 
> 캐릭터가 바라보는 방향을 시선 벡터 $\vec{f}$로 설정하고 목표물의 위치에서 캐릭터의 위치를 빼서 캐릭터에서 목표물로 향하는 벡터 $\vec{v}$를 설정하면 둘의 상관 관계는 아래와 같다
> 
> - $\vec{f} \cdot \vec{v}$ 결과의 부호가 양수: 캐릭터 앞에 목표물이 있다
> - $\vec{f} \cdot \vec{v}$ 결과의 부호가 음쉬: 캐릭터 뒤에 목표물이 있다
> - $\vec{f} \cdot \vec{v}$ 결과가 0: 캐릭터 바로 옆에 목표물이 있다

* * *

[본문](/README-ORIGIN.md/#181-앞뒤-판별)

# 18.2. 시야 판별
### 선요약

> - 시야각: 캐릭터에 부여한 시야각이 $\beta$라면 양쪽으로 균등하게 $\frac{\beta}{2}$의 시야각이 설정된다
> 
> 내적으로 캐릭터의 시야에 목표물이 탐지되는지는 사잇각 $a$가 시야각의 절반인 $\frac{\beta}{2}$보다 작거나 같은지 비교하여 알 수 있다
> 
> 1. 시야각을 절반 나눈 각의 $\cos\frac{\beta}{2}$를 미리 계산해둔다
> 2. 캐릭터의 시선 벡터를 구하고 이의 크기를 1로 정규화시킨다     
> 이를 단위 벡터 $\hat{f}$로 지정한다
> 3. 캐릭터에서 목표물로 향하는 벡터를 정규화한다     
> 이를 단위 벡터 $\hat{v}$로 지정한다
> 4. 내적 $\hat{f} \cdot \hat{v}$의 계산 결과는 $\cos a$가 된다       
> 이를 앞서 계산해 둔 $\cos \frac{\beta}{2}$ 값과 비교한다
> 
> - $\hat{f} \cdot \hat{v} \geq \cos\frac{\beta}{2}$: 목표물이 시야 범위 안에 있음
> - $\hat{f} \cdot \hat{v} < \cos\frac{\beta}{2}$: 목표물이 시야 범위 밖에 있음
> 
> $atan2$ 함수를 활용해 두 벡터가 이루는 각 $a$를 구한 후 이를 $\frac{\beta}{2}$와 비교해도 동일한 결과를 얻을 수 있지만 단위 벡터를 구한 후 내적을 계산하는 방식이 더 효율적이다

* * *

[본문](/README-ORIGIN.md/#182-시야-판별)

# 19. 조명 효과의 구현
### 선요약

> - 램버트 반사(Lambertian reflection): 현실 세계와 비슷한 조명 효과를 만들기 위해 고안된 방법        
> 컴퓨터 그래픽스에서 표면에서의 조명 모델 계산을 위해 쓰인다     
> 램버트 반사 모델은 계산량이 적어 속도가 빠르지만 그럴듯한 조명 효과를 줄 수 있어 실시간 조명 구현이 필요한 게임 제작에 널리 사용된다        
> 빛을 받아 표면에서 반사되는 빛의 세기는 두 벡터가 만드는 사잇각의 $\cos$ 함수에 비례한다        
> 표면이 향하는 단위 벡터를 $\hat{N}$으로 지정하고 표면에서 광원으로 향하는 단위 벡터를 $\hat{L}$로 지정하여 두 벡터의 내적을 사용하면 램버트 반사 모델에 필요한 사잇각의 $\cos$ 값을 얻을 수 있다
> 
> $$\hat{N} \cdot \hat{L} = \cos \theta$$

* * *

[본문](/README-ORIGIN.md/#19-조명-효과의-구현)

# 20. 투영 벡터
### 선요약

> 벡터 내적은 어떤 벡터를 다른 벡터에 직교 투영하는 용도로 사용된다       
> 예를 들어 카메라가 만드는 공간을 분석할 때 카메라와 물체 사이의 거리 외에도 카메라에서 물체까지의 깊이 값이 필요한 경우가 있는데, 이 경우 내적을 활용한 투영 벡터를 구하는 공식이 활용된다
> 
> 투영한 벡터 $\vec{v'}$의 크기를 알고 있다면 $\vec{v}$를 정규화시킨 단위 벡터 $\hat{v}$를 구하고 그 크기를 곱하여 투영된 벡터를 얻을 수 있다
> 
> $$\vec{v'} = |\vec{v'}| \cdot \hat{v}$$
> 
> 내적을 활용해 $\vec{u}$로부터 $\vec{v'}$를 구할 수 있다
> 
> $$\vec{v'} = \frac{(\vec{u} \cdot \vec{v})}{(\vec{v} \cdot \vec{v})} \cdot \vec{v}$$

* * *

[본문](/README-ORIGIN.md/#20-투영-벡터)

# 21. 세 점의 결합
### 선요약

> 아핀 결합식에 사용하는 스칼라(계수) 값의 범위에 따라 직선, 반직선, 선분 등 다양한 종류의 선을 만들 수 있다      
> 세 점 $P_1, P_2, P_3$를 결합하는 경우 스칼라는 2개에서 3개로 늘어나고 세 스칼라의 합은 1이 되어야 하므로 아핀 결합 식은 다음과 같이 전개된다
> 
> $$P' = s \cdot P_1 + t \cdot P_2 + (1 - s - t) \cdot P_3$$
> 
> 점에서 점을 빼는 수식으로 바꿔 전개하면 다음과 같다
> 
> $$(P' - P_3) = s(P_1 - P_3) + t(P_2 - P_3)$$
> 
> 각 괄호를 $\vec{u}, \vec{v}, \vec{w}$의 벡터로 치환하면 다음과 같이 벡터로 구성된 수식이 만들어진다
> 
> $$\vec{w} = s \cdot \vec{u} + t \cdot \vec{v}$$
> 
> 벡터 $\vec{u}$와 $\vec{v}$가 서로 선형 독립의 관계라면 벡터 $\vec{w}$는 2차원 벡터 공간 $R^2$에 존재하는 모든 벡터를 생성할 수 있다     
> 따라서 세 점의 아핀 결합은 평면의 모든 점을 만들어낸다
> 
> 선분이 만들어지는 조건과 동일하게 $s$와 $t$의 값을 $|0, 1|$ 범위로 고정시키고 스칼라 $s$와 $t$의 값을 몇 가지 지정하면 해당 영역은 삼각형이 된다
> 
> 아핀 결합식에서 스칼라 값을 $|0, 1|$ 범위로 제한하면 시작과 끝의 범위가 명확해지므로 선분과 동일하게 그릴 수 있는 도형이 만들어진다
> 
> - 컨벡스 결합(Convex combination): 아핀 결합에서 모든 스칼라 값을 $|0, 1|$ 범위로 한정한 결합       
> 컨벡스 결합은 아핀 결합식에 각 스칼라의 범위를 $|0, 1|$로 제한하는 조건을 추가해 다음과 같이 표현할 수 있다다
> 
> $$\sum^{n}_{i=0} c_i \cdot P_i \qquad (s.t. \quad \sum^{n}_{i=0} c_i = 1, 0 \geq c_i \geq 1)$$
> 
> - 컨벡스 영역(Convex region): 선분이나 삼각형처럼 컨벡스 결합으로 만든 영역     
> 컨벡스의 사전적 의미는 '볼록한'을 뜻한다        
> 수학에서 정의한 '볼록함'이란, 영역 내 임의의 두 점을 연결한 선분을 만들었을 때 그 선분은 언제나 해당 컨벡스 영역 안에 속하는 성질을 의미한다
> - 컨케이브(Concave): 컨벡스의 반대되는 오목한 모양      
> 컨케이브 영역은 임의의 두 점을 이은 선분이 영역 밖으로 벗어나는 경우가 발생한다
> 
> 컨벡스 결합으로 만들어지는 1차원의 선분, 2차원의 삼각형, 3차원의 삼각뿔 중에서 가상 공간의 물체를 표현하는 데 가장 적합한 도형은 삼각형이다     
> 삼각형으로는 2차원의 물체를 효과적으로 표현할 수 있으며, 3차원 물체도 표면만을 다루기 때문에 삼각형만으로 표현하는 것이 가장 효과적이다

* * *

[본문](/README-ORIGIN.md/#21-세-점의-결합)

# 22. 메시
### 선요약

> 3차원 공간의 입체적인 물체는 삼각형을 이어붙여서 표현이 가능하다        
> 
> - 메시(Mesh): 삼각형을 중심으로 물체에 관련된 정보를 기록한 데이터      
> 물체를 표현하기 위해 삼각형 데이터를 체계적으로 읽고 쓰는 방법이다      
> 메시는 다수의 삼각형으로 구성되고, 메시를 이루는 삼각형은 다시 3개의 점으로 구성된다        
> 메시는 다수의 점으로 구성된다고 정리할 수 있다
> - 정점(Vertex): 메시는 삼각형을 이용해 물체의 외형을 표현하기 때문에, 삼각형을 이루는 각 점의 위치를 가지고 있어야 한다     
> 위치 정보만 담지 않고, 물체를 표현하는 데 활용할 수 있는 색상이나 방향과 같은 다양한 부가 정보를 묶은 특별한 점
> - 정점 버퍼(Vertex buffer): 컴퓨터에서 메시를 읽어 물체를 표현할 때에는 메시의 정점 정보를 빠르게 읽기 위해서 메모리에 정점 정보를 일렬로 나열하는 배열의 형태로 관리한다
> - 인덱스 버퍼(Index buffer): 정점 버퍼의 정보만으로는 어떤 세 정점이 모여 삼각형을 구성하는지 알 수 없기 때문에 삼각형을 구성하는 정점의 인덱스(순번)만 기록한 배열을 별도로 만들어 관리한다        
> 인덱스 정보는 삼각형의 수만큼 필요하기 때문에 인덱스 버퍼의 크기는 항상 3의 배수다
> - 와이어프레임(Wireframe): 삼각형의 외곽선만 그려 메시를 표현하는 방법

* * *

[본문](/README-ORIGIN.md/#22-메시)

# 23. 무게중심좌표
### 선요약

> - 무게중심좌표(Barycentric coordinate): 세 점의 아핀 결합에 사용되는 스칼라 $s, t, 1 - s - t$를 묶어 만든 좌표        
> 삼각형에 관련된 정보를 담고 있다

* * *

[본문](/README-ORIGIN.md/#23-무게중심좌표)

# 23.1. 무게중심좌표의 계산
### 선요약

> 세 점의 아핀 결합이 삼각형이 되려면 모든 스칼라의 값이 $|0, 1|$ 범위 내에 있어야 한다       
> 무게중심좌표를 구성하는 스칼라 값이 하나라도 $|0, 1|$ 범위를 벗어난다면 아핀 결합으로 생성된 점은 삼각형 외부에 있다고 할 수 있다       
> 이러한 성질을 활용하면 주어진 점이 삼각형 영역의 내부에 있는지 외부에 있는 판단할 수 있다
> 
> - 퇴화삼각형(Degenerate triangle): 선형 종속의 관계를 이루는 세 점의 결합으로 만들어진 선분     
> 퇴화삼각형이 검출되면 그리기에서 제외한다

* * *

[본문](/README-ORIGIN.md/#231-무게중심좌표의-계산)

# 24. 텍스처 매핑
### 선요약

> - 텍스처(Texture): 메시에 이미지를 입히기 위해 변환된 데이터
> - 텍스처 매핑(Texture mapping): 메시에 이미지를 입히는 작업
> - UV 좌표계: 텍스처를 구성하는 2차원 좌표계     
> 사진이나 그림을 저장한 이미지는 가로와 세로의 픽셀 수에 따른 고유한 해상도를 가지지만, 이미지를 메시에 입히기 위해 텍스처로 변환하면 관리 방식을 통일하기 위해 이미지의 원본 해상도에 관계없이 텍스처의 가로, 세로 크기는 1로 정규화된다        
> 따라서 렌더링 과정에서 텍스처를 사용할 때에는 $|0, 1|$ 범위로 구성된 UV 좌표계를 사용한다       
> UV 좌표계는 2차원 벡터로 구성되며 가로 정보는 U, 세로 정보는 V로 지정된다       
> UV 좌표계가 형성됐다면 텍스처 매핑을 위해 삼각형의 세 정점에 UV 좌표를 추가해야 한다        
> 삼각형을 구성하는 각 픽셀의 무게중심좌표를 계산하고 이를 정점의 UV 좌표와 선형 보간하면 해당 픽셀의 UV 값을 얻어낼 수 있다      
> 이에 대응하는 텍스처의 색상 정보를 얻은 후 이를 최종 픽셀의 색상으로 지정하면 텍스처 매핑이 완성된다

* * *

[본문](/README-ORIGIN.md/#24-텍스처-매핑)

# 25. 3차원 공간의 설계
### 선요약

> - 데카르트 좌표계: 우리가 보는 모니터 화면이 데카르트 좌표계로 표현된다
> - 오른손 좌표계(Right-handed coordinate system): 나머지 한 축이 모니터가 바라보는 방향과 일치하는 체계
> - 왼손 좌표계(Left-handed coordinate system): 나머지 한 축이 모니터 뒤편을 향하는 체계

* * *

[본문](/README-ORIGIN.md/#25-3차원-공간의-설계)

# 26. 3차원 공간의 트랜스폼
### 선요약

> 3차원 공간의 회전 변환은 3차원 공간을 구성하는 세 표준기저벡터가 동일한 크기와 직교성을 유지한 상태로 함께 움직여야 한다        
> 회전 변환으로 달라진 세 표준기저벡터값을 알 수 있다면 이를 열벡터로 꽂아넣어 회전 변환행렬 $R$을 만들어낼 수 있다       
> 하지만 3차원 공간의 회전을 지정한다는 것은 매번 3개의 변화된 표준기저벡터 값을 계산해야 하기 때문에 까다로운 작업이다       
> 따라서 회전을 지정할 때는 일반적으로 회전하는 중심축과 각으로 표현된 회전량을 지정하는 방식을 사용한다      
> 2차원 공간은 하나의 평면만 존재하기 때문에 각으로 회전량을 지정하면 원하는 회전을 설계할 수 있었지만, 3차원 공간은 무수한 많은 평면으로 구성되기 때문에 새로운 방식이 필요하다      
> 3차원 공간의 회전을 표현하는 대표적인 방법엔 오일러 각(Euler's angle)이 있다

* * *

[본문](/README-ORIGIN.md/#26-3차원-공간의-트랜스폼)

# 26.1. 오일러 각
### 선요약

> - 오일러 각(Euler's angle): 3차원 공간에서 물체가 놓인 방향을 3개의 각을 사용해 표시하는 방법       
> 오일러 각은 직관적으로 이해하기 쉽기 때문에 3차원 공간을 사용하는 프로그램에서 자주 사용된다        
> 게임 엔진에서 오일러 각을 사용해 물체의 방향을 표시할 때는 표준기저벡터를 사용한다      
> 그래서 오일러 각은 표준기저벡터를 중심으로 회전하는 각의 크기로 지정된다    
> 세 표준기저벡터를 중심으로 회전하는 각을 모으면 다음의 3차원 벡터로 표현할 수 있다
> 
> $$(\theta_x, \theta_y, \theta_z)$$
> 
> - 오일러 각 범용 사용의 문제: 소프트웨어마다 $x, y, z$축의 용도가 다르기 때문에 $x, y, z$축 대신 회전의 움직임으로 회전 동작을 구분하고 각을 지정하는 방법을 사용한다
> - 요, 롤, 피치(Yaw, Roll, Pitch): 표준기저벡터를 축으로 하는 회전의 움직임

* * *

[본문](/README-ORIGIN.md/#261-오일러-각)

# 26.2. 회전행렬의 유도
### 선요약

> 각 기저 축의 회전행렬을 구했다면, 이를 순서대로 적용해 최종 회전행렬을 만들어야 한다        
> 세 번이 연속적인 회전으로 구성된 오일러 각 회전 방법은 총 6가지의 경우가 발생한다

* * *

[본문](/README-ORIGIN.md/#262-회전행렬의-유도)

# 26.3. 3차원 모델링 행렬
### 선요약

> 3차원 공간의 트랜스폼을 구성하는 크기(S), 회전(R), 이동(T) 변환행렬은 다음과 같다
> 
> $$S = 
\begin{bmatrix}
s_x & 0 & 0 & 0 \\
0 & s_y & 0 & 0 \\
0 & 0 & s_z & 0 \\
0 & 0 & 0 & 1 \\
\end{bmatrix}$$
> 
> $$R = 
\begin{bmatrix}
x_x & y_x & z_x & 0 \\
x_y & y_y & z_y & 0 \\
x_z & y_z & z_z & 0 \\
0 & 0 & 0 & 1 \\
\end{bmatrix}$$
> 
> $$T =
\begin{bmatrix}
1 & 0 & 0 & t_x \\
0 & 1 & 0 & t_y \\
0 & 0 & 1 & t_z \\
0 & 0 & 0 & 1 \\
\end{bmatrix}$$
> 
> 세 행렬을 $TRS$ 연산 순서에 따라 곱해 만든 모델링 행렬 $M$은 다음과 같이 계산된다
> 
> $$M = T \cdot R \cdot S =
\begin{bmatrix}
x_xs_x & y_xs_y & z_xs_z & t_x \\
x_ys_x & y_ys_y & z_ys_z & t_y \\
x_zs_x & y_zs_y & z_zs_z & y_z \\
0 & 0 & 0 & 1 \\
\end{bmatrix}$$
>

* * *

[본문](/README-ORIGIN.md/#263-3차원-모델링-행렬)

# 27. 카메라 공간
### 선요약

> 2차원 카메라를 구현할 때에는 이동 기능만 부여했지만 3차원 공간의 카메라에는 이동과 회전 기능을 함께 부여한다
> 
> - 월드 공간: 원본 3차원 공간
> - 뷰 공간: 월드 공간의 원점에 카메라가 있고, 카메라가 바라보는 방향에 게임 오브젝트가 위치한 상황을 가정했을 때 카메라의 $x$축과 $y$축으로 최종 화면을 생성하면 화면의 $x$축 방향은 익숙한 오른쪽이 아닌 왼쪽을 향하게 된다     
> 이는 보편적으로 인지하는 2차원 데카르트 좌표계와 다르기 때문에 카메라가 만들어내는 화면의 $x$축이 왼쪽을 향하도록 $y$축으로 $180^\circ$ 회전시켜 뷰 공간을 구성한다     
> 뷰 공간의 $z$축은 카메라의 뒤를 향하고, 뷰 공간에서 $x$축과 $z$축은 월드 공간의 $x$축과 $z$축의 반대 방향을 가지게 된다
> - 뷰 행렬: 뷰 공간으로 변환해주는 행렬      
> 카메라에는 크기의 개념이 없기 때문에, 카메라의 트랜스폼은 크기 변환을 제외한 회전과 이동 변환으로만 구성된다    
> 뷰 행렬을 구하기 위해선 카메라의 역행렬을 계산해야 한다     
> 이동 $T$의 역행렬 $T^{-1}$은 덧셈의 역원인 반대수를 사용해 구할 수 있다
> 이동의 역행렬을 적용하면 모든 좌표는 카메라를 중심으로 재배치된다      
> 직교행렬인 회전 변환행렬 $R$의 역행렬 $R^{-1}$은 전치행렬로 구할 수 있다        
> 물체는 가만히 있는데 카메라가 $30^\circ$ 회전하는 상황이라면, 화면을 바라보는 사용자는 마치 물체가 $-30^\circ$ 회전하는 것으로 느낀다       
> 최종 뷰 행렬을 완성하기 위해서 이동의 역행렬을 적용한 후 회전의 역행렬을 적용해야 한다      
> 카메라의 트랜스폼으로부터 얻어지는 모델링 행렬 $M$의 역행렬 $M^{-1}$을 만든다       
> 최종 뷰 좌표계는 $y$축으로 $180^\circ$ 회전한 구조를 가져야 하기 때문에 $x$축 기저와 $z$축 기저를 반전시킨다        
> 반전을 적용한 최종 뷰 행렬 $V$는 다음과 같다
> 
> $$V = R^{-1} \cdot T^{-1} =
\begin{bmatrix}
-x_x & -x_y & -x_z & x \cdot t \\
y_x & y_y & y_z & -y \cdot t \\
-z_x & -z_y & -z_z & z \cdot t \\
0 & 0 & 0 & 1 \\
\end{bmatrix}$$
> 
> 뷰 좌표계에서 카메라 정면에 위치한 모든 물체의 $z$값은 음수다

* * *

[본문](/README-ORIGIN.md/#27-카메라-공간)

# 28. 오일러 각의 특징
### 선요약

> 오일러 각 장점:
> - 오일러 각은 3차원 공간의 회전을 지정할 떄 직관적인 인터페이스를 제공한다         
> - 설정할 값이 세 가지뿐이고, 직관적인 표준기저벡터를 회전축으로 사용하기 때문에 회전을 설계하기가 용이하다    
> - 오일러 각은 적은 용량으로 3차원 공간의 회전 정보를 기록할 수 있다       
> - 행렬을 사용해 3차원 공간의 회전을 표현하려면 최소 9개의 실수 데이터가 필요하지만, 오일러 각은 3개의 데이터만 있으면 3차원 공간의 회전을 표현할 수 있다      
> - 이는 트랜스폼 정보를 줄일 수 있어 적은 용량으로 게임 데이터를 관리할 수 있게 도와준다
>
> 오일러 각 단점:
> - 짐벌락 현상

* * *

[본문](/README-ORIGIN.md/#28-오일러-각의-특징)

# 28.1. 짐벌락 현상
### 선요약

> 짐벌락(Gimbal lock):
> - 오일러 각을 사용해 3차원 공간의 회전을 다룰 때에 특정 상황에서 회전 움직임이 제한되는 현상       
> - 예를 들어 얼굴 모델링을 앞 방향인 $z$축으로 $90^\circ$ 회전시킨다면 얼굴 면이 반시계 방향으로 돌아가는 회전이 발생하고, 우측 방향인 $x$축으로 $-90^\circ$ 회전시켜보면 목을 중심으로 시계 방향으로 돌아가서 위를 바라보게 된다      
> - 마지막으로 위쪽 방향인 $y$축 회전을 적용하면 얼굴 면이 돌아가는 회전이 되는데, 이는 처음 진행한 $z$축의 회전과 동일하다     
> - 결과적으로 $z$축과 $y$축은 얼굴을 돌리는 동일한 회전이 되어버려, 세 개의 축으로 자유롭게 회전하지 못하고 두 개의 축만 회전에 사용된다       
> - 이렇게 회전이 제약되는 현상을 짐벌락이라고 한다

* * *

[본문](/README-ORIGIN.md/#281-짐벌락-현상)

# 28.2. 회전 보간의 계산
### 선요약

> 회전 보간(Rotational interpolation): 
> - 3차원 공간에서 시작 회전과 끝 회전을 지정하고 시간에 따라 두 회전 사이를 부드럽게 전환하는 기능은 카메라의 움직임이나 캐릭터 애니메이션을 구현하는 데 필요하다       
> - 이를 구현하기 위해서 경과된 시간에 따라 회전이 변화되도록 중간 회전 값을 계산하는 작업이 회전 보간이다      
> - 중간 회전 값은 선형 보간의 식을 사용해 얻을 수 있다     
> $\theta' = (1 - t)\theta_{start} + t\theta_{end}$      
> - 선형 보간식이 성립하려면 두 각의 회전 변환을 곱한 결과가 두 각의 합의 회전 변환과 동일해야 한다     
> - 2차원 공간의 회전에서는 두 결과가 동일하기 때문에 2차원 공간의 회전에서 선형 보간식을 사용하는 데 아무런 문제가 없다        
> - 오일러 각에서 한 축만 사용한다는 것은 2차원 평면에서의 회전과 동일하기 때문에 선형 보간식을 사용할 수 있다      
> - 하지만 두 축 이상을 사용하는 오일러 각은 선형 보간식을 사용할 수 없다       
> - 3차원 공간에서 자유로운 회전 보간을 구현하고 싶은 경우에는 로드리게스 회전 공식을 사용하거나 사원수를 사용해야 한다

* * *

[본문](/README-ORIGIN.md/#282-회전-보간의-계산)

# 29. 벡터의 외적
### 선요약

> 외적(Cross product):
> - 내적이 모든 차원의 벡터에 적용할 수 있는 것과 달리 외적은 3차원 공간의 벡터에서만 사용 가능한 연산이다       
> - 3차원 벡터의 외적은 $\times$기호를 사용한다         
> - 외적은 회전의 순환 순서 $x \rightarrow y \rightarrow z \rightarrow x$에 맞춰 벡터를 순서대로 나열하는 형태다
> - 외적의 결과는 언제나 3차원 벡터가 된다      
> - 외적 계산식의 패턴은 $x$ 성분의 결과를 만들기 위해 $x$와 관련없는 나머지 두 성분 $y$와 $z$를 결합해 만들고 나머지 $y$와 $z$를 만들 때도 동일하다      
> - 외적은 교환법칙이 성립하지 않는다     
> 교환법칙이 성립하지 않는 뺄셈을 사용하기 때문이다
> - 뺄셈에서 두 수의 순서를 바꿔 계산하면 반대수가 나오는 것처럼 외적도 순서를 바꿔 연산하면 반대 방향의 벡터가 나온다        
> $a - b = -(b - a)$      
> $\vec{u} \times \vec{v} = -\vec{v} \times \vec{u}$      
> - 외적은 결합법칙이 성립하지 않는다     
> $\vec{u} \times (\vec{v} \times \vec{w}) \neq (\vec{u} \times \vec{v}) \times \vec{w}$      
> - 덧셈에 대한 분배법칙은 성립한다       
> $\vec{u} \times (\vec{v} + \vec{w}) = \vec{u} \times \vec{v} + \vec{u} \times \vec{w}$      

* * *

[본문](/README-ORIGIN.md/#29-벡터의-외적)

# 29.1. 평행성 판별
### 선요약

> 외적의 성질
> - 평행한 두 벡터를 외적하면 항상 영벡터가 된다      
> $\vec{u} \times \vec{u} = (u_yu_z - u_yu_z, u_zu_x - u_zu_x, u_xu_y - u_xu_y) = (0, 0, 0)$      
> $\vec{u} \times -\vec{u} = (-u_yu_z + u_yu_z, -u_zu_x + u_zu_x, -u_xu_y + u_xu_y) = (0, 0, 0)$      
> $\vec{v} = k \cdot \vec{u}, \quad \vec{u} \times \vec{v} = (ku_yu_z - ku_yu_z, ku_zu_x - ku_zu_x, ku_xu_y - ku_xu_y)$       
> 이러한 성질은 평행성을 판별하는 데 사용된다     
> 이는 두 벡터의 직교성을 판별하는 내적의 성질과 대립된다     
> - 외적은 상대방에 직교하는 벡터 성분만 사용된다         
> 벡터 $\vec{u}$를 벡터 $\vec{v}$에 수평인 벡터 $\vec{u_\parallel}$과 수직인 벡터 $\vec{u_\perp}$로 분리하면 벡터 $\vec{u}$는 수평 성분과 수직 성분의 덧셈으로 분리할 수 있다     
> 벡터 $\vec{u}$를 분리한 벡터 $\vec{u_\perp}, \vec{u_\parallel}$와 $\vec{v}$의 외적은 다음과 같이 전개된다       
> $\vec{v} \times \vec{u} = \vec{v} \times (\vec{u_\perp} + \vec{u_\parallel}) = \vec{v} \times \vec{u_\perp} + \vec{v} \times \vec{u_\parallel}$     
> 벡터 $\vec{v}$와 평행한 벡터 $\vec{u_\parallel}$와의 외적은 크기와 관계 없이 영벡터가 된다      
> 따라서 위 식은 다음과 같이 간략하게 정리된다        
> $\vec{v} \times \vec{u} = \vec{v} \times \vec{u_\perp}$
> - 외적의 크기는 $\sin$ 함수에 비례한다      
> 두 벡터의 사잇각을 $\theta$라고 할 때 두 벡터의 사잇각이 큰 직교 성분 $\vec{u_\perp}_\alpha$의 크기는 그보다 사잇각이 작은 직교 성분 $\vec{u_\perp}_\beta$보다 크다     
> 직교 성분 $\vec{u_\perp}$의 크기는 $\sin$ 함수에 비례하므로 외적의 크기도 $\sin$ 함수에 비례하는 것이다     
> $|\vec{u} \times \vec{v}| = |\vec{u}||\vec{v}||\sin \theta|$
> - 외적으로 생성된 벡터의 크기는 행렬식이 만들어내느 넓이와 동일하다

* * *

[본문](/README-ORIGIN.md/#291-평행성-판별)

# 29.2. 법선 벡터
### 선요약

> 벡터 외적은 두 벡터에 직교하는 벡터를 생성한다      
> $\vec{u}$와 $\vec{v}$의 외적 결과에 벡터 $\vec{u}$를 내적하면 결과는 항상 0이 된다
> 
> $$\vec{u} \cdot (\vec{u} \times \vec{v}) = u_xu_yv_z - u_xv_yu_z + u_yu_zv_x - u_yv_zu_x + u_zu_xv_y - u_zv_xu_y = 0$$
> 
> 동일한 방법으로 $\vec{u}$와 $\vec{v}$의 외적 결과에 벡터 $\vec{v}$를 내적해도 0이 나온다        
> 벡터 $\vec{u}, \vec{v}$의 외적 결과는 벡터 $\vec{u}, \vec{v}$에 모두 직교함을 알 수 있다        
> 두 벡터의 외적은 두 벡터가 만드는 평면에 직교하는, 평면이 향하는 방향에 대한 벡터를 만들어내는 것으로 해석할 수 있다
> 
> 법선 벡터(Normal vector)
> - 평면이 향하는 방향을 나타내는 벡터      
> - 3개의 점 $P_1, P_2, P_3$를 결합해 만든 평면을 가정하고, 점 $P_2$와 $P_3$에서 점 $P_1$을 뺀 두 벡터 $\vec{u}$와 $\vec{v}$를 생성한 후 둘을 외적하면 세점이 만들어내는 평면에 직교하는 벡터가 생성된다        
> - 외적은 교환법칙이 성립하지 않기 때문에, 연산의 순서를 바꾸면 원본 연산의 반대 방향으로 향하는 법선 벡터가 생성된다

* * *

[본문](/README-ORIGIN.md/#292-법선-벡터)

# 29.3. 좌우 방향 판별
### 선요약

> 좌우 방향 판별:
> - 월드 공간의 $y$축 $\vec{y} = (0, 1, 0)$에 직교하는 평면에 캐릭터와 물체가 놓여 있고, 캐릭터의 정면을 향하는 시선 벡터 $\vec{f}$와 캐릭터에서 물체로 향하는 벡터 $\vec{v}$가 주어진 상황을 가정한다
> - 물체가 시선 방향의 왼쪽에 있다면 시선 벡터 $\vec{f}$에서 물체로 향하는 벡터 $\vec{v}$로 외적한 결과는 오른손 법칙에 따라 평면의 위쪽인 $\vec{y}$로 향한다
> - 반대로 물체가 시선 방향의 오른쪽에 있다면 외적의 결과는 평면의 아래쪽인 $-\vec{y}$로 향한다
> - 이러한 성질을 활용하면 시선 방향을 기준으로 물체가 왼쪽에 있는지 오른쪽에 있는지를 파악할 수 있다     
> - 외적의 결과는 벡터이므로, 참 거짓을 파악할 수 있도록 스칼라로 변환한다      
> 이를 위해서는 외적의 결과에 내적을 추가로 활용할 수 있다        
> 외적의 결과에 평면의 위쪽 방향을 나타내는 벡터 $\vec{y}$를 내적한다     
> 두 벡터의 방향이 같다면 내적 값은 양수, 반대 방향이라면 음수가 된다     
> 따라서 물체가 캐릭터의 시선 방향 왼쪽에 있다면 내적의 결과는 양수, 오른쪽에 있다면 음수가 된다      
> - 물체가 시선 방향에서 왼쪽에 있는 경우: $(\vec{f} \times \vec{v}) \cdot \vec{y} > 0$
> - 물체가 시선 방향에서 오른쪽에 있는 경우: $(\vec{f} \times \vec{v}) \cdot \vec{y} < 0$
> - 물체가 정확히 시선 방향과 일치하는 경우: $(\vec{f} \times \vec{v}) = 0$

* * *

[본문](/README-ORIGIN.md/#293-좌우-방향-판별)

# 30. 벡터로부터 회전행렬 생성
### 선요약

> 카메라의 회전 설정:
> - 3차원 공간에서 좌우로 기울어지지 않은 카메라가 아래쪽에 위치한 물체를 바라보고 있는 상황을 가정한다
> - 오일러 각 방식을 사용해 카메라의 회전을 지정할 수 있지만, 외적을 사용하면 카메라의 시선 벡터 정보로부터 카메라의 세 가지 로컬 축을 구하고 이로부터 회전행렬까지 얻어낼 수 있다
> - 물체의 위치에서 카메라 위치를 뺀 후 크기를 1로 정규화시킨 시선 벡터 $\vec{v}$를 생성한다      
> 이 벡터는 카메라 트랜스폼의 로컬 $z$축이 된다
> - 카메라의 로컬 $x$축은 업벡터(Up vector)라고도 불리는 월드 공간의 $y$축과 카메라의 로컬 $z$축을 외적하여 얻을 수 있다      
> 월드 공간의 $y$축을 벡터 $\vec{u}$로 표시하고 이를 카메라의 로컬 $z$축과 외적한 후 이를 정규화시키면 카메라의 로컬 $x$축이 구해진다     
> - 로컬 $z$축과 로컬 $x$축을 외적하면 남은 로컬 $y$축을 구할 수 있다     
> 두 벡터가 단위 벡터이므로 외적의 결과도 단위 벡터가 된다
> 
> $$\vec{x} = \frac{\vec{u} \times \vec{z}}{|\vec{u} \times \vec{z}|}$$
> 
> $$\vec{y} = \vec{z} \times \vec{x}$$
> 
> $$\vec{z} = \frac{\vec{v}}{|\vec{v}|}$$
> 
> - 카메라 트랜스폼의 회전행렬 $R$은 로컬 벡터를 열벡터로 지정해 생성할 수 있다
> 
> $$R = 
\begin{bmatrix}
x_x & y_x & z_x & 0 \\
x_y & y_y & z_y & 0 \\
x_z & y_z & z_z & 0 \\
0 & 0 & 0 & 1 \\
\end{bmatrix}$$
> 
> - 예외 상황: 일반적인 상황에서 카메라의 위쪽 방향이 월드 공간의 $y$을 향한다고 가정한다     
> 하지만 카메라가 거꾸로 뒤집혀 있는 상황이라면, 로컬 $x$축을 구하기 위한 업벡터로 월드 공간 $y$축의 반대 방향인 $(0, -1, 0)$을 사용해야 한다

* * *

[본문](/README-ORIGIN.md/#30-벡터로부터-회전행렬-생성)

# 31. 렌더링 계산량을 줄여주는 백페이스 컬링
### 선요약

> 백페이스 컬링(Backface culling): 
> - 카메라와 마주보지 않는 뒷면을 생략하는 기법      
> - 게임은 실시간으로 빠르게 렌더링을 처리해야 하기 때문에 시선에 감지되지 않는 메시(Mesh)의 뒷면(Backface)은 그리지 않고 건너뛰는 것이 효과적이다      
> - 백페이스 컬링은 메시의 삼각형을 구성하는 세 정점의 외적을 활용해 구현할 수 있다       
> - 시계 방향으로 정점이 나열되어 있으면 삼각형이 향하는 방향은 지면의 뒤편을 향하게 되고, 반시계 방향으로 정점이 나열되어 있으면 지면을 향한다
> - 삼각형의 방향과 카메라의 시선 방향을 대조해 서로 마주보면 삼각형을 그리고, 같은 방향을 바라보면 그리기를 생략하는 것이 백페이스 컬링 알고리즘이다

* * *

[본문](/README-ORIGIN.md/#31-렌더링-계산량을-줄여주는-백페이스-컬링)

# 32. 오일러 각의 문제를 해결하는 로드리게스 회전 공식
### 선요약

> 축-각 회전(Axis-Angle rotation):    
> - 임의의 축에 대한 평면의 회전 방식    
> - 3차원 회전을 관리하기 위해 오일러 각을 사용하고 있지만, 오일러 각은 짐벌락 현상이 발생하고, 회전 보간이 어렵다      
> - 축-각 회전은 3차원 공간에서 지정된 임의의 축에 직교하는 평면에 회전이 진행되는 형태로 이 문제를 해결한다
> - 회전축은 회전이 발생하는 평면에 직교하는 법선 벡터다      
> 이를 벡터 $\vec{n}$으로 지정하고 편의를 위해 크기를 1로 정규화시킨다        
> 회전시킬 점을 $P$, 점 $P$가 각 $\theta$만큼 회전한 최종 점을 $P'$으로 표기하고, 월드 공간의 원점을 $O$로, 회전 평면의 중심점을 $O'$으로 지정한다        
> 이때 점 $P$의 좌표는 다음과 같이 설정한다       
> $P = (x, y, z, 1)$
> - 원점 $O$에서부터 회전시킬 점 $P$까지의 벡터를 $\vec{u}$로 지정한다        
> 점 $P$와 벡터 $\vec{u}$의 값은 마지막 차원 값만 다를 뿐 $(x, y, z)$의 값은 동일하다     
> 따라서 구해야할 점 $P'$의 좌표는 벡터 $\vec{u}$를 구한다면 얻을 수 있다     
> $\vec{u} = P - O = (x, y, z, 0)$
> - 임의의 축 $\hat{n}$에 대해 벡터 $\vec{u}$를 각 $\theta$만큼 회전시켜 벡터 $\vec{u'}$를 계산하는 축-각 회전의 공식(로드리게스 회전 공식)은 다음과 같다       
> $\vec{u'} = \cos \theta \cdot \vec{u} + (1 - \cos \theta) \cdot (\vec{u} \cdot \hat{n}) + \sin \theta \cdot (\hat{n} \times \vec{u})$
> 
> 로드리게스 회전 공식의 유도:
> - 원점에서 회전시킬 점으로 향하는 벡터 $\vec{u}$를 평면의 회전축에 해당하는 법선 벡터 $\hat{n}$에 투영한다
> - 벡터 $\vec{u}$가 투영할 벡터 $\hat{n}$의 크기가 1이므로 투영 공식에 의해 벡터 $\vec{OO'}$의 값은 $(\vec{u} \cdot \hat{n}) \cdot \hat{n}$이 되고 이를 벡터 $\vec{v}$로 설정한다        
> $\vec{OO'} = \vec{v} = (\vec{u} \cdot \hat{n}) \cdot \hat{n}$
> - 회전 평면의 중점 $O'$에서 점 $P$으로 향하는 벡터 $\vec{O'P}$는 두 벡터의 차가 되므로 $\vec{u} - \vec{v}$가 된다       
> $\vec{O'P} = \vec{u} - \vec{v}$
> - 회전 평면의 벡터 $\vec{O'P}$를 각 $\theta$만큼 회전시킨 벡터 $\vec{O'P'}$를 구한다
> - 벡터 $\vec{O'P'}$를 가로 성분과 세로 성분으로 분리하면, 가로 성분에 해당하는 벡터는 벡터 $\vec{O'P}$에 $\cos\theta$를 곱해 얻을 수 있다
> - 세로 성분에 해당하는 벡터를 구하려면 같은 방향을 향하는 벡터가 필요하다       
> 이는 법선 벡터 $\hat{n}$과 벡터 $\vec{O'P'}$를 외적해 얻을 수 있다      
> 이를 벡터 $\vec{O'Q}$로 지정한다면 벡터 $\vec{O'Q}$는 다음과 같이 구할 수 있다      
> $\vec{O'Q} = \hat{n} \times (\vec{u} - \vec{v})$        
> 벡터 $\vec{O'Q}$에 $\sin\theta$를 곱하면 세로 성분에 해당하는 벡터를 얻을 수 있다
> - 두 벡터를 모두 얻으면 다음의 수식으로 벡터 $\vec{O'P}$를 각 $\theta$만큼 회전한 벡터 $\vec{O'P'}$의 값을 얻게 된다        
> $\vec{O'P'} = \cos \theta \cdot \vec{O'P} + \sin \theta \cdot \vec{O'Q}$        
> 위 식을 벡터 $\hat{n}, \vec{u}$와 $\vec{v}$를 사용해 전개하면 다음과 같다       
> $\vec{O'P'} = \cos \theta \cdot (\vec{u} - \vec{v}) + \sin \theta \cdot (\hat{n} \times (\vec{u} - \vec{v}))$       
> 분배 법칙을 적용해 이를 풀어 전개하면 다음과 같다       
> $\vec{O'P'} = \cos \theta \cdot (\vec{u} - \vec{v}) + \sin \theta \cdot (\hat{n} \times \vec{u} - \hat{n} \times \vec{v})$
> - 벡터 $\hat{n}$과 $\vec{v}$는 평행하므로 우변의 끝에 위치한 외적 $\hat{n} \times \vec{v}$의 값은 항상 영벡터가 된다        
> 따라서 위 식은 다음과 같이 정리된다     
> $\vec{O'P'} = \cos \theta \cdot (\vec{u} - \vec{v}) + \sin \theta \cdot (\hat{n} \times \vec{u})$
> - 구해야할 최종 벡터 $\vec{OP'}$는 선분 $\vec{O'P'}$에 벡터 $\vec{v}$를 더해 얻을 수 있다       
> $\vec{OP'} = \cos \theta \cdot (\vec{u} - \vec{v}) + \sin \theta \cdot (\hat{n} \times \vec{u})$    
> - 벡터 $\vec{v}$를 $(\vec{u} \cdot \hat{n}) \cdot \hat{n}$로 치환하면 최종 수식이 유도된다      
> $\vec{u'} = \cos \theta \cdot \vec{u} + (1 - \cos \theta)(\vec{u} \cdot \hat{n}) \cdot \hat{n} + \sin \theta \cdot (\hat{n} \times \vec{u})$
> 
> 로드리게스 회전 공식을 활용하면 오일러 각으로 구현하기 어려운 임의의 축에 대한 회전 변환을 수행할 수 있다       
> 하지만 이 방식은 행렬로의 변환이 어렵다보니 렌더링 파이프라인에 연동하기가 까다롭다     
> 따라서 게임 엔진에서는 로드리게스 회전과 동일한 기능을 제공하면서도 간결하고 행렬로 변환이 용이한 사원수를 사용한다

* * *

[본문](/README-ORIGIN.md/#32-오일러-각의-문제를-해결하는-로드리게스-회전-공식)

# 33. 삼중곱
### 선요약

> 삼중곱(Triple product): 
> - 벡터의 외적과 내적을 두 번 연속 사용하는 연산     
> - 벡터를 세 번 곱해야 하며, 연산 불가능한 수식이 나오면 안 된다
> - 때문에 두 경우만 유효한 삼중곱 연산이 된다
> - $\vec{u} \cdot (\vec{v} \times \vec{w})$
> - $\vec{u} \times (\vec{v} \times \vec{w})$

* * *

[본문](/README-ORIGIN.md/#33-삼중곱)

# 33.1. 스칼라 삼중곱
### 선요약

> 스칼라 삼중곱(Scalar triple product):
> - $\vec{u} \cdot (\vec{v} \times \vec{w})$
> - 결과값이 스칼라가 나오며 다른 삼중곱 연산과 구분하기 위해 별도로 스칼라 삼중곱이라고 부른다
> - 좌우 판별과 백페이스 컬링에서 사용된다        
> $\hat{y} \cdot (\vec{f} \times \vec{v})$        
> $-\hat{z} \cdot (\vec{P_0P_1} \times \vec{P_0P_2})$
> 
> 스칼라 삼중곱 연산의 시각적 의미:
> - 외적으로 만든 벡터의 크기는 두 벡터가 이루는 평행사변형의 크기임과 동시에 외적으로 만들어진 법선 벡터의 크기다
> - 여기서 임의의 벡터 $\vec{u}$의 크기를 법선 벡터 $\vec{v} \times \vec{w}$에 수직으로 투영한 벡터의 높이는 $\cos$ 함수에 비례한다
> - 높이 $|\vec{u}|\cos \theta$에 평행사변형의 넓이 $|\vec{v} \times \vec{w}|$를 곱하면 육면체의 부피가 나온다        
> 이는 스칼라 삼중곱이 만들어내는 값의 절댓값과 동일하다      
> $|\vec{u}||\vec{v} \times \vec{w}|\cos\theta = |\vec{u} \cdot (\vec{v} \times \vec{w})|$        
> - 스칼라 삼중곱의 절댓값은 세 벡터 $\vec{u}, \vec{v}, \vec{w}$가 만드는 평행육면체(Parallelepiped)의 부피를 의미한다
> - 세 벡터에서 바닥에 해당하는 두 벡터를 다른 벡터로 변경해도 최종 육면체의 부피 값은 변하지 않으므로 삼중곱의 결과는 동일하다       
> $\vec{u} \cdot (\vec{v} \times \vec{w}) = \vec{v} \cdot (\vec{w} \times \vec{u}) = \vec{w} \cdot (\vec{u} \times \vec{v})$
> - 스칼라 삼중곱은 세 벡터의 선형 관계를 파악하는 데 사용된다        
> 외적으로 생성된 벡터의 크기는 두 벡터가 만드는 평행 사변형의 넓이와 동일하고, 이는 행렬식의 절댓값과 동일하다   
> 행렬식은 평면에서 평행사변형을 이루는 두 벡터가 서로 선형 독립의 관계를 가지는지 판단하는 수식이다      
> 이와 동일한 관점에서 스칼라 삼중곱은 3차원 공간의 세 벡터가 모두 선형 독립의 관계를 가지는지 판단하는 판별식으로 생각할 수 있다     
> 삼중곱의 값이 0이 나오는 경우는 평면을 이루는 두 벡터 $\vec{v}$와 $\vec{w}$가 평행이거나, 두 벡터 $\vec{v}$와 $\vec{w}$가 만드는 평면에 벡터 $\vec{u}$가 속하는 경우다      
> 전자의 경우 외적의 결과가 영벡터가 되므로 스칼라 삼중곱의 값은 0이 된다     
> 후자의 경우 외적의 결과로 만들어진 법선 벡터에 벡터 $\vec{u}$는 직교하므로 이의 내적은 0이 된다     
> 따라서 스칼라 삼중곱이 0이 아니면 세 벡터는 모두 선형 독립의 관계를 가짐을 알 수 있다

* * *

[본문](/README-ORIGIN.md/#331-스칼라-삼중곱)

# 33.2. 벡터 삼중곱
### 선요약

> 벡터 삼중곱(Vector triple product):
> - $\vec{u} \times (\vec{v} \times \vec{w})$
> - 결과값이 벡터가 나오며 다른 삼중곱 연산과 구분하기 위해 벡터 삼중곱이라고 부른다
> - 삼중곱 전개(Triple product expansion), 라그랑주 공식(Lagrange's formula): $\vec{u} \times (\vec{v} \times \vec{w}) = (\vec{u} \cdot \vec{w}) \cdot - (\vec{u} \cdot \vec{v}) \cdot \vec{w}$
> - 벡터 삼중곱은 다소 복잡한 외적을 두 개의 내적 연산으로 변환한다
> - 삼중곱 전개의 우변은 결국 $a\vec{v} + b\vec{w}$ 형태의 선형 결합식이므로 벡터 삼중곱으로 만들어지는 벡터는 두 벡터 $\vec{v}$와 $\vec{w}$가 만드는 평면에 속한다
> - 벡터 삼중곱은 2차원 공간의 문제를 푸는 데도 유용하게 활용된다     
> 2차원 평면의 벡터 $\vec{u}$와 동일한 평면에 위치한 임의의 벡터 $\vec{v}$가 주어졌을 때, 동일 평면에서 벡터 $\vec{u}$와 직교하는 벡터는 $(\vec{u} \times \vec{v}) \times \vec{u}$의 벡터 삼중곱을 사용해 구할 수 있다

* * *

[본문](/README-ORIGIN.md/#332-벡터-삼중곱)

# 34. 원근 투영 변환의 원리
### 선요약

> - 투시 원근법(Perpective projection): 시선을 한 점에 고정시키고, 고정된 점으로부터 화폭까지 곧게 뻗은 실을 활용해 그리는 기법
> - 원근 투영 변환(Perspective projection transformation): 공간의 모든 점이 한 점을 향해 모이는 형태의 변환       
> 3차원 공간에 투시 원근법의 원리를 적용하기 위해 필요하다        
> 원근 투영 변환은 사람의 눈이 바라보는 방식으로 가상 공간을 변환하는 것이다      
> - 화각(Field of view): 원근 투영 변환을 설계하기 위해서 눈에 보이는 범위를 가상 공간에서 눈에 대응하는 물체인 카메라에 설정한 것        
> 카메라에 화각을 설정하면 좌우와 위아래가 균등한 사각뿔 영역이 만들어진다        
> 원근 투영 변환은 $x, y, z$축이 모두 직교하는 정육면체 형태를 가진 뷰 공간을 카메라의 한 점으로 모이는 사각뿔 형태를 가진 공간으로 변환하는 작업이라고 할 수 있다        
> - 투영 평면(Projection plane): 모든 물체의 상이 맺히는 가상의 평면      
> 3차원 공간을 변환한 후에는 공간의 물체를 투영해 2차원의 모니터 평면에 담아야 한다       
> 투영 평면의 위치가 카메라로부터 멀어질수록 투영 평면은 더 커진다
> - 초점 거리(Focal length): 투영 평면의 위치를 지정하기 위해 설정한 카메라로부터 투영 평면까지의 거리
> - NDC(Normalized device coordinate): 투영 평면에 대응하는 2차원 평면의 좌표시스템을 가지는 정사각형 영역        
> 윈근 투영을 구현하기 위해서는 투영 평면의 위치를 지정해야 하고, 일반적으로 투영 평면의 위치는 계산의 편의를 위해 위 아래의 크기가 각각 1이 되는 지점으로 결정한다       
> 좌우와 상하으이 화각이 동일하므로 투영 평면은 좌우와 상하가 각각 $|-1, 1|$의 범위를 가지는 정사각형의 모습을 띠며 이 평면에 물체의 상이 맺힌다      
> NDC는 가운데 중점을 원점으로 설정한다       
> 투영 평면에 대응하는 NDC가 언제나 일정한 값을 가져야 한다면, 카메라에 설정된 화각이 변할 때, 초점 거리는 달라질 수밖에 없다     
> 화각이 커질수록 초점 거리는 가까워지고 화각이 작아질수록 초점 거리는 멀어진다       
> 화각과 초점 거리의 관계는 직각삼각형의 $\tan$ 함수로 설정된다       
> $\tan (\frac{\theta}{2}) = \frac{1}{d}$     
> 따라서 주어진 화각 $\theta$에 따른 초점 거리 $d$는 다음 식으로 계산할 수 있다       
> $d = \frac{1}{\tan (\frac{\theta}{2})}$     
> $\tan$ 함수를 사용해 초점 거리를 구하고, 뷰 공간의 점을 투영 평면 위의 점으로 대응시키는 원근 투영 변환을 설계할 때 이 역시 행렬로 설계할 수 있다면 행렬 곱의 장점을 활용해 로컬 공간의 점을 투영 평면의 점으로 한 번에 변환해주는 파이프라인을 만들 수 있다
> - 유클리드 공간(Euclidean space): $x, y, z$축이 서로 직교하고 크기가 동일한 정육면체 형태의 3차원 공간      
> 원근 투영 행렬을 설계하기 위해 카메라가 바라보는 공간은 유클리드 공간의 성질을 가져야 한다      
> 로컬 공간, 월드 공간, 뷰 공간은 모두 유클리드 공간의 형태다
> - 사영 공간(Projective space): 사각뿔 형태의 공간       
> 정육면체 형태의 유클리드 공간은 원근 투영 변환에 의해 화각으로 만들어진 사각뿔 형태로 바뀌게 된다       
> 사영 공간의 $x$축과 $y$축은 여전히 직교하기 때문에 사영 공간의 $x$축과 $y$축은 유클리드 공간과 동일한 성질을 가진다     
> 하지만 사영 공간의 $z$축은 독립적으로 행동하지 않고 $x$축과 $y$축에 모두 영향을 준다        
> 이는 초점 거리에 따라 $x$축과 $y$축이 만들어내는 투영 평면의 면적이 달라지는 이유이기도 하다
> - 종횡비(Aspect ratio): 화면의 가로 세로 비
> - 클립 좌표(Clip coordinate): 원근 투영 행렬 $P$로 변환되는 좌표계      
> 원근 투영 행렬 $P$는 모든 점에 대해서 보편적으로 사용할 수 있게 설계된다

* * *

[본문](/README-ORIGIN.md/#34-원근-투영-변환의-원리)

# 35. 동차 좌표계
### 선요약

> 동차 좌표계(Homogenous coordinate system):
> - 한 차원 높인 벡터를 사용하는 좌표계
> - NDC는 2차원 평면의 좌표지만, 모든 점에 사용 가능한 원근 투영 행렬을 사용하도록 계산 과정을 두 단계로 구분하고 사용하는 벡터의 값도 한 차원 높였다
> - 동차 좌표계의 동차는 모든 항의 차수가 같음을 의미하는 수학 용어다
> 
> 사영 공간과 동차 좌표계의 연관:
> - 사영 공간의 점과 투영된 점의 좌표는 카메라로부터 멀어질수록 원점에 가까워지고, 카메라에 가까워질수록 원점에 멀어지는 반비례 관계를 가진다      
> - 3차원 사영 공간의 점을 $(x', y', z')$로 표기하고 해당 점이 투영된 NDC 좌표를 $(x, y)$로 표기한다면 NDC 좌푯값은 사영 공간의 마지막 차원 값 $z'$에 반비례로 영향을 받으므로 다음과 같은 관계가 성립한다        
> $x = \frac{x'}{z'} \qquad y = \frac{y'}{z'}$
> - NDC 공간에서 방정식 $y = ax + b$가 만들어낸 직선이 사영 공간의 점들의 투영이라고 가정하면, 이를 사영 공간의 좌표로 표현할 때 직선의 방정식은 다음과 같다      
> $\frac{y'}{z'} = a\frac{x'}{z'} + b$        
> 이 식의 양변에 $z'$를 곱하면 상수가 사라지고 세 미지수의 차수가 모두 1차식으로 동일한 수식이 구성된다       
> $y' = ax' + bz'$        
> - 미지수에 대한 차수가 모두 동일한 방정식을 동차 방정식이라고 부른다
> - 사영 공간이 사용하는 좌표계를 동차좌표계라고도 부른다
> - 원근 투영 행렬 $P$를 설계하기 위해 계산 과정을 두 단계로 나눠 진행하고, 첫 번째 단계로 구한 좌표를 클립 좌표라고 부르며 이는 투영 되기 전의 사영 공간의 좌표를 의미한다       
> 따라서 원근 투영 변환에서 등장한 사영 공간, 클립 공간, 동차 공간은 모두 동일한 공간을 가리키고, 클립 좌표, 동차 좌표 역시 동일한 좌표계를 가리킨다
> 
> 소실점(Vanishing point):
> - NDC의 원점
> - 사영 공간의 점이 카메라로부터 멀어질수록 투영된 NDC 좌푯값은 원점 $(0, 0)$에 가까워진다

* * *

[본문](/README-ORIGIN.md/#35-동차-좌표계)

# 36. 깊이 값
### 선요약

> 원근 투영 행렬을 활용해 3차원의 물체를 원근감 있게 표현할 수 있지만, 물체에 텍스쳐를 입힌다면 추가로 고려할 사항이 생긴다       
> 이용자에게 보이는 화면은 결국 2차원 평면이므로 나중에 그린 물체가 앞에 보일 수밖에 없다     
> 가장 가까운 곳에 배치하더라도, 가장 먼저 그리면 카메라에서 가장 먼 곳에 배치돼 있는 것처럼 인식된다     
> 
> 이 문제를 해결하는 방법은, 물체가 카메라로부터 얼마나 떨어져 있는지에 대한 정보를 기록해 앞에 있는 물체를 나중에 그리도록 설정한다      
> 이를 위해서는 카메라로부터 물체가 얼마나 떨어졌는지 파악할 수 있는 데이터가 필요한데 이를 깊이(Depth) 값이라고 한다     
> 2차원 평면이었던 NDC 영역에 깊이 값을 추가하면 3차원으로 NDC 영역이 확장된다        
> 깊이 값의 범위는 동일하게 $|-1, 1|$로 설정한다
> 
> - 근평면(Near plane), 원평면(Far plane): 카메라에 부여한 시야각은 깊이와 무관하기 때문에 카메라에 추가로 부여한 속성
> - 절두체(Frustum): 카메라 시야를 구성하는 사영 공간을 근평면과 원평면으로 잘자내어 사각뿔에서 뾰족한 부분이 잘린 형태       
> NDC의 깊이 값은 멀어질수록 증가하기 때문에 절두체로 생성되는 3차원 NDC 공간은 왼손 좌표계를 형성한다

* * *

[본문](/README-ORIGIN.md/#36-깊이-값)

# 37. 원근 보정 매핑
### 선요약

> 기존 방식으로 텍스처 매핑을 진행할 경우 평행하게 그려져야 할 텍스처가 처지거나 올라가는 문제가 발생한다     
> 이 문제는 투영 전, 사영 공간에서의 무게중심좌표와 투영 평면에 투영한 NDC 공간에서의 무게중심좌표가 다르기 때문에 발생한다       
> 사영 공간의 무게중심좌표와 NDC에서의 무게중심좌표가 서로 차이 나는 이유는 NDC 공간으로의 변환 과정에서 사영 공간의 마지막 요소 $w$의 값 $-v_z$를 나눴기 때문이다        
> 이는 사영 공간과 NDC 공간 사이에 형성된 반비례 관계로부터 기인한다
> 
> 투영 보정 보간(Perspective correction interpolation):
> - 투영 전의 무게중심좌표 값을 계산해 텍스처를 매핑하는 것     
> - 기존의 텍스처 매핑은 NDC에서의 변경된 무게중심좌표를 사용하는 것이었는데, 이를 바로 잡으려면 투영되기 전 사영 공간에서의 무게중심좌표를 사용해야 한다       
> - 따라서 투영 과정을 거꾸로 추적해 NDC에서 구한 무게중심좌표로부터 사영 공간의 무게중심좌표를 계산해야 한다

* * *

[본문](/README-ORIGIN.md/#37-원근-보정-매핑)

# 38. 깊이 버퍼
### 선요약

> - 깊이 버퍼(Depth buffer): 화면의 픽셀마다 현재의 깊이 값을 보관해주는 별도의 저장 공간     
> 다수의 게임 오브젝트를 그리는 경우 카메라로부터 멀리 떨어진 게임 오브젝트를 먼저 그리고 가까운 오브젝트를 다음에 그리도록 순서를 조절해야 원근감이 올바르게 표현된다        
> 같은 거리에 있는 두 게임 오브젝트가 서로 겹쳐 있다면, 물체 단위가 아닌 삼각형의 픽셀 단위로 깊이를 비교하고 가까운 곳에 있는 픽셀만 그린다
> - 깊이 테스팅(Depth testing): 최종 픽셀을 찍는 과정에서 현재 깊이 값을 깊이 버퍼에 저장된 값과 비교해 현재 깊이 값이 작은 경우에만 픽셀을 찍도록 로직을 구성하여 그리기 순서 문제를 해결하고 물체에 가려져 그리지 않아도 되는 픽셀을 파악해 그리기를 건너뛰는 작업

* * *

[본문](/README-ORIGIN.md/#38-깊이-버퍼)

# 39. 절두체 컬링
### 선요약

> 절두체 컬링(Frustum culling):
> - 절두체의 영역 밖에 있는 게임 오브젝트를 파악하고 걸러내는 기능
> - 다수의 게임 오브젝트가 월드 공간에 넓게 퍼져 있는 경우, 카메라 시야 밖에 위치한 게임 오브젝트까지 모두 그리는 것은 비효율적인 작업이기 때문에 게임에서 그래픽을 구현할 때는 효과적인 렌더링을 위해 절두체 영역에 속한 게임 오브젝트만 그린다
> - 절두체 컬링은 절두체를 구성하는 6개의 평면에 대해 각각 평면의 방정식을 세우고, 평면의 방정식을 활용해 대상 게임 오브젝트의 위치가 평면의 바깥에 있는지 확인하는 절차로 진행된다
> - 게임 오브젝트가 6개 평면 중 하나라도 바깥쪽에 위치해 있다면 그리기에서 제외된다

* * *

[본문](/README-ORIGIN.md/#39-절두체-컬링)

# 39.1. 평면의 방정식
### 선요약

> 평면의 방정식:
> - 세 점이 주어지면 세 점으로부터 두 벡터를 생성해 평면 상의 모든 점을 생성할 수 있다
> - 하나의 평면을 정의하려면 최소 3개의 점이 필요한데, 3차원 공간의 평면은 앞면과 뒷면이 존재하기 때문에, 이를 구분할 수 있는 정보도 있어야 한다
> - 그래서 평면을 정의할 때는 세 점의 정보를 사용하기보다 평면이 바라보는 방향을 알려주는 법선 벡터와 평면 상에 위치한 한 점을 제공하는 방법을 사용한다       
> 이때 법선 벡터는 크기를 1로 정규화시키는 것이 일반적이다
> 
> 평면이 지니는 성질:
> - 평면이 향하는 방향을 나타내는 법선 벡터 $\hat{n}$와 평면에 위치한 임의의 점 $P_0(x_0, y_0, z_0)$의 두 요소는 3차원 공간에서 평면을 정의할 때 최소로 주어지는 값이다
> - 평면이 향하는 방향을 나타내는 법선 벡터 $\hat{n}$의 값이 $(a, b, c)$로 주어지면, 크기가 1이므로 $a^2 + b^2 + c^2 = 1$의 조건이 성립한다
> - 평면에 위치한 임의의 점 $P_0(x_0, y_0, z_0)$의 값이 주어졌다고 가정하면, 평면의 방향을 나타내는 법선 벡터와 평면 위의 두 점을 지나는 벡터는 서로 직교하기 때문에 두 벡터의 내적은 0이 된다      
> 법선 벡터 $\hat{n}$와 점 $P_0$에서 점 $P$로 향하는 벡터를 내적하면 다음 수식이 성립한다       
> $\hat{n} \cdot (P - P_0) = (a, b, c) \cdot (x - x_0, y - y_0, z - z_0) = 0$     
> $\qquad = ax + by + cz - (ax_0 + by_0 + cz_0) = 0$
> - 법선 벡터 $(a, b, c)$와 평면의 점 $(x_0, y_0, z_0)$는 사전에 주어진 값이므로 $-(ax_0 + by_0 + cz_0)$는 미리 계산할 수 있는 상수 값이다        
> 이를 간단히 $d$로 치환하면 다음과 같이 간략하게 표시할 수 있는데, 이를 평면의 방정식(The equation of plane)이라고 한다      
> $ax + by + cz + d = 0$
> 
> 상수 $d$의 의미:
> - $d = -(ax_0 + by_0 + cz_0)$
> - 상수 $d$는 법선 벡터 $(a, b, c)$와 벡터 $(x_0, y_0, z_0)$와의 내적에 음의 부호를 설정한 결과로 볼 수 있다     
> $d = -\hat{n} \cdot (x_0, y_0, z_0)$
> - $(x_0, y_0, z_0)$는 점 $P_0$의 좌표지만, 이는 원점 $O$에서 점 $P_0$로 향하는 벡터의 값으로도 사용할 수 있다       
> 이를 $\vec{p}$로 표시하고 위 공식을 정리하면 다음과 같다        
> $d = -\hat{n} \cdot \vec{OP_0} = -\hat{n} \cdot \vec{p}$
> 
> $\hat{n} \cdot \vec{p}$가 나타내는 의미:
> - $\hat{n} \cdot \vec{p} = |\hat{n}||\vec{p}|\cos\theta$
> - 현재 법선 벡터의 크기는 항상 1이므로 위 공식은 다음과 같이 간단히 정리된다        
> $\hat{n} \cdot \vec{p} = |\vec{p}|\cos\theta$
> - $\hat{n} \cdot \vec{p}$는 $\vec{p}$ 벡터를 법선 벡터 $\hat{n}$에 투영한 벡터의 크기를 의미한다
> - 평면과 법선 벡터는 서로 직교하기 때문에 $\hat{n} \cdot \vec{p}$의 값은 원점에서 평면까지의 최단 거리를 의미한다
> - 하지만 $d$의 값은 $\hat{n} \cdot \vec{p}$가 아닌 $-\hat{n} \cdot \vec{p}$이므로 원점으로부터 평면의 최단 거리에 음의 부호를 설정한다는 특징을 가진다
> - 거리라는 측정값은 음수가 나올 수 없기 때문에 $d$값은 원점으로부터의 최단 거리와 방향이라는 두 가지 정보를 담고 있다
> - 내적의 성질에 따라 두 벡터가 같은 방향을 바라보면 +값이 나오고, 반대 방향을 바라보면 -값이 나온다     
> $d$의 값이 음수라면 두 벡터 $\hat{n}$과 $\vec{p}$는 같은 방향을 바라보고 있다는 의미다
> 
> 평면이 원점을 향하는 반대의 경우:
> - 평면이 원점을 향하다면 두 벡터는 서로 마주보는 상황이므로 내적의 값은 음수가 되고, $d$의 값은 반대 부호인 양수가 나온다       
> 
> 평면의 방정식 $d$의 값에 따라 평면이 가지는 두 가지 성질:
> - $d$의 부호: $d$의 값이 양수면 평면이 바라보는 방향은 원점을 향하고, 음수면 원점에서 멀어지는 방향을 가진다        
> $d$의 값이 양수면 원점은 평면의 바깥에 위치하고, 음수면 원점은 평면의 안쪽에 위치한 것이다
> - $d$의 절댓값: 평면에서 원점까지의 최단 거리를 의미한다
> 
> 평면이 원점을 품는 경우:
> - 평면이 원점을 품는다면 원점으로부터 거리 $d$의 값은 부호에 관계없이 언제나 0이 나오기 때문에 평면의 법선 벡터 값을 사용해 바로 $ax + by + cz = 0$이라는 평면의 방정식을 얻을 수 있다
> 
> 주어진 점이 평면의 안쪽에 있는지 바깥쪽에 있는지 판별:
> - 임의의 점 $P$가 있을 떄, 원점에서 점 $P$로 향하는 벡터 $\vec{OP}$를 법선 벡터에 내적한 값을 $p$로 표기하면, $p$의 부호를 통해 법선 벡터에 투영한 벡터 $\vec{OP'}$의 방향 정보를 파악할 수 있다
> - $p$가 양수면 벡터 $\vec{OP'}$는 법선 벡터와 같은 방향을 정하고, 음수면 법선 벡터와 반대 방향을 향한다
> 
> $p$와 평면의 방정식의 상수 $d$를 서로 더한 값:
> - 원점이 평면 안쪽에 있으면 $d$값은 음수다      
> 음수 $d$에 양수인 $p$를 더한 값이 여전히 음수라면, 점 $P$는 평면의 안쪽에 있다고 판단할 수 있다     
> - 반대로 $p$와 $d$를 더한 값이 양수면 점 $P$는 평면의 바깥쪽에 있다고 판단할 수 있다
> - 법선 벡터가 반대인 경우에도 이 규칙은 동일하게 적용되어 $d$값은 양수가 되고 $p$는 음수가 된다     
> - $d$와 $p$를 더한 결과가 여전히 양수라면 이는 점 $P$가 평면의 바깥쪽에 있음을 의미한다     
> - 따라서 법선 벡터 $(a, b, c)$와 $d$를 사용해 정의한 평면에 주어진 점 $P(x_1, y_1, z_1)$가 평면의 바깥쪽에 있는지를 판단하는 수식은 다음과 같다     
> $(a, b, c) \cdot (x_1, y_1, z_1) + d > 0$
> - $(a, b, c) \cdot (x_1, y_1, z_1) + d$의 값에 절댓값을 취하면 이는 평면에서 해당 점까지의 최단 거리를 의미한다     
> $distance = |(a, b, c) \cdot (x_1, y_1, z_1) + d|$

* * *

[본문](/README-ORIGIN.md/#391-평면의-방정식)

# 39.2. 평면의 방정식의 정규화
### 선요약

> 평면의 방정식의 정규화:
> - 크기가 1이 아닌 주어진 법선 벡터를 구성하는 세 계수 $(a, b, c)$를 정규화해 $(a', b', c')$로 만드는 수식은 법선 벡터의 크기 $|\vec{n}|$으로 나누면 구할 수 있다        
> $(a', b', c') = \frac{\vec{n}}{|\vec{n}|} = \frac{\vec{n}}{\sqrt{a^2 + b^2 + c^2}} = \frac{(a, b, c)}{\sqrt{a^2 + b^2 + c^2}}$
> - 마지막 계수 $d$는 평면 위의 한 점으로 향하는 벡터 $\vec{p}$와 평면의 법선 벡터 $\hat{n}$을 내적한 값의 반대수를 의미한다      
> $d = -\vec{n} \cdot \vec{p} = -|\vec{n}||\vec{p}| \cos \theta$
> - 법선 벡터의 크기가 1일 때 평면의 방정식 값 $d'$는 다음과 같다     
> $d' = -|\vec{p}| \cos\theta$    
> - $d$와 $d'$의 관계는 다음과 같이 정리된다      
> $d' = \frac{d}{|\vec{n}|}$
> - $d$의 경우도 동일하게 법선 벡터의 크기 $|\vec{n}|$으로 나누면 원하는 값 $d'$를 얻을 수 있기 때문에 정규화 식은 다음과 같이 정리된다       
> $\frac{ax + by + cz + d}{\sqrt{a^2 + b^2 + c^2}} = 0$       
> - 임의의 네 수로부터 평면의 방정식을 구성한다면 위 식을 사용해 평면의 방정식을 정규화시켜주는 것이 이후에 평면의 방정식을 활용할 때 더 편리하다     
> 정규화된 평면의 방정식의 $d$값은 원점으로부터의 최단 거리 정보를 담고 있기 때문이다
> 
> 2차원 직선의 방정식에서의 최단 거리:
> - 평면의 방정식은 내적에 기반을 두기 때문에 2차원 공간에서도 동일하게 활용할 수 있다
> - 3차원 공간의 평면이 앞면과 뒷변을 가진 것처럼, 2차원 공간의 직선도 앞쪽과 뒤쪽을 가진다
> - 2차원 공간에서의 직선의 방정식이 $ax + by + c = 0$이라고 할 때, 법선 벡터 $(a, b)$의 크기가 1이면 상수 $c$의 절댓값은 원점에서 직선까지의 최댄 거리를 의미한다
> - 만약 법선 벡터 $(a, b)$의 크기가 1이 아니라면 원점에서 직선까지의 최단 거리는 다음과 같다     
> $\frac{|c|}{\sqrt{a^2 + b^2}}$
> - 임의의 한 점 $(x_1, y_1)$에서 임의의 직선 $ax + by + c = 0$까지의 최단 거리는 평면의 방정식을 정규화한 값과 내적을 활용해 다음과 같이 구할 수 있다        
> $\frac{|ax_1 + by_1 + c|}{\sqrt{a^2 + b^2}}$

* * *

[본문](/README-ORIGIN.md/#392-평면의-방정식의-정규화)

# 39.3. 평면의 방정식을 활용한 절두체 표현
### 선요약

> 절두체 컬링의 구현:
> - 절두체 상단 평면을 무한하게 확장하면 상단 평면은 원점을 품게 된다     
> 이는 근평면과 원평면을 제외한 나머지 평면에 대해서도 동일하다       
> 근평면과 원평면을 제외한 네 평면을 구성하는 평면의 방정식의 $d$값은 0이므로 크기가 1인 법선 벡터만 구하면 근평면과 원평면을 제외한 평면읩 방정식을 얻을 수 있다
> - 뷰 공간의 절두체를 측면에서 바라본 평면의 좌표계에서 오른쪽 방향은 뷰 공간의 $-z$축에 대응되고 위쪽 방향은 $y$축에 대응된다
> - 평면에서 오른쪽을 향하는 $(0, 0, -1)$의 벡터를 반시계 방향으로 $\frac{\theta}{2}$만큼 회전한 결과 $(0, \sin \frac{\theta}{2}, -\cos \frac{\theta}{2})$가 된다     
> 평면의 법선 벡터는 여기서 $90^\circ$만큼 더 회전한 값이므로 $y$값과 $z$값을 교차시키고 $y$값에 반대 부호를 취하면 얻을 수 있다      
> $\hat{n} = (0, \cos\frac{\theta}{2}, \sin\frac{\theta}{2})$
> - $d$값은 0이므로 절두체 상단을 구성하는 평면의 방정식은 다음과 같다        
> $\cos\frac{\theta}{2}y + \sin\frac{\theta}{2}z = 0$
> - 유사한 방식으로 나머지 세 평면의 방정식을 구하면 다음과 같다
>     - 절두체 하단 평면의 방정식: $-\cos\frac{\theta}{2}y + \sin\frac{\theta}{2}z = 0$
>     - 절두체 좌측 평면의 방정식: $-\cos\frac{\theta}{2}x + \sin\frac{\theta}{2}z = 0$
>     - 절두체 우측 평면의 방정식: $\cos\frac{\theta}{2}x + \sin\frac{\theta}{2}z = 0$
> 
> 근평면과 원평면의 방정식:
> - 근평면은 원점을 향하고 있으며 원점으로부터의 거리는 $n$이므로 평면의 방정식의 $d$ 값은 $n$이 된다     
> - 근평면의 법선 벡터의 값은 $(0, 0, 1)$이다
> - 근평면의 방정식:      
> $(0, 0, 1) \cdot (x, y, z) - (0, 0, 1) \cdot (0, 0, -n) = 0$        
> $\qquad \therefore z + n = 0$
> - 원평면의 법선 벡터는 근평면에 반대 방향인 원점에서 멀어지는 $(0, 0, -1)$이며, 원점으로부터의 거리는 $f$가 된다
> - 원평면의 방정식:      
> $(0, 0, -1) \cdot (x, y, z) - (0, 0, 1) \cdot (0, 0, f) = 0$        
> $\qquad \therefore -z - f = 0$
> 
> 평면의 방정식을 다룰 때 주의할 점:
> - 평면의 방정식은 방향 정보가 수록되어 있기 때문에 함부로 수식을 옮기면 안 된다
> - 원평면의 방정식의 변을 옮기면 다음과 같은 방정식이 나온다     
> $0 = z + f$
> - 이 방정식으로 만들어지는 평면이 놓인 위치는 원평면과 동일하지만, 평면의 방향은 원평면의 반대 방향인 원점을 향한다     
> - 따라서 $z + f = 0$과 $-z - f = 0$은 서로 다른 평면이라는 점에 주의해야 한다

* * *

[본문](/README-ORIGIN.md/#393-평면의-방정식을-활용한-절두체-표현)

# 39.4. 원근 투영 행렬로부터 평면의 방정식 만들기
### 선요약

> 원근 투영 행렬을 활용해 절두체 컬링 구현:
> - 뷰 공간의 점이 NDC 좌표까지 변환됐을 때 NDC 좌표를 구성하는 $x, y, z$ 세 축의 값이 $|-1, 1|$ 범위에 있다면 해당 점은 절두체 영역 안쪽에 있음을 의미한다
> - NDC 좌푯값을 $(n_x, n_y, n_z)$으로 가정하면 각 성분은 $-1$과 $1$ 사이에 있다
> - 이 조건에서 변환 과정을 거꾸로 추적하면 NDC 좌표는 클립 좌표의 마지막 차원 $w$로 나눈 결괏값이므로, 클립 좌표 $(x, y, z, w)$로 바꿔 쓰면 각 성분은 $-w$와 $w$ 사이에 있다
> - 원근 투영행렬을 $P_{row1}$부터 $P_{row4}$까지 4개의 행벡터로 표현하면 뷰 공간에서 클립 공간으로 변환하는 연산은 행벡터와 점의 내적으로 바꿔 쓸 수 있다
> - 그러면 클립 공간의 각 요소는 행벡터와 점의 내적으로 표현된다
> - $-w, w$와 각 성분의 관계를 나타내는 부등식의 $x, y, z, w$를 내적으로 치환하고 6개로 분리하여 6개의 부등식이 모두 참이면, 뷰 공간의 점 $\vec{v}$는 절두체 영역 내부에 있음을 의미하고, 하나라도 만족하지 못하면 절두체 영역의 외부에 있음을 의미한다
> - 부등식 괄호 안의 원근 투영 행렬 행벡터를 계산한 4차원 벡터를 $(a, b, c, d)$로 표시했을 때 이를 뷰 공간의 점 $(x, y, z, 1)$과 내적한 결과는 다음과 같다        
> $ax + by + cz + d \geq 0$
> - 이는 평면의 방정식과 형태가 동일하지만 이 식에서 만들어지는 법선 벡터 $(a, b, c)$의 크기는 1이 아니므로 이를 정규화된 평면의 방정식으로 변환해야 한다     
> $\frac{ax + by + cz + d}{\sqrt{a^2 + b^2 + c^2}} = 0$
> - 이와 같은 과정을 거쳐 구한 평면의 방향은 모두 절두체 내부를 향한다
> - 절두체 컬링을 구현할 때는 해당 점이 외부에 있는지를 파악하는 수식이 필요하다      
> 평면이 절두체 외부를 향하도록 위 식의 부호를 반전시킨다     
> $-(\frac{ax + by + cz + d}{\sqrt{a^2 + b^2 + c^2}}) = 0$
> - 평면 밖에 위치한 상황만 검출해야 하므로 등호 대신 부등호로 교체하면 다음의 수식이 완성된다        
> $-(\frac{ax + by + cz + d}{\sqrt{a^2 + b^2 + c^2}}) > 0$

* * *

[본문](/README-ORIGIN.md/#394-원근-투영-행렬로부터-평면의-방정식-만들기)

# 40. 바운딩 볼륨
### 선요약

> 절두체 컬링만을 적용하면 카메라를 움직일 때 화면 가장자리에 있는 게임 오브젝트가 갑자기 사라지거나 튀어나오는 현상이 생긴다     
> 이는 게임 오브젝트의 메시가 차지하는 공간 영역이 있음에도 불구하고 게임 오브젝트의 기준 위치만 가지고 절두체 컬링을 수행했기 때문이다       
> 예를 들어 게임 오브젝트의 기준 위치는 절두체 바깥에 있고 메시는 절두체 안 쪽에 있다면 기존 절두체 컬링 로직에서는 게임 오브젝트의 위치가 절두체 바깥에 있다고 판단해 그리기를 건너뛴다      
> 하지만 이 게임 오브젝트는 절두체 영역에 걸쳐 있기 때문에 그려줘야 한다      
> 이 문제를 해결하기 위해서는 게임 오브젝트의 위치를 대상으로 하지 않고, 메시가 차지하는 영역을 감안해 절두체 컬링을 진행해야 한다        
> 
> - 원시 도형(Primitive shape): 구(Sphere)나 박스(Box) 같은 기본 도형
> - 바운딩 볼륨(Bounding Volume): 원시 도형으로 설정한 공간 데이터
> 
> 게임 엔진은 메시가 차지하는 영역을 효과적으로 관리하기 위해 원시 도형을 사용한다

* * *

[본문](/README-ORIGIN.md/#40-바운딩-볼륨)

# 40.1. 구 바운딩 볼륨의 판정
### 선요약

> 바운딩 볼륨에서 손쉽게 사용되는 원시 도형은 구(Sphere)다        
> 구는 두 영역이 서로 겹치는지, 떨어져있는지를 가장 쉽고 빠르게 파악할 수 있는 도형이기 때문이다      
> 어떤 점이 구의 외부에 있는지 여부를 파악하는 방법은 구의 중점에서부터 점까지의 거리와 구의 반지름의 크기를 비교하는 것이다
> 
> $$d > r_1$$
> 
> 또한 두 구의 영역이 서로 떨어져 있는지 여부는 두 구의 중점 간의 거리와 두 구의 반지름을 더한 값을 비교하는 것만으로 쉽게 파악할 수 있다
> 
> $$d > (r_1 + r_2)$$

* * *

[본문](/README-ORIGIN.md/#401-구-바운딩-볼륨의-판정)

# 40.2. AABB와의 판정
### 선요약

> - AABB(Axis aligned bounding box): 기저 축에 정렬되어 있는 바운딩 볼륨      
> 박스 영역을 구성하는 각 축의 최댓값과 최솟값을 설정하고, 메시를 구성하는 점을 순회하면서 각 차원의 값을 비교한다        
> 현재 박스 영역에 저장된 최댓값보다 크거나 최솟값보다 작다면 박스 영역의 최댓값과 최솟값을 갱신해준다        
> 모든 점에 대해 이 과정을 거치면 기저 축에 평행한 박스 영역이 형성된다
> 
> 로컬 공간에서 생성한 AABB 영역과 평면과의 판정:
> - 평면의 법선 벡터의 모든 요소가 양수인 상황에서 AABB 영역이 평면의 바깥에 위치해 있다고 가정하면, 이 상황에서 평면과 가장 가까운 AABB 영역의 점은 AABB의 최솟값이다        
> 그렇다면 AABB 영역의 최솟값과 평면과의 차이를 측정하는 값은 양수가 나온다
> - 반대로 평면의 법선 벡터의 모든 요소가 음수인 상황에서는, 평면과 가장 가까운 AABB 영역의 점은 최댓값이고, 최댓값과 평면과의 차이를 측정하는 값 또한 양수가 나온다
> - AABB 영역과 법선 벡터의 $x, y, z$축은 서로 직교하고 있으므로 각 축의 데이터는 독립적으로 동작한다     
> 따라서 각 법선 벡터의 요소마다 양수인 경우에는 해당 요소의 최솟값을, 음수인 경우에는 해당 요소의 최댓값을 사용하는 것으로 평면에서 가장 가까운 AABB의 점을 구할 수 있다     
> 예를 들어 $x$축과 $z$축의 법선 벡터가 음수고 $y$축만 양수라면 평면과 가장 가까운 AABB의 좌표는 $(Max, Min, Max)$가 된다     
> - 평면에서 가장 가까운 AABB의 좌표와 평면과의 차이를 측정했을 때 그 값이 양수가 나온다면, AABB 영역은 완전히 평면의 바깥에 위치해 있다고 판정할 수 있다
> 
> AABB 영역이 절두체의 평면과 교차되는 경우의 판별:
> - 평면에서 가장 가까운 AABB의 좌표와 평면과의 차이를 측정한 값이 음수가 나오는 경우, 평면에서 가장 가까운 AABB의 좌표와 정반대에 위치한 점으로 다시 평면과의 테스트를 진행해 평면과의 교차 여부를 확인한다      
> - 정반대에 위치한 점과 절두체 평면과의 차이를 측정한 값이 양수가 나오면 절두체 영역과 AABB 영역은 서로 교차한다

* * *

[본문](/README-ORIGIN.md/#402-aabb와의-판정)

# 41. 삼각형 클리핑
### 선요약

> 삼각형 클리핑(Triangle clipping):
> - 현재까지의 내용으론 카메라 뒤편에 있는 점이 거꾸로 뒤집혀 투영되는 결과가 발생한다
> - 평면이 올바르게 보이려면 카메라 뒤쪽에 있는 점을 파악해 점이 거꾸로 뒤집혀 투영되지 않도록 에방해야 한다
> - 원근 투영 행렬을 곱해 생성된 클립 좌표계의 $w$값은 뷰 공간에서의 깊이 값을 의미한다
> - 카메라 정면에 위치한 점의 $w$값은 0보다 크고, 카메라 뒤에 있는 점의 $w$값은 0보다 작으며, 카메라 초점에 위치한 점의 $w$값은 0이 된다
> - 음의 $w$ 영역에 걸쳐 있는 삼각형을 파악하고 이들이 엉뚱하게 투영되지 않도록 삼각형 영역을 잘라내는 작업을 삼각형 클리핑(Triangle clipping)이라고 한다
> - 삼각형 클리핑 작업은 월드 공간의 좌표를 사용하지 않고 투영 행렬을 적용한 후의 좌표를 사용한다     
> 사영 공간에서 삼각형 클리핑 작업을 진행하는 것이 더 간편하기 때문이다       
> 이는 사영 공간의 좌표를 클립 좌표로 부르는 이유다
> - 뒤집혀 투영되는 문제를 해결하기 위해서는 음의 영역을 잘라내는 작업이 필요하며, 음의 영역에 위치한 점 $P_1$을 $w = 0$ 평면에 투영한 두 점 $P_{c1}$과 $P_{c2}$의 좌표를 구해야 한다
> - 점 $P_1$과 점 $P_2, P_3$를 이은 두 선분이 있을 때 점 $P_{c1}$과 $P_{c2}$의 좌표는 각 선분 위의 점이며 점 $P_{c1}, P_{c2}$의 좌표는 아핀 결합의 직선의 방정식을 사용해 구할 수 있다
> - 삼각형을 잘라낸 후에 $w = 0$ 평면에 투영된 두 점과 투영되지 않은 두 점의 영역은 삼각형이 아닌 사각형을 이루기 떄문에 점을 투영한 후에는 사각형을 두 개의 삼각형으로 분할해야 한다     
> 분할할 때에는 면의 방향이 동일하도록 정점의 순서도 자르기 전의 삼각형의 순서와 동일해야 한다

* * *

[본문](/README-ORIGIN.md/#41-삼각형-클리핑)

# 42. 복소수
### 선요약

복소수(Complex number): 
- 체의 구조를 가지는 집합이다
- 실수(Real number)와 허수(Imaginary number)의 독립된 2개 요소로 구성된 수 집합이다
- 집합 기호는 $C$로 표현한다

* * *

[본문](/README-ORIGIN.md/#42-벡터-공간의-연산)

# 42.1. 허수
### 선요약

> - 허수(Imaginary number): 제곱해서 음수가 되는 상상의 수
> - 허수 단위(Imaginart unit): 제곱했을 때 -1이 나오는 수 $i$     
> $i^2 = -1$
> - 실수부(Real part): 복소수 내에서 완전히 분리된 실수 집합
> - 허수부(Imaginary part): 복소수 내에서 완전히 분리된 허수 집합     
> 허수부는 항상 $i$를 사용해 표기한다
> - 복소수 표기: $a + bi$, $(a, b)$

* * *

[본문](/README-ORIGIN.md/#421-허수)

# 42.2. 복소수의 구조
### 선요약

> 복소수의 덧셈:
> - 실수부와 허수부를 구분해 각각 더해주는 방식       
> $(a + bi) + (c + di) = (a + c) + (b + d)i$      
> $(a, b) + (c, d) = (a + c, b + d)$
> - 순서쌍을 구성하는 $a, b, c, d$는 모두 실수이므로 벡터 덧셈 연산의 성질을 참고해 복소수의 덧셈 연산이 만족하는 성질을 파악할 수 있다
> - 덧셈에 대해 닫혀 있음
> - 덧셈에 대한 교환법칙이 성립함
> - 덧셈에 대한 결합법칙이 성립함
> - 덧셈에 대한 항등원이 존재함
> - 덧셈에 대한 역원이 존재함
> 
> 복소수의 곱셈:
> - 모든 요소를 교차해 곱하는 방식        
> $(a + bi) \cdot (c + di) = ac - bd + (ad + bc)i$        
> $(a, b) \cdot (c, d) = (ac - bd, ad + bc)$
> - 실수가 갖는 체의 성질에 근거해 복소수 곱셈 연산의 성질을 분석할 수 있다
> - 곱셈에 대해 닫혀 있음
> - 곱셈에 대한 교환법칙이 성립함
> - 덧셈과 곱셈에 대한 분배법칙이 성립함
> - 곱셈에 대한 항등원이 존재함
> 
> 복소수의 크기:
> - 2차원 벡터와 동일하게 실수부와 허수부의 각 요소를 제곱해 더한 다음, 제곱근을 취하는 방식으로 계산한다
> - 구한 복소수의 크기는 실수와 동일하게 절댓값 기호 $||$를 써서 나타낸다
> - 복소수의 노름(Norm)이라고도 부른다
> - $|(a, b)| = |(a, -b)| = \sqrt{a^2 + b^2}$
> 
> 단위 복소수(Unit complex number):
> - 크기가 1인 복소수
> 
> 켤레 복소수(Conjugate complex number):
> - 임의의 복소수를 $c$라고 하면 $c$의 켤레 복소수는 * 첨자 기호를 사용한 $c^*$나 $\overline{c}$로 표시한다
> - 임의의 복소수 $a + bi$의 켤레 복소수 $c^*$는 다음과 같이 정의할 수 있다       
> $c = a + bi = (a, b)$       
> $c^* = a - bi = (a, b)$
> - 켤레 복소수의 기호는 연산처럼 사용할 수 있으며, 다음 성질이 성립된다      
> $(c^*)* = c$        
> $c^*c = cc^*$       
> $(c_1c_2)^* = c_2^*c_1^*$
> - 어떤 복소수에 그 켤레 복소수를 서로 곱하면 해당 복소수의 크기를 제곱한 값을 얻을 수 있다      
> $cc^* = (a + bi) \cdot (a - bi) = a^2 + b^2 = |c|^2$
> 
> 복소수 곱셈의 역원:
> - 임의의 복소수 $c$에 대한 곱셈의 역원을 $c^{-1}$라고 할 때, 그 역원의 분모와 분자에 각각 켤레 복소수를 곱한다      
> $c^{-1} = \frac{1}{c} = \frac{c^*}{cc^*}$
> - 켤레 복소수의 성질에 따라 분모의 허수부가 제거되면서 역원의 표현이 가능해진다 
> - 임의의 복소수 $(a, b)$에 대한 곱셈의 역원을 구하는 식     
> $(a + bi)^{-1} = \frac{1}{(a + bi)} = \frac{(a - bi)}{(a + bi)(a - bi)} = \frac{(a - bi)}{(a^2 + b^2)}$
> - 복소수 $c$에 대한 곱셈의 역원 $c^{-1}$는 다음과 같이 켤레 복소수와 복소수 크기에 관한 식으로 나타낼 수 있다       
> $c^{-1} = \frac{c^*}{|c|^2}$        
> - 해당 복소수 크기가 1인 단위 복소수라면 분모의 값은 1이 된다       
> 따라서 단위 복소수의 곱셈 역원은 바로 켤레 복소수가 된다    
> - 복소수 집합은 덧셈과 곱셈에 대해 교환법칙, 결합법칙, 분배법칙이 성립되며 덧셈과 곱셈의 항등원과 역원까지 존재하므로 체의 구조를 만족한다

* * *

[본문](/README-ORIGIN.md/#422-복소수의-구조)

# 43. 복소평면
### 선요약

> 복소평면(Complex plane):
> - 실수부에 해다하는 실수축과 허수부에 해당하는 허수축을 직각으로 교차시켜 표현하는 방식
> - 복소평면의 두 축의 이름을 순서대로 실수축($Re$)과 허수축($Im$)으로 설정하면 순서쌍으로 표현한 복소수 $(a, b)$는 좌표처럼 평면 상에 표현할 수 있다
> - 크기가 1인 단위 복소수를 모아 복소평면에서 표현하면 단위원의 형태가 만들어진다

* * *

[본문](/README-ORIGIN.md/#43-복소평면)

# 43.1. 단위 복소수와의 곱
### 선요약

> 단위 복소수 곱셈의 성질:
> - 허수부가 0인 임의의 복소수 $(a, 0)$에 $i$라는 단위 복소수를 곱하면 다음과 같이 전개된다       
> $(a + 0i) \cdot (0 + i) = (0 + ai) = (0, a)$
> - 실수 $a$와 허수 $i$와의 곱셈 연산의 결과 $(0, a)$를 복소평면 상에 나타내보면 복소수 $(a, 0)$을 $90^\circ$ 회전시킨 결과와 같다
> - 복소수에 단위 복소수를 반복해서 곱하면 원래 값으로 돌아온다
> - 임의의 복소수에 단위 복소수 $i$를 곱한 결과는 해당 복소수를 $90^\circ$ 회전시킨 결과와 같다
> - 임의의 복소수 $(a, b)$에 복소수 $i$를 곱한 결과는 항상 실수부와 허수부의 값이 바뀌어 다음과 같은 식으로 표현된다      
> $(a, b) \cdot (0, 1) = (-b, a)$
> - 삼각함수의 공식 $\cos^2\theta + \sin^2\theta = 1$을 이용해 단위원을 형성하는 임의의 단위 복소수 $(a, b)$를 다음과 같이 삼각함수로 표현할 수 있다      
> $(a, b) = \cos\theta + i\sin\theta = (\cos\theta, \sin\theta)$
> - 삼각함수로 나타낸 단위 복소수에 임의의 복소수 $(x, y)$를 곱하면 복소수의 곱셈 식은 다음과 같이 전개된다       
> $(\cos\theta, \sin\theta) \cdot (x, y) = (x \cos\theta - y \sin\theta, y \cos\theta + x \sin\theta)$        
> 이는 2차원 공간의 회전행렬 $R$에 2차원 벡터 $(x, y)$를 곱한 결과와 같다     
> 따라서 임의의 복소수에 단위 복소수를 곱하는 것은 복소평면에서의 회전 변환을 의미한다
> - 서로 다른 각을 갖는 2개의 단위 복소수를 곱한 결과는 다음과 같다       
> $(\cos\alpha, \sin\alpha) \cdot (\cos\beta, \sin\beta) = (\cos\alpha\cos\beta - \sin\alpha\sin\beta, \sin\alpha\cos\beta + \sin\beta\cos\alpha)$        
> 위 식은 삼각함수의 덧셈 정리에 의해 다음과 같이 간단하게 표기된다       
> $(\cos(\alpha + \beta), \sin(\alpha + \beta))$      
> 이로써 서로 다른 두 각을 회전 변환한 후 곱셈 연산을 하는 것은 두 각의 합을 회전 변환하는 것과 동일함을 확인할 수 있다
> - 복소수 곱셈의 항등원은 실수에서의 곱셈의 항등원과 동일하게 1이다      
> 복소수 1 역시 단위 복소수로서, 이를 삼각함수로 표현하면 다음과 같이 각 $0^\circ$에 대응하는 수다        
> $(1, 0) = (\cos0^\circ, \sin0^\circ)$       
> 따라서 곱셈의 항등원을 곱한다는 의미는 아무런 변화가 일어나지 않는 $0^\circ$의 회전 변환이라 해석할 수 있다
> - 실수에서 크기가 1인 수는 오직 1과 -1 두가지만 존재한다        
> 이 두 수를 한 차원 높은 복소수에서 바라보면 각각은 $(1, 0)$과 $(-1, 0)$에 대응되고, 이들과의 곱은 각각 $0^\circ$와 $180^\circ$의 회전 변환으로 해석할 수 있다

* * *

[본문](/README-ORIGIN.md/#431-단위-복소수와의-곱)

# 43.2. 켤레 복소수의 회전 변환
### 선요약

> 복소평면에서 켤레 복소수의 의미:
> - 임의의 복소수와 그 켤레 복소수는 실수부 축($Re$)을 중심으로 서로 대칭된 형태를 이룬다
> - 단위 복소수를 $(\cos\theta, \sin\theta)$라고 표현할 때 이의 켤레 복소수는 $(\cos\theta, -\sin\theta)$가 된다      
> 삼각함수의 성질을 활용하면 켤레 복소수는 다음과 같이 표현할 수 있다     
> $(\cos\theta, -\sin\theta) = (\cos(-\theta), \sin(-\theta))$        
> 따라서 단위 복소수가 실수 축에 위치한 단위 복소수 $(1, 0)$을 각 $\theta$만큼 회전한 수를 의미한다면, 켤레 복소수는 반대 방향인 $-\theta$만큼 회전한 수를 의미한다
> - 임의의 복소수 $(a, b)$에 단위 복소수를 곱하면 반시계 방향의 회전이 발생하는 데 반해, 단위 복소수의 켤레 복소수를 곱하면 시계 방향의 회전이 발생한다
> - 단위 복소수와 그 켤레 복소수를 곱한 값은 복소수의 크기의 제곱이므로 1이 된다      
> $c \cdot c^* = a^2 + b^2 = \sin^2\theta + \cos^2\theta = 1$     
> 이 식을 변환의 관점에서 해석하면 각 $\theta$만큼 회전한 후에 바로 $-\theta$만큼 거꾸로 회전하는 변환을 의미한다     
> 이 결과는 아무런 회전도 일어나지 않는 $0^\circ$ 회전 변환을 의미하므로 복소수 곱셈의 항등원 $(1, 0)$이 됨을 확인할 수 있다

* * *

[본문](/README-ORIGIN.md/#432-켤레-복소수의-회전-변환)

# 44. 복소수와 행렬의 관계
### 선요약

> 복소수의 2차원 행렬 대응:
> - 복소수를 수의 관점이 아닌 변환의 관점에서 바라본다면 2차원 복소평면 상의 복소수는 2차원 행렬에 대응된다
> - 회전을 수행하는 단위 복소수와 2차원의 회전 변환행렬이 동일하다고 가정하고 수식을 전개한 뒤 $\cos\theta$와 $\sin\theta$에 대해 분리해 정리하면 실수부에 대응하는 행렬 $I$와 허수 $i$에 대응하는 행렬 $J$를 확인할 수 있다
> - 실수부에 대응하는 행렬 $I$는 어떤 수에 곱했을 때 아무 변화가 없는 항등행렬이고, 이는 곱셈의 항등원 1과 동등한 개념이다        
> 허수 $i$에 대응하는 행렬 $J$는 $90^\circ$ 회전 변환행렬인데 이를 두 번 곱하면 $-I$가 나오며, 이는 $-1$에 대응한다고 볼 수 있다      
> 이는 두 번 곱하면 $-1$이 나오는 허수 단위의 성질과도 일치한다
> 
> $$\cos\theta + i\sin\theta = 
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta \\
\end{bmatrix}$$
> 
> $$\cos\theta + i\sin\theta =
\cos\theta \cdot
\begin{bmatrix}
1 & 0 \\
0 & 1 \\
\end{bmatrix} +
\sin\theta \cdot 
\begin{bmatrix}
0 & -1 \\
1 & 0 \\
\end{bmatrix}$$
> 
> $$I =
\begin{bmatrix}
1 & 0 \\
0 & 1 \\
\end{bmatrix}$$
> 
> $$J = 
\begin{bmatrix}
0 & -1 \\
1 & 0 \\
\end{bmatrix}$$
> 
> $$J \cdot J =
\begin{bmatrix}
-1 & 0 \\
0 & -1 \\
\end{bmatrix} = -I$$
> 
> $$i \cdot i = -1$$

* * *

[본문](/README-ORIGIN.md/#44-복소수와-행렬의-관계)

# 45. 자연지수함수
### 선요약

> 오일러 공식:
> - $e^{i\theta} = \cos\theta + i\sin\theta$
> - 좌변에 위치한 자연지수함수의 밑을 무리수 $e$라고 한다

* * *

[본문](/README-ORIGIN.md/#45-자연지수함수)

# 45.1. 무리수 e
### 선요약

> 무리수 $e$:  
> - 무리수 $e$는 복리로 얻을 수 있는 수익을 연구하다가 발견했으며, 다음 식에 굉장히 큰 값을 $x$값에 대입할수록 이의 결괏값은 특정 상수에 근접한다는 사실을 알아내게 되었다        
> $y = (1 + \frac{1}{x})^x$
> - 위 식의 $x$에 양의 실수를 대입해보면, $x$값이 증가하면 $y$값도 증가하지만, $x$값이 증가할수록 $y$의 증가량은 서서히 줄어들고 $x$가 굉장히 커질수록 2와 3사이에 있는 어떤 특정한 수에 근접하게 된다        
> $x$가 굉장히 커졌을 때 $y$값은 약 $2.7182818...$에 근접하며, 이 수를 무리수 $e$라고 부른다
> - 무리수 $e$는 극한(Limit)과 무한대($\infty$)의 개념을 사용해 다음과 같이 표현할 수 있다        
> $e = \lim_{x \rightarrow \infty}(1 + \frac{1}{x})^x$        
> $\infty$로 표시하는 무한대(Infinity)란 특정한 수를 가리키는 것이 아니고, 어떤 실수보다도 큰 상태를 의미한다
> - 극한이란 어떤 값 $x$가 지정한 값 $a$에 한없이 가까워질 때 함수 $f(x)$가 한없이 가까워지는 값 $L$을 의미하며, 이는 다음의 수식으로 표현한다        
> $L = \lim_{x \rightarrow a}f(x)$
> 
> - 수렴(Converge): 극한의 결괏값이 특정한 값에 한없이 가까워진다면 이를 어떤 값에 수렴한다고 표현한다
> - 발산(Diverge): 극한의 결괏값이 특정한 값에 수렴하지 않고 무한대로 증가하거나 여러 값들을 오고가면 발산한다고 표현한다
> 
> 극한과 무한대의 개념을 사용해 표현한 무리수 $e$ 식에서 함수 $(1 + \frac{1}{x})^x$에 사용하는 입력이 한없이 크면 그 결과는 무리수 $e$에 수렴한다고 설명할 수 있다

* * *

[본문](/README-ORIGIN.md/#451-무리수-e)

# 45.2. 자연지수함수
### 선요약

> - 거듭제곱(Exponentiation): 같은 수를 여러 번 곱하는 작업
> - 지수(Exponent): 거듭제곱에서 곱하는 횟수
> - 밑(Base): 거듭제곱에서 곱하는 수      
> 예를 들어 3을 5번 거듭제곱한 식은 다음과 같이 지수와 밑을 사용해 $3^5$으로 짧게 표기한다        
> $3^5 = 3 \cdot 3 \cdot 3 \cdot 3 \cdot 3$
> - 지수법칙(Law of exponents): 거듭제곱을 구성하는 밑과 지수가 가지는 연산의 특징
> 
> 0보다 큰 수 무리수 $e$에 통용되는 3가지 지수법칙:
> 1. 밑이 같은 거듭제곱 간의 곱셈은 지수를 더한 거듭제곱과 동일하다        
> $a^m \cdot a^n = a^{m + n}$
> 2. 거듭제곱의 거듭제곱은 지수를 곱한 거듭제곱과 동일하다         
> $(a^m)^n = a^{m \cdot n}$       
> 거듭제곱의 개념은 수를 세는 자연수에서 비롯됐지만, 자연수가 아닌 0으로도 확장이 가능하다        
> 곱셈의 항등원 1을 활용해 0의 거듭제곱의 값은 다음과 같이 유도할 수 있다     
> $a^m = a^{(m + 0)} = a^m \cdot a^0 = a^m \cdot 1$       
> 따라서 다음과 같은 세 번째 지수법칙이 성립한다
> 3. 지수가 0인 거듭제곱은 항상 1의 값을 갖는다        
> $a^0 = 1$
> 
> - 지수함수(Exponential function): 거듭제곱의 지수에 미지수 $x$를 대입해 만든 함수       
> 밑이 $a$인 지수함수는 다음과 같이 표시한다      
> $f(x) = a^x$        
> 지수법칙에 따라 지수함수의 $x$값이 0이면 출력은 항상 1이 된다       
> 그러므로 밑이 0보다 큰 지수함수의 그래프는 언제나 좌표 $(0, 1)$을 지난다
> - 자연지수함수(Natural exponential function): 무리수 $e$를 밑으로 하는 지수함수     
> $f(x) = e^x$        
> 자연지수함수 $y = e^x$는 언제나 $(0, 1)$을 지나며 그래프를 그려보면 $x$가 커질수록 급격히 증가하는 형태를 띤다

* * *

[본문](/README-ORIGIN.md/#452-자연지수함수)

# 46. 미분
### 선요약

> - 미분(Differentiation): 미분 가능한 함수를 대상으로 특정 지점에서의 접선의 기울기를 측정하는 작업      
> 미분 가능한 함수는 뾰족점이 없이 끊이지 않고 연속으로 이어져 있는 함수다        
> 자연지수함수, $\sin$ 함수, $\cos$ 함수도 모두 미분 가능한 함수다
> - 할선(Secant line): 어떤 미분 가능한 함수가 주어졌을 때 $x$값 $a$와 $b$에 대응되는 두 좌표를 연결해 만든 직선      
> 할선의 기울기는 다음과 같이 구할 수 있다        
> $m = \frac{f(b) - f(a)}{b - a}$     
> 여기서 $a$를 고정시킨 상태에서 $b$를 서서히 $a$로 이동시킨다고 가정하면, $b$를 $a$로 이동시킴에 따라 할선의 기울기는 시시각각 변화한다      
> $b$ 값이 왼쪽으로 이동해 $a$에 도달하면 할선의 기울기를 구하는 식의 분모 값은 0이 되어 할선은 더 이상 존재하지 않게 된다        
> 하지만 $b$가 $a$에 한없이 가깝게 접근했다면, 할선은 여전히 존재하며, 마치 $a$ 지점에서의 기울기처럼 보인다
> - 접선(Tangent line): 한없이 가까워지는 개념을 사용해 특정 지점에서의 기울기를 나타내는 선      
> 접선의 개념은 무리수 $e$에서 언급한 극한의 한없이 가까워지는 성질과 동일하다        
> 따라서 $b$가 $a$로 한없이 가까워질 때 접선의 기울기 $m$ 값은 극한을 적용해 다음과 같이 계산한다     
> $m = \lim_{b \rightarrow a}\frac{f(b) - f(a)}{b - a}$       
> 위 식에서 $a$에 한없이 가까워진 $b$ 값은 $a$에서 한없이 작은 값 $h$를 더한 값과 같다        
> 따라서 이 식에서 $f(b)$의 값을 $f(a + h)$로 바꾸고 $b - a$를 $h$로 바꾸면 접선식은 다음과 같이 바꿔 표현할 수 있다      
> $m = \lim_{h \rightarrow 0}\frac{f(a + h) - f(a)}{h}$       
> 이 값을 $a$에서의 미분 계수(Differential coefficient)라고 한다

* * *

[본문](/README-ORIGIN.md/#46-미분)

# 46.1. 도함수
### 선요약

> 도함수(Derivative):
> - 함수가 모든 구간에서 미분이 가능하다면 이 개념을 확대해 임의의 수에 대해 미분 계수를 구할 수 있는 수식이 만들어진다       
> 이렇게 임의의 수 $x$에 대한 미분 계수를 구할 수 있도록 일반화한 함수를 도함수 또는 미분이라고 한다
> - 함수 $f(x)$의 도함수는 기호 $f'(x)$로 표시한다
> - 임의의 수 $a$에서의 미분 계수를 구하는 데 사용한 식을 임의 수 $x$에 대해 정리한 도함수 식은 다음과 같다       
> $f'(x) = \lim_{h \rightarrow 0}\frac{f(x + h) - f(x)}{h}$
> 
> 상수함수의 도함수:
> - 정의역과 무관하게 항상 일정한 값을 가지는 함수를 상수함수라고 한다
> - 일정한 값 $c$의 상수함수는 다음의 수식으로 나타낸다       
> $f(x) = c$
> - 상수함수의 그래프는 $x$축과 수평한 선의 형태를 띤다
> - 상수함수는 모든 정의역의 원소에 대해 항상 상수 $c$가 나온다       
> 따라서 상수함수의 도함수를 계산하면 그 결과는 언제나 0이 된다       
> 이는 상수함수의 모든 $x$에 대한 접선의 기울기가 0임을 뜻한다
> 
> 극한의 성질 6가지:
> - 두 함수 합의 극한값은 각 극한값의 합과 같다       
> $\lim_{x \rightarrow a}[f(x) + g(x)] = \lim_{x \rightarrow a}f(x) + \lim_{x \rightarrow a}g(x)$
> - 상수와 함수 곱의 극한값은 함수 극한값에 상수를 곱한 것과 같다     
> $\lim_{x \rightarrow a}cf(x) = c\lim_{x \rightarrow a}f(x)$
> - 두 함수 곱의 극한값은 각 극한값의 곱과 같다       
> $\lim_{x \rightarrow a}[f(x) \cdot g(x)] = \lim_{x \rightarrow a}f(x) \cdot \lim_{x \rightarrow a}g(x)$
> - 두 함수 나눗셈의 극한값은 각 극한값의 나눗셈과 동일하다       
> 단 분모의 극한값은 0이 아니어야 한다        
> $\lim_{x \rightarrow a}[\frac{f(x)}{g(x)}] = \frac{\lim_{x \rightarrow a}f(x)}{\lim_{x \rightarrow a}g(x)}$
> - 함수를 거듭제곱한 극한값은 극한값을 거듭제곱한 값과 같다      
> $\lim_{x \rightarrow a}[f(x)]^n = [\lim_{x \rightarrow a}f(x)]^n$
> - 세 함수의 대소 관계가 $g(x) \leq f(x) \leq h(x)$와 같을 때 양변 $g(x)$와 $h(x)$의 극한값이 같다면 가운데 위치한 함수 $f(x)$의 극한값도 같다       
> 즉 $lim_{x \rightarrow a}g(x) = \lim_{x \rightarrow a}h(x) = L$이면 $lim_{x \rightarrow a}f(x) = L$이 성립한다      
> 이를 조임 정리(Squeeze theorem)라고 한다
> 
> 거듭제곱 함수의 도함수:
> - $f(x) = x^n$의 도함수는 다음과 같이 전개된다      
> $f'(x) = n \cdot x^{n - 1}$

* * *

[본문](/README-ORIGIN.md/#461-도함수)

# 46.2. 자연지수함수의 도함수
***자연지수함수*** $f(x) = e^x$***의 도함수는 다음과 같이 원함수와 동일하다는 특징을 가진다***.

$$f'(x) = e^x$$

이의 극한을 구하기 전에 무리수 $e$의 극한식으로부터 다음 수식을 유도한다.

###### 식 13-8

$$\frac{\lim_{h \rightarrow 0}(e^h - 1)}{\lim_{h \rightarrow 0}h} = 1$$

[식 13-2](#식-13-2)에서 한없이 커지는 $x$를 $\frac{1}{h}$로 바꾸면 $\frac{1}{h}$는 0으로 수렴하고 무리수 $e$의 극한식은 다음과 같이 바꿔쓸 수 있다.

$$e = \lim_{h \rightarrow 0}(1 + h)^{\frac{1}{h}}$$

여기서 좌변에도 극한을 취한다.      
이 경우 $e$는 $h$와 관련없는 상수이므로 다음과 같이 극한을 대입해도 그 결과는 동일하다.

$$\lim_{h \rightarrow 0}e = \lim_{h \rightarrow 0}(1 + h)^{\frac{1}{h}}$$

극한의 성질 5를 사용해 양변에 $h$승을 적용하면 다음과 같이 바꿀 수 있다.

$$\lim_{h \rightarrow 0}e^h = \lim_{h \rightarrow 0}(1 + h)$$

우변의 극한식은 극한의 성질 1에 의해 다음과 같이 분리된다.

$$\lim_{h \rightarrow 0}e^h = \lim_{h \rightarrow 0}1 + \lim_{h \rightarrow 0}h$$

여기서 분리된 상수함수항을 좌변으로 옮기면 다음과 같다.

$$\lim_{h \rightarrow 0}(e^h - 1) = \lim_{h \rightarrow 0}h$$

이로써 [식 13-8](#식-13-8)이 성립함을 알 수 있다.   
[식 13-8](#식-13-8)을 활용해 자연지수함수의 도함수를 구해보자.      
[식 13-6](#식-13-6)에 자연지수함수 $f(x) = e^x$를 대입해 전개하면 다음과 같다.

$$
\begin{matrix}
f'(x) &=& \lim_{h \rightarrow 0}\frac{e^{x + h} - e^x}{h} \\
&=& \lim_{h \rightarrow 0}\frac{e^x \cdot e^h - e^x}{h} \\
&=& \lim_{h \rightarrow 0}\frac{e^x(e^h - 1)}{h} \\
&=& e^x \cdot \lim_{h \rightarrow 0}\frac{e^h - 1}{h} \\
&=& e^x \cdot \frac{\lim_{h \rightarrow 0}(e^h - 1)}{\lim_{h \rightarrow 0}h} \\
&=& e^x
\end{matrix}
$$

1. 지수법칙을 사용해 분리한다.
2. $e^x$로 묶어준다.
3. $h$와 관련없는 $e^x$는 상수로 취급할 수 있으므로 극한의 성질 2를 사용해 극한식 밖으로 빼낸다.
4. 극한의 성질 4를 사용해 분모와 분자를 각각 극한값으로 분리한다.
5. [식 13-8](#식-13-8)에 의해 극한값은 1로 수렴한다.

이로써 ***자연지수함수의 도함수는 원함수와 동일함***을 확인할 수 있다.

$$f'(x) = e^x = f(x)$$

함수를 미분했을 때 그 결과가 원함수와 동일하다면 그 함수는 몇 번을 미분하더라도 그 결과는 언제나 원함수와 동일하게 유지된다.    
따라서 ***자연지수함수는 무한번 미분 가능하다***는 성질을 가진다.

# 46.3. sin 함수와 cos 함수의 도함수
삼각함수의 $\sin$ 함수와 $\cos$ 함수의 도함수를 구하기에 앞서 다음 극한식을 유도한다.

###### 식 13-9

$$\lim_{h \rightarrow 0}\frac{\sin h}{h} = 1$$

[식 13-9](#식-13-9)는 원과 부채꼴의 넓이를 구하는 공식으로부터 유도할 수 있다.      
***원(Circle)*** 의 넓이 $Area(C)$를 구하는 공식은 다음과 같다.

$$Area(C) = \pi \cdot r^2$$

원을 구성하는 각은 $2\pi$이므로 1(rad)에 해당하는 ***부채꼴(Circular Sector)*** 의 넓이는 $\pi r^2$에서 $2\pi$를 나눈 $\frac{1}{2}r^2$이 된다.     
부채꼴의 넓이는 각의 크기에 비례해 커지므로 중심각이 $\theta$(rad)인 부채꼴의 넓이 $Area(CS)$는 다음과 같다.

###### 식 13-10

$$Area(CS) = \frac{\theta}{2}r^2$$

> 주의:     
각의 범위를 실수 전 영역으로 사용하면 [식 13-10](#식-13-10)은 음수가 나올 수 있다.      
그런데 측정량인 넓이는 음수가 나올 수 없으므로, 일반적으로 [식 13-10](#식-13-10)에 절댓값을 취해줘야 한다.

[그림 13-7](#식-13-7)과 같이 원점 $O$를 중심으로 반지름이 1이고 중심각이 $\theta$(rad)인 부채꼴의 넓이는 $\frac{\theta}{2}$가 됨을 알 수 있다.    
이 부채꼴의 이름을 $CS_1$으로 지정하면 넓이는 다음과 같다.

$$Area(CS_1) = \frac{\theta}{2}$$

###### 그림 13-7 반지름이 1이고 중심각이 세타인 부채꼴의 넓이
![반지름이 1이고 중심각이 세타인 부채꼴의 넓이](/img/)

[그림 13-8](#그림-13-8-부채꼴에-포함된-삼각형-oab의-넓이)과 같이 부채꼴 $CS_1$ 내부에 들어가는 삼각형 $T$를 만든다.   
부채꼴의 점 $A$에서 수선을 내려 밑변에 닿는 점을 $B$라고 하면, 밑변의 길이는 1이고 높이에 해당하는 선분 $\overline{AB}$의 길이는 $\sin\theta$가 되어 $T$의 넓이는 다음과 같이 계산된다.

$$Area(T) = \frac{\sin\theta}{2}$$

###### 그림 13-8 부채꼴에 포함된 삼각형 OAB의 넓이
![부채꼴에 포함된 삼각형 OAB의 넓이](/img/)

[그림 13-9](#그림-13-9-삼각형에-포함된-부채꼴의-넓이)와 같이 선분 $\overline{OB}$를 반지름으로 하는 작은 부채꼴 $CS_2$을 만든다.     
작은 부채꼴 $CS_2$의 영역은 언제나 삼각형 내부에 속하게 된다.   
선분 $\overline{OB}$의 길이는 $\cos\theta$이므로 이를 반지름으로 하는 부채꼴 $CS_2$의 넓이는 [식 13-10](#식-13-10)에 의해 다음과 같이 계산된다.

$$Area(CS_2) = \frac{\theta}{2} \cdot \cos^2 \theta$$

###### 그림 13-9 삼각형에 포함된 부채꼴의 넓이
![삼각형에 포함된 부채꼴의 넓이](/img/)

부채꼴에 관련된 세 영역의 넓이 $Area(CS_1)$, $Area(T)$, $Area(CS_2)$를 구하는 공식은 다음과 같은 대소 관계가 성립된다.

$$\frac{\theta}{2} \cdot \cos^2 \theta \leq \frac{\sin \theta}{2} \leq \frac{\theta}{2}$$

여기서 넓이 $Area(CS_1)$의 역수 $\frac{2}{\theta}$를 곱해 부등식을 정리하면 다음과 같다.

$$\cos^2\theta \leq \frac{\sin\theta}{\theta} \leq 1$$

$\theta$를 $h$로 변경한 후 우변의 극한값 $\lim_{h \rightarrow 0}1$과 좌변의 극한값 $\lim_{h \rightarrow 0}\cos^2 h$를 구한다.

$$\lim_{h \rightarrow 0}\cos^2 h \leq \lim_{h \rightarrow 0}\frac{\sin h}{h} \leq \lim_{h \rightarrow 0}1$$

우변의 극한값 $\lim_{h \rightarrow 0}1$은 상수이므로 바로 1임을 확인할 수 있다.

좌변 $\lim_{h \rightarrow 0}\cos^2h$의 $\cos$ 함수는 각이 0도 수렴할 수록 그 값은 1에 수렴한다.     
따라서 이를 제곱한 극한값 역시 1에 수렴한다.        
극한의 성질 6으로 정리한 극한의 조임 정리에 의해 좌우의 극한값이 동일한 경우 가운데에 위치한 $\frac{\sin h}{h}$의 극한값 또한 1이 되어 [식 13-9](#식-13-9)가 성립함을 확인할 수 있다.       
여기에 추가로 알아두면 좋은 함수의 극한값은 다음과 같다.

###### 식 13-11

$$\lim_{h \rightarrow 0}\frac{\cos h - 1}{h} = 0$$

[식 13-11](#식-13-11)은 다음 과정을 거쳐서 유도된다.

$$
\begin{matrix}
\lim_{h \rightarrow 0}\frac{\cos h - 1}{h} &=& \lim_{h \rightarrow 0}\frac{(\cos h -1) \cdot (\cos h + 1)}{h \cdot (\cos h + 1)} \\
&=& \lim_{h \rightarrow 0}\frac{\cos^2 h - 1}{h \cdot (\cos h + 1)} \\
&=& \lim_{h \rightarrow 0}\frac{-\sin^2 h}{h \cdot (\cos h + 1)} \\
&=& \lim_{h \rightarrow 0}\sin h \cdot \lim_{h \rightarrow 0}\frac{-\sin h}{h} \cdot \lim_{h \rightarrow 0}\frac{1}{(\cos h + 1)} \\
&=& 0 \\
\end{matrix}
$$

1. 함수의 분자와 분모에 각각 $(\cos h + 1)$을 곱한다.
2. 분자에 삼각함수 공식 $\cos^2 \theta + \sin^2 \theta = 1$을 적용해 $-\sin^2 h$로 단순하게 만든다.
3. 극한의 성질 3을 사용해 각 극한을 곱으로 분리한다.
4. 각 극한값을 순서대로 구하면 0, 1, $\frac{1}{2}$이 되는데 이들을 곱하면 0이 된다.

[식 13-9](#식-13-9)와 [식 13-11](#식-13-11)을 사용해 삼각함수의 도함수를 하나씩 구한다.     
먼저 $f(x) = \sin x$라 할 때 이의 도함수를 확인한다.    

$$
\begin{matrix}
f'(x) &=& \lim_{h \rightarrow 0}\frac{\sin(x + h) - \sin x}{h} \\
&=& \lim_{h \rightarrow 0}\frac{\cos h \cdot \sin x + \cos x \cdot \sin h - \sin x}{h} \\
&=& \sin x \cdot \lim_{h \rightarrow 0}\frac{\cos h - 1}{h} + \cos x \cdot \lim_{h \rightarrow 0}\frac{\sin h}{h} \\
&=& \cos x \\
\end{matrix}
$$

1. 삼각함수의 덧셈 정리를 사용해 분리한다.
2. 극한식을 분리하고 $h$와 관련없는 $\sin x$와 $\cos x$는 극한식 밖으로 빼낸다.
3. 우변의 좌향 극한식에 [식 13-11](#식-13-11)을 적용하고 우향 극한식에는 [식 13-9](#식-13-9)를 적용하면 $\cos x$만 남는다.

따라서 $\sin$ 함수의 도함수는 $\cos$ 함수가 됨을 알 수 있다.    
함수 $f(x)$를 $\cos x$라 할 때 도함수를 구한다.

$$
\begin{matrix}
f'(x) &=& \lim_{h \rightarrow 0}\frac{\cos(x + h) - \cos(x)}{h} \\
&=& \lim_{h \rightarrow 0}\frac{\cos x \cdot \cos h - \sin x \cdot \sin h - \cos x}{h} \\
&=& \cos x \cdot \lim_{h \rightarrow 0}\frac{\cos h - 1}{h} - \sin x \cdot \lim_{h \rightarrow 0}\frac{\sin h}{h} \\
&=& -\sin x \\
\end{matrix}
$$

1. 삼각함수의 덧셈 정리를 사용해 분리한다.
2. 극한식을 분리하고 $h$와 관련없는 $\sin x$와 $\cos x$는 극한식 밖으로 빼낸다.
3. 우변의 좌항 극한식에 [식 13-11](#식-13-11)을 적용하면 $\cos x$만 남는다.

이는 앞서 구한 $\sin$ 함수의 도함수 전개와 유사하며 $\cos$ 함수의 도함수는 $-\sin x$가 됨을 알 수 있다.

$\sin$ 함수의 도함수는 $\cos$ 함수고 $\cos$ 함수의 도함수는 $-\sin$ 함수다.     
따라서 다음과 같은 식이 성립할 것이다.

$$f(x) = \sin x$$

$$f'(x) = \cos x$$

$$f''(x) = -\sin x$$

여기서 두 번 더 미분하면 원함수인 $\sin$ 함수로 돌아오게 된다.

$$f'''(x) = -\cos x$$

$$f^{(4)}(x) = \sin x$$

이렇게 네 번 미분했을 때 원함수로 돌아오는 성질은 $\cos$ 함수도 동일하다.

$$f(x) = \cos x$$

$$f'(x) = -\sin x$$

$$f''(x) = -\cos x$$

$$f'''(x) = \sin x$$

$$f^{(4)}(x) = \cos x$$

따라서 $\sin$ ***함수와*** $\cos$ ***함수는 네 번 미분하면 원함수로 돌아오기 때문에 자연지수함수와 동일한 성질을 가진 무한번 미분 가능한 함수다***.     
이들의 연관성은 급수를 통해 확인할 수 있다.

# 47. 급수
***오일러 공식에는 자연지수함수와 두 삼각함수의 미분이 사용된다***.   
***무한번 미분 가능하다는 공통점을 가진 세 함수는 각각 무한 급수로 표현***될 수 있고 세 함수가 모두 무한 급수로 표현되면 오일러 공식을 유도할 수 있다.    
무한번 미분 가능한 함수를 무한 급수로 표현하기 위해선 ***등비수열***에 대해 알아야 한다.

# 47.1. 등비수열
***수열(Sequence)*** 이란 규칙에 따라 순서에 맞게 수를 나열한 것이다.      
예를 들어 1부터 시작해서 1씩 커지는 자연수를 순서대로 나열하면 1, 2, 3, 4, ...로 이어지는 수열을 이룬다.    
이 수열은 자연수 집합과 유사하다.   
하지만 ***집합은 순서의 개념이 없고 중복을 허용하지 않는다***는 점에서 ***수열과는 엄연히 다른 개념***이다.     
이 중에서도 연속된 항들이 일정한 ***비(Ratio)*** 로 증가하는 수열을 ***등비수열(Geometric sequence)*** 이라고 하며, 등비수열 규칙에 사용된 비를 ***공비(Common ratio)*** 라고 한다.      
다음은 등비수열의 한 예시로, 연속된 두 항이 $\frac{1}{2}$배씩 증가하는 규칙을 가지므로 공비는 $\frac{1}{2}$이 된다.

$$\frac{1}{2}, \frac{1}{4}, \frac{1}{8}, \frac{1}{16}, \frac{1}{32}, ...$$

수열의 첫 번째 값을 ***초항(First term)*** 이라 부르며 $a$로 표기한다.     
공비는 $r$로, $n$번째의 항은 $a_n$으로 표기해, 다음과 같은 식으로 등비수열을 나타낸다.

$$a_n = a \cdot r^{n - 1}$$

등비수열의 $n + 1$번째 항과 $n$번째 항에 공비를 적용하면 다음과 같은 관계가 성립한다.

$$a_{n + 1} = a_n \cdot r$$

# 47.2. 급수
수열의 개념을 확장해 수열의 모든 값을 더한 것을 ***급수(Series)*** 라고 한다.      
초항 $a_0$와 $n$개의 요소로 구성된 수열의 급수는 시그마 기호($\sum$)를 활용해 간략히 표현한다.

$$\sum_{k = 0}^n a_k = a_0 + a_1 + a_2 + a_3 + ... + a_n$$

등비수열의 급수는 다음과 같이 표현할 수 있다.

$$\sum_{k = 0}^\infty a \cdot r^k$$

등비수열의 급수를 특별히 ***기하급수(Geometric series)*** 라고 한다.       
***기하급수는 무한대로 계속 증가하거나 특정 수로 수렴하는 성질이 있다***.     
공비가 $\frac{1}{2}$인 등비수열의 급수가 어떤 값 $s$에 수렴한다면 다음과 같이 표현할 수 있다.

$$s = \frac{1}{2} + \frac{1}{4} + \frac{1}{8} + \frac{1}{16} + \frac{1}{32} + ... \quad (1)$$

그렇다면 수렴하는 급수 값 $s$는 얼마인지 확인해보자.    
급수 값 $s$에 공비 $\frac{1}{2}$를 곱한 식은 다음과 같다.

$$\frac{1}{2}s = \frac{1}{2}(\frac{1}{2} + \frac{1}{4} + \frac{1}{8} + \frac{1}{16} + \frac{1}{32} + ...) \quad (2)$$

[1]에서 [2]를 빼면 좌변은 $\frac{1}{2}s$가 남고 우변은 $\frac{1}{2}$이 남는다.

$$\frac{1}{2}s = \frac{1}{2}$$

이 식이 만족하려면 $s$는 1이어야 하므로 급수 값은 1에 수렴한다.     
이 기하급수를 시각적으로 표현하면 [그림 13-10](#그림-13-10-무한한-기하급수의-수렴)과 같다.      
기하급수의 요소는 무한하지만 이를 모두 더한 값은 가로와 세로의 길이가 1인 정사각형의 넓이 1에 수렴하는 것을 확인할 수 있다.

###### 그림 13-10 무한한 기하급수의 수렴
![무한한 기하급수의 수렴](/img/)

위에서 계산한 기하급수를 구하는 과정을 일반화시켜 정리한다.     
등비수열의 초항을 $a$, 공비를 $r$이라고 했을 때, $n$개의 유한한 등비급수를 $s_n$으로 표현하면 다음 식이 성립된다.

$$s_n = a + ar + ar^2 + ar^3 + ... + ar^{n - 1} \quad (1)$$

[1]의 양변에 공비 $r$을 곱하면 다음과 같이 전개된다.

$$rs_n = ar + ar^2 + ar^3 + ... + ar^n \quad (2)$$

그리고 [1]에서 [2]를 빼면 다음 식이 나온다.

$$s_n - rs_n = a - ar^n$$

좌변을 $s_n$에 대해 묶으면 다음의 식이 유도된다.

$$
\begin{matrix}
s_n(1 - r) &=& a(1 - r^n) \\
s_n &=& \frac{a(1 - r^n)}{1 - r} \\
\end{matrix}
$$

기하급수는 무한 개의 요소를 가지므로 위 식의 $n$에 무한대의 극한을 설정하고 이를 전개해보자.

$$
\begin{matrix}
\lim_{n \rightarrow \infty} s_n &=& \lim_{n \rightarrow \infty} \frac{a(1 - r^n)}{1 - r} \\
&=& \frac{a}{1 - r} \cdot \lim_{n \rightarrow \infty}(1 - r^n) \\
&=& \frac{a}{1 - r} - \frac{a}{1 - r} \cdot \lim_{n \rightarrow \infty} r^n \\
\end{matrix}
$$

1. 극한의 성질 2에 따라 $n$이 들어가지 않는 상수를 빼낸다.
2. 극한의 성질 1에 따라 극한 내 두 항을 분리한다.

$\lim_{n \rightarrow \infty} s_n$의 극한값을 구하려면 공비 $r$이 가질 수 있는 값을 여러 개로 분리하고 각각에 대한 극한을 생각해야 한다.     
먼저 공비 $r$이 1이라면 $\frac{a}{1 - r}$의 분모가 0이 되어 극한값을 구할 수 없다.      
공비 $r$이 1인 경우의 무한급수는 어떻게 전개되는지 살펴보자.       
공비 $r$이 1이면 다음과 같이 기하급수는 $a$를 무한 번 더한 식이 되므로 급수 값은 무한대로 발산한다.

$$s_n = a + a + a + a + ...$$

$r$이 1이 아닌 경우를 생각해보면, 공비 $r$이 1이 아닌 경우 $\frac{a}{1 - r}$는 상수가 되므로 $\lim_{n \rightarrow \infty} s_n$의 극한값은 $\lim_{n \rightarrow \infty}$의 값에 따라 결정된다.

만일 공비 $r$의 크기가 1보다 크다면, 즉 $|r| > 1$인 경우에는 공비를 계속 곱할수록 크기도 계속 커져 $\lim_{n \rightarrow \infty} r^n$의 극한값은 발산한다.

$$
\begin{matrix}
-1.1^2 &=& 1.21 \\
-1.1^3 &=& -1.331 \\
-1.1^4 &=& 1.4641 \\
&...& \\
\end{matrix}
$$

공비 $r$의 크기가 1보다 작다면, 즉 $|r| < 1$인 경우에는 공비를 계속 곱할수록 그 값의 크기는 계속 작아져 이의 극한값은 0으로 수렴한다.

$$
\begin{matrix}
-0.9^2 &=& 0.81 \\
-0.9^3 &=& -0.729 \\
-9.9^4 &=& 0.6561 \\
&...& \\
\end{matrix}
$$

공비 $r$이 -1이면 $\lim_{n \rightarrow \infty} r^n$의 값은 일정한 값을 가지지 못하고 규칙적으로 1과 -1값을 오고간다.

$$
\begin{matrix}
-1^2 &=& 1 \\
-1^3 &=& -1 \\
-1^4 &=& 1 \\
&...& \\
\end{matrix}
$$

이러한 현상을 ***진동한다(Oscilate)*** 고 표현하는데, 이 역시 ***특정 값으로 수렴하지 않으므로 발산으로 취급***된다.

지금까지 살펴본 공비 $r$의 값에 따른 $\lim_{n \rightarrow \infty} s_n$의 성질을 정리하면 다음과 같다.

- $r = 1$인 경우에는 발산한다.
- $|r| > 1$인 경우에는 발산한다.
- $|r| < 1$인 경우에는 수렴한다.
- $r = -1$인 경우에는 발산한다.

이 중에서 기하급수가 수렴하기 위한 조건은 $|r| < 1$이다.    
공비가 $\frac{1}{2}$인 기하급수는 수렴 조건을 만족하기 때문에 $\lim_{n \rightarrow \infty} r^n$의 극한값은 0이 되어 $\frac{a}{1 - r}$에 수렴됐던 것이다.

기하급수에서 좀 더 확장된 형태의 급수에 대해 알아보자.      
기하급수는 더해지는 모든 항의 계수 $a$의 값이 모두 같았다.      
그런데 다음과 같이 항마다 계수가 다른 급수도 있는데, 이를 ***멱급수(Power series)*** 라고 한다.

$$\sum_{n = 0}^\infty a_n \cdot r^n = a_1 + a_2r + a_3r^2 + a_4r^3 + a_5r^4 + ...$$

즉 기하급수는 모든 계수의 값이 동일한 멱급수의 한 종류라고 할 수 있다.      
멱급수도 기하급수와 동일하게 특정 조건에 따라 수렴하거나 발산하는데, 이를 판정하기 위한 ***비판정법(Ratio test)*** 에 대해 알아야 한다.    
비판정법은 멱급수의 항의 계수가 일정한 규칙으로 전개되는 경우, 다음의 극한값을 구해 수렴, 발산 여부를 파악하는 방법이다.

$$L = \lim_{n \rightarrow \infty}|\frac{a_n + 1}{a_n}|$$

비판정법의 결과로 계산되는 $L$의 값은 다음과 같은 3가지 경우가 있다.

- $L$의 값이 1보다 작으면 급수는 언제나 수렴한다.
- $L$의 값이 1보다 크면 급수는 언제나 발산한다.
- $L$의 값이 1이면 수렴할 수도, 발산할 수도 있다.

기하 급수 예제를 멱급수의 관점에서 다시 살펴보면 기하 급수는 모든 계수의 값이 동일한 $a$이고 공비가 $r$인 멱급수의 형태를 띤다.

$$\sum_{n = 0}^\infty a \cdot r^n$$

이 식에 비판정법을 적용한 결과 값은 $n$과 무관하게 $|r|$이 나온다.

$$L = \lim_{n \rightarrow \infty}|\frac{a \cdot r^{n + 1}}{a \cdot r^n}| = |r|$$

급수가 수렴하기 위해서는 $L$의 값이 1보다 작아야 하는데 이는 $|r| < 1$을 의미한다.      
기하급수가 수렴하기 위한 조건과 동일하다.       
이와 같이 멱급수가 수렴하기 위해 $r$이 가져야 할 범위를 수렴구간이라고 하며, 범위의 절반인 1의 값을 ***수렴반지름(Radius of convergence)*** 이라고 한다.

각 항의 계수가 서로 다른 멱급수의 수렴 조건을 분석해보자.

$$\sum_{n = 1}^\infty \frac{r^n}{n} = x + \frac{1}{2}r^2 + \frac{1}{3}r^3 + \frac{1}{4}r^4 + ...$$

이 식에 비판정법을 적용하면 다음과 같이 전개된다.

$$
\begin{matrix}
L &=& \lim_{n \rightarrow \infty}|\frac{\frac{r^{n + 1}}{n + 1}}{\frac{r^n}{n}}| \\
&=& \lim_{n \rightarrow \infty}|r| \cdot \frac{n}{n + 1} \\
&=& |r| \cdot \lim_{n \rightarrow \infty} \frac{n}{n + 1} \\
&=& |r| \cdot \lim_{n \rightarrow \infty} \frac{(n + 1) - 1}{n + 1} \\
&=& |r| - |r| \cdot \lim_{n \rightarrow \infty} \frac{1}{n + 1} \\
&=& |r| \\
\end{matrix}
$$

이로써 해당 멱급수가 수렴하기 위한 조건은 $L = |r|$이 됨을 알 수 있다.      
따라서 위 멱금수 또한 기하 급수와 동일한 수렴반지름을 가짐을 알 수 있다.

# 47.3. 매클로린 급수
멱급수가 수렴하기 위한 조건을 알아봤으니, 이제 본격적으로 ***무한 미분 가능한 함수를 멱급수 형태로 바꾸는 방법***에 대해 알아야 한다.     
이러한 멱급수를 ***매클로린 급수(Macalurin series)*** 혹은 ***테일러 급수(Taylor series)*** 라고 한다.       
수렴하는 멱급수에서 공비 값을 $x$로 바꿔서 멱급수를 다음과 같은 함수 $f(x)$로 정의한다.

###### 식 13-12

$$f(x) = a_1 + a_2x + a_3x^2 + a_4x^3 + a_5x^4 + ...$$

이 멱급수에 대응되는 어떤 함수가 있다고 가정한다.   
그 함수가 무한 미분 가능하다면 멱급수의 도함수는 [식 13-7](#식-13-7)에서 살펴본 거듭제곱 함수의 미분을 사용해 다음과 같이 전개된다.

$$f'(x) = 1 \cdot a_2 + 2a_3x + 3a_4x^2 + 4a_5x^3 + ...$$

$$f''(x) = (2 \cdot 1)a_3 + (3 \cdot 2)a_4x + (4 \cdot 3)a_5x^2 + ...$$

$$f'''(x) = (3 \cdot 2 \cdot 1)a_4 + (4 \cdot 3 \cdot 2)a_5x + ...$$

원함수 $f(x)$를 $n$차 미분한 모든 도함수의 $x$값에 0을 대입하면 다음과 같이 멱급수를 구성하는 각 항의 계수값 $a_n$값과 일정한 규칙을 가지는 상수만 남는다.

###### 식 13-13

$$f(0) = a_1$$

$$f'(0) = 1 \cdot a_2$$

$$f''(0) = (2 \cdot 1)a_3$$

$$f'''(0) = (3 \cdot 2 \cdot 1)a_4$$

$$...$$

여기서 어떤 자연수보다 작은 모든 자연수의 곱을 ***계승(Factorial)*** 이라 부르는데, ! 기호를 사용해서 축약해 표현한다.     
계승을 수식으로 표현하면 다음과 같다.

$$n! = (n - 1)! \cdot n$$

$$\therefore (n - 1)! = \frac{n!}{n}$$

위의 식에서 0의 계승 0!의 값은 1임을 알 수 있다.

$$0! = (1 - 1)! = \frac{1!}{1} = 1$$

[식 13-13](#식-13-13)도 계승을 사용해 다음과 같이 간단히 표기할 수 있다.    

###### 식 13-14

$$f(0) = 0! \cdot a_1$$

$$f'(0) = 1! \cdot a_2$$

$$f''(0) = 2! \cdot a_3$$

$$f'''(0) = 3! \cdot a_4$$

$$...$$

[식 13-14](#식-13-14)의 각 도함수 식을 살펴보면 멱급수의 $n$번째 계수 $a_n$은 [식 13-15](#식-13-15)와 같이 함수 $f(x)$를 $n$번 미분한 도함수에 0을 대입한 값을 $n$ 계승 값으로 나눠주면 얻을 수 있다.

###### 식 13-15

$$a_n = \frac{f^{(n)}(0)}{n!}$$

[식 13-12](#식-13-12)의 멱급수 전개는 [식 13-16](#식-13-16)과 같이 $n$번 미분한 도함수에 0을 대입한 형태로 일반화할 수 있다.   
이를 매클로린 급수 또는 테일러 급수라고 한다.       
***매클로린 급수는 무한급수이므로 무한 미분 가능한 함수만이 이 수식을 만족한다***.

###### 식 13-16

$$f(x) = \frac{f(0)}{0!} + \frac{f'(0)}{1!}x + \frac{f''(0)}{2!}x^2 + \frac{f'''(0)}{3!}x^3 + ...$$

매클로린 급수의 표현 방법을 확인했으니 ***오일러 공식을 유도하는 데 필요한 자연지수함수,*** $\sin$ ***함수,*** $\cos$ ***함수***를 매클로린 급수 형식으로 전개하고 이들이 수렴하는지 확인한다.    
먼저 자연지수함수에 대해 알아보자.

$$f(x) = e^x$$

자연지수함수의 매클로린 급수는 다음과 같이 전개된다.

$$
\begin{matrix}
f(x) &=& \frac{f(0)}{0!} + \frac{f'(0)}{1!}x + \frac{f''(0)}{2!}x^2 + \frac{f'''(0)}{3!}x^3 + ... \\
&=& 1 + x + \frac{1}{2!}x^2 + \frac{1}{3!}x^3 + \frac{1}{4!}x^4 + \frac{1}{5!}x^5 + \frac{1}{6!}x^6 + \frac{1}{7!}x^7 ... \\
&=& \sum_{n = 0}^\infty \frac{x^n}{n!} \\
\end{matrix}
$$

자연지수함수에 대응하는 매클로린 급수가 수렴하는지 판단하기 위해 비판정법을 진행한다.

$$
\begin{matrix}
L &=& \lim_{n \rightarrow \infty} |\frac{\frac{x^{n + 1}}{(n + 1)!}}{\frac{x^n}{n!}}| \\
&=& \lim_{n \rightarrow \infty}|x| \cdot \frac{n!}{(n + 1)!} \\
&=& |x| \cdot \lim_{n \rightarrow \infty} \frac{1}{n + 1} \\
&=& |x| \cdot 0 \\
&=& 0 \\
\end{matrix}
$$

비판정을 진행한 결과는 0이 나오므로 해당 급수는 언제나 수렴함을 확인할 수 있다.     
따라서 ***자연지수함수의 매클로린 급수는 유효하다***.

###### 식 13-17

$$e^x = \sum_{n = 0}^\infty \frac{x^n}{n!}$$

$\sin$ 함수에 대해 진행한다.

$$f(x) = \sin x$$

$\sin$ 함수의 매클로린 급수는 다음과 같이 전개된다.

$$
\begin{matrix}
f(x) &=& \frac{f(0)}{0!} + \frac{f'(0)}{1!}x + \frac{f''(0)}{2!}x^2 + \frac{f'''(0)}{3!}x^3 + ... \\
&=& 0 + x - 0 - \frac{1}{3!}x^3 + 0 + \frac{1}{5!}x^5 - 0 - \frac{1}{7!}x^7 ... \\
&=& \sum_{n = 0}^\infty \frac{(-1)^nx^{2n + 1}}{(2n + 1)!} \\
\end{matrix}
$$

$\sin$ 함수에 대응하는 매클로린 급수의 비판정을 진행한다.

$$
\begin{matrix}
L &=& \lim_{n \rightarrow \infty}|\frac{\frac{(-1)^{n + 1}x^{2n + 3}}{(2n + 3)!}}{\frac{(-1)^nx^{2n + 1}}{(2n + 1)!}}| \\
&=& \lim_{n \rightarrow \infty}|x^2| \cdot \frac{(2n + 1)!}{(2n + 3)!} \\
&=& |x^2| \cdot \lim_{n \rightarrow \infty}\frac{1}{(2n + 3)(2n + 2)} \\
&=& 0 \\
\end{matrix}
$$

0이 나오므로 $\sin$ ***함수의 매클로린 급수는 유효함***을 확인할 수 있다.

###### 식 13-18

$$\sin x = \sum_{n = 0}^\infty \frac{(-1)^nx^{2n + 1}}{(2n + 1)!}$$

$\cos$ 함수에 대해 진행한다.

$$f(x) = \cos x$$

$\cos$ 함수의 매클로린 급수는 다음과 같이 전개된다.

$$
\begin{matrix}
f(x) &=& \frac{f(0)}{0!} + \frac{f'(0)}{1!}x + \frac{f''(0)}{2!}x^2 + \frac{f'''(0)}{3!}X^3 + ... \\
&=& 0 - x - \frac{1}{2!}x^2 + 0 + \frac{1}{4!}x^4 - 0 - \frac{1}{6!}x^6 ... \\
&=& \sum_{n = 0}^\infty \frac{(-1)^nx^{2n}}{(2n)!} \\
\end{matrix}
$$

$\cos$ 함수에 대응하는 매클로린 급수의 비판정을 진행해보면 $\sin$ 함수와 동일하게 0의 결과가 나옴을 확인할 수 있다.

$$
\begin{matrix}
L &=& \lim_{n \rightarrow \infty}|\frac{\frac{(-1)^{n + 1}x^{2n + 2}}{(2n + 2)!}}{\frac{(-1)^nx^{2n}}{(2n)!}} \\
&=& \lim_{n \rightarrow \infty}|x^2| \cdot \frac{(2n)!}{(2n + 2)!} \\
&=& |x^2| \cdot \lim_{n \rightarrow \infty} \frac{1}{(2n + 2)(2n + 1)} \\
&=& 0 \\
\end{matrix}
$$

따라서 $\cos$ 함수에 대응되는 매클로린 급수는 다음과 같다.

###### 식 13-19

$$\cos x = \sum_{n = 0}^\infty \frac{(-1)^nx^{2n}}{(2n)!}$$

> 참고: ***매클로린 급수의 활용***      
매클로린 급수는 컴퓨터에서 복잡한 함수의 근사값을 구할 때 유용하게 사용된다.    
예를 들어 $\sin$ 함수의 값을 컴퓨터에서 계산하고자 하는 경우 매클로린 급수를 사용하면 허용 가능한 오차 내의 이의 정밀한 값을 빠르게 계산할 수 있다.     
[식 13-18](#식-13-18)에서 $\sin$ 함수와 일치하는 매클로린 급수는 무한 개의 원소를 가지고 있으며 0을 제외한 급수식은 다음과 같다.
> 
> $$\sin x = x - \frac{1}{3!}x^3 + \frac{1}{5!}x^5 - \frac{1}{7!}x^7 ...$$
> 
> 여기서 첫항 $x$를 제외한 나머지 항을 모두 없앤다.
>
> $$\sin x \neq x$$
> 
> 함수 $f(x) = x$와 $f(x) = \sin x$의 그래프는 큰 차이가 있다.      
하지만 $f(x) = x$에 급수의 항을 하나씩 추가할수록 새로운 급수의 계산 결과는 $\sin$ 함수의 값과 점점 가까워진다.
> 
> $$\sin x \approx x - \frac{1}{3!}x^3 + \frac{1}{5!}x^5 - \frac{1}{7!}x^7$$
> 
> [그림 13-11](#그림-13-11-sin-함수와-매클로린-급수의-비교)에 $\sin$ 함수의 그래프와 한 단계씩 전개한 급수로 표현되는 함수를 비교했다.     
급수의 항을 하나씩 추가할 수록 함수의 모습은 $\sin$ 함수에 근접해지는 것을 확인할 수 있다.
> 
> ###### 그림 13-11 sin 함수와 매클로린 급수의 비교
> ![sin 함수와 매클로린 급수의 비교](/img/)     
> 
> 급수의 항을 충분히 추가하면 $\sin$ 함수 값과 급수 값 사이의 오차가 무의미한 수준까지 비슷해진다.      
그렇다면 각 급수항에 계승으로 나눈 상수를 미리 계산해두면, 급수는 덧셈과 곱셈으로만 구성된다.       
이는 컴퓨터로 굉장히 빠르게 계산할 수 있어 좀 더 효과적으로 함수 값을 구할 수 있다.

# 48. 오일러 공식
자연지수함수, $\sin$ 함수, $\cos$ 함수에 대응하는 매클로린 급수를 [식 13-17](#식-13-17), [식 13-18](#식-13-18), [식 13-19](#식-13-19)에 정리했고, 이들을 모으면 다음과 같다.

$$e^x = 1 + x + \frac{1}{2!}x^2 + \frac{1}{3!}x^3 + \frac{1}{4!}x^4 + \frac{1}{5!}x^5 + \frac{1}{6!}x^6 + \frac{1}{7!}x^7 ...$$

$$\sin x = 0 + x - 0 - \frac{1}{3!}x^3 + 0 + \frac{1}{5!}x^5 - 0 - \frac{1}{7!}x^7 ...$$

$$\cos x = 1 - 0 - \frac{1}{2!}x^2 + 0 + \frac{1}{4!}x^4 - 0 - \frac{1}{6!}x^6 + 0 ...$$

세 급수를 분석해서 서로 간의 연관성을 찾기 위해 먼저 $\sin$ 함수와 $\cos$ 함수에 대응하는 두 급수를 더한다.     
$\sin$ 함수는 매클로린 급수를 전개하는 과정에서 홀수항 부분이 0이 되고, $\cos$ 함수는 짝수항 부분이 0이 되다보니, $\sin$ 함수와 $\cos$ 함수의 매클로린 급수를 합하면 다음과 같이 서로에게 부족한 부분이 채워진다.

###### 식 13-20

$$\cos x + \sin x = 1 + x - \frac{1}{2!}x^2 - \frac{1}{3!}x^3 + \frac{1}{4!}x^4 + \frac{1}{5!}x^5 - \frac{1}{6!}x^6 - \frac{1}{7!}x^7 + ...$$

[식 13-20](#식-13-20)은 자연지수함수의 매클로린 급수와 유사한 형태가 되었지만 몇몇 항의 부호에서 차이가 발생한다.       

두 급수의 부호가 일치하려면 크기가 1이고 제곱하면 -1이 되는 수를 사용해야 한다.     
이러한 수는 실수에는 존재하지 않지만, 복소수의 허수 단위 $i$가 이를 만족한다.       
자연지수함수의 매클로린 급수에 허수 단위 $i$를 넣으면 다음과 같이 전개된다.

$$
\begin{matrix}
e^{ix} &=& 1 + ix + \frac{1}{2!}(ix)^2 + \frac{1}{3!}(ix)^3 + \frac{1}{4!}(ix)^4 + \frac{1}{5!}(ix)^5 + \frac{1}{6!}(ix)^6 + \frac{1}{7!}(ix)^7 + ... \\
&=& 1 + ix - \frac{1}{2!}x^2 - \frac{i}{3!}x^3 + \frac{1}{4!}x^4 + \frac{i}{5!}x^5 - \frac{1}{6!}x^6 - \frac{i}{7!}x^7 + ... \\
\end{matrix}
$$

자연지수함수에 허수 단위 $i$를 넣은 결과로 [식 13-20](#식-13-20)의 매클로린 급수와 동일한 부호가 만들어지는 것을 확인할 수 있다.

이제 $e^{ix}$의 매클로린 급수와 [식 13-20](#식-13-20)의 차이는 단지 짝수 항에 허수 단위 $i$가 붙어 있다는 것 뿐이다.    
$\cos x + \sin x$에서 짝수 항은 $\sin$ 함수가 담당하므로 $\sin$ 함수에 허수 $i$를 곱하면 비로소 오일러 공식의 모든 퍼즐이 맞춰진다.

###### 식 13-21

$$e^{ix} = \cos x + i \sin x$$

[식 13-21](#식-13-21)에서 $x$대신 각 $\theta$를 대입한다.   
그러면 다음과 같은 ***오일러 공식***이 유도된다.

$$e^{i\theta} = \cos \theta + i \sin \theta$$

우변의 식 $\cos \theta + i \sin \theta$는 ***복소평면에서 회전 변환을 담당하는 단위 복소수를 의미***한다.     
따라서 오일러 공식의 좌변에 위치한 $e^{i\theta}$는 ***복소평면에서의 회전 변환을 의미***한다.     
이로써 ***2차원 평면의 회전을 나타내는 방법***이 하나 더 추가됐다.

$$e^{i\theta} = (\cos \theta, \sin \theta) = 
\begin{bmatrix}
\cos \theta & -\sin \theta \\
\sin \theta & \cos \theta \\
\end{bmatrix}
$$

***행렬과 복소수를 사용해 표현했던 회전 변환***은 ***오일러 공식으로*** $e^{i\theta}$ ***라는 자연지수함수로 더욱 간단하게 표현***할 수 있게 되었다.       
예를 들어 각 $\alpha, \beta$의 회전 변환은 오일러 공식에 의해 각각 $e^{\alpha i}$와 $e^{\beta i}$로 표현할 수 있다.     
이 둘을 곱하면 $(\alpha + \beta)$의 회전 변환이 만들어지는데, 지수법칙에 의해 이 둘을 곱하면 자연스럽게 $e^{(\alpha + \beta)i}$가 만들어진다.

$$e^{(\alpha + \beta)i} = e^{\alpha i} \cdot e^{\beta i}$$

이러한 ***회전 변환을 단순화시키는 오일러 공식의 특징은 복잡한 4차원 공간의 회전을 단순화시켜 3차원 공간의 회전식을 유도하는 데 큰 역할을 한다***.

> 참고: ***세상에서 가장 아름다운 공식, 오일러 항등식***    
오일러 공식에서 $x$값에 $\pi$를 대입하면 다음과 같은 식이 성립된다.     
> 
> ###### 식 13-22
> 
> $$
\begin{matrix}
e^{i\pi} &=& \cos \pi + i \sin \pi \\
e^{i\pi} &=& -1 + 0 \\
e^{i\pi} + 1 &=& 0 \\
\end{matrix}$$
>
> 이 식은 오일러 항등식(Euler's identity)이라 불리며, 수학의 근간이 되는 5가지 특별한 상수 $e, \pi, i, 0, 1$을 하나씩 사용한다는 점에서 수학자들이 뽑은 세상에서 가장 아름다운 공식이라 일컬어진다.       
각 상수가 가지는 의미는 [표 13-2](#표-13-2-오일러-항등식이-가지는-의미)와 같다.
>
> ###### 표 13-2 오일러 항등식이 가지는 의미    
> 
> |상수|의미|
> |---|---|
> |0|덧셈의 항등원|
> |1|곱셈의 항등원|
> |$e$|무리수 $e$|
> |$\pi$|원주율|
> |$i$|허수|

# 49. 사원수 대수
***사원수는 복소수와 동일하게 허수를 사용하는 수의 집합***으로서, ***복소수가 하나의 실수부와 하나의 허수부로 구성***된 반면, ***사원수는 하나의 실수부와 세 개의 허수부로 구성***된다.       
***총 4가지 수 체계를 사용하기 때문에 사원수라고 한다***.

사원수에서는 세 허수부를 구성하는 단위를 각각 $i, j, k$로 표시한다.     

# 49.1. 사원수를 구성하는 세 허수
사원수는 3개의 허수부 $i, j, k$로 구성되어 있지만 이들은 모두 복소수의 허수 단위 $i$와 같은 성질을 가진다.

$$i^2 = -1$$

$$i^2 = j^2 = k^2 = -1$$

세 허수 중에서 두 허수의 곱은 다음과 같이 나머지 다른 허수에 대응되는데 이들은 회전의 순환 순서 $x \rightarrow y \rightarrow z \rightarrow x$와 유사하게 $i \rightarrow j \rightarrow k \rightarrow i$ 순서로 대응된다.

$$ij = k, jk - i, ki = j$$

이 식으로부터 $ij$의 값은 $k$가 되고 $kk$의 결과는 $-1$이므로 $ijk = -1$이라는 식이 성립한다.   
따라서 $ijk$ 값은 $-1$이 되며, 각 세 허수의 곱셈 결과는 다음과 같다.

$$ijk = jki = kij = -1$$

복소수가 $a + bi$의 형태를 가졌던 것처럼 사원수도 실수부와 허수부를 덧셈으로 묶고 실수를 사용해 허수부의 계수를 지정한다.       
실수부와 각 허수부의 계수를 $a, b, c, d$로 지정한 사원수는 다음과 같이 표현한다.

$$q = a + bi + cj + dk$$

사원수의 집합 기호는 $H$다.     
***사원수(Quaternion)*** 의 첫글자 $Q$는 유리수 집합에서 사용되고 있기 때문에, 사원수를 처음 고안한 수학자 윌리엄 로언 해밀턴(William Rowan Hamilton)의 이름에서 차용했다.     
***사원수는 복소수와 유사하게 덧셈과 곱셈이 존재하며, 체와 유사한 구조를 지닌다***.       

# 49.2. 사원수의 구조
사원수의 덧셈은 복소수와 유사하게 실수부와 각 허수부끼리 더하는 형태로 진행된다.

$$q_1 + q_2 = (a_1 + a_2) + (b_1 + b_2)i + (c_1 + c_2)j + (d_1 + d_2)k$$

사원수의 덧셈이 만족하는 성질은 다음과 같다.

- 결합법칙: $q_1 + (q_2 + q_3) = (q_1 + q_2) + q_3 \\ = (a_1 + a_2 + a_3) + (b_1 + b_2 + b_3)i + (c_1 + c_2 + c_3)j + (d_1 + d_2 + d_3)k$
- 교환법칙: $q_1 + q_2 = q_2 + q_1 = (a_1 + a_2) + (b_1 + b_2)i + (c_1 + c_2)j + (d_1 + d_2)k$
- 항등원: $(a + bi + cj + dk) + (0 + 0i + 0j + 0k) = (a + bi + cj + dk)$
- 역원: $(a + bi + cj + dk) + (-a - bi - cj - dk) = (0 + 0i + 0j + 0k)$

[표 14-1](#표-14-1-사원수의-덧셈-연산의-성질)에 사원수 덧셈의 성질을 정리했다.

###### 표 14-1 사원수의 덧셈 연산의 성질
|연산의 성질|만족 여부 및 값|
|---|---|
|덧셈에 대해 닫혀 있음|O|
|덧셈에 대한 교환법칙이 성립함|O|
|덧셈에 대한 결합법칙이 성립함|O|
|덧셈에 대한 항등원이 존재함|0|
|덧셈에 대한 역원이 존재함|$-(a + bi + cj + dk)$|

사원수의 곱셈은 ***해밀턴 곱(Hamilton product)*** 으로도 불리며 ***모든 요소를 교차해 곱하는 방식으로 진행***된다.       
사원수는 총 4가지 요소로 구성되므로 곱의 결과는 총 16가지 인자가 만들어지며, 임의의 두 사원수 $q_1$과 $q_2$의 곱셈 결과는 다음과 같다.

$$q_1 \cdot q_2 = (a_1a_2 - b_1b_2 - c_1c_2 - d_1d_2) + (a_1b_2 + a_2b_1 + c_1d_2 - d_1c_2)i \\ + (a_1c_2 + a_2c_1 + b_2d_1 - b_1d_2)j + (a_1d_2 + a_2d_1 + b_1c_2 - c_1b_2)k$$

사원수의 곱셈이 만족하는 성질은 다음과 같다.

- 결합법칙: $q_1 \cdot (q_2 \cdot q_3) = (q_1 \cdot q_2) \cdot q_3$
- 분배법칙: $q_1 \cdot (q_2 + q_3) = q_1 \cdot q_2 + q_1 \cdot q_3$
- 항등원: $(a + bi + cj + dk) \cdot (1 + 0i + 0j + 0k) = (a + bi + cj + dk)$

사원수 곱셈은 순서를 바꿔 계산하면 다음과 같이 결과가 달라진다.

$$q_2 \cdot q_1 = (a_1a_2 - b_1b_2 - c_1c_2 - d_1d_2) + (a_1b_2 + a_2b_1 - c_1d_2 + d_1c_2)i \\ + (a_1c_2 + a_2c_1 - b_2d_1 + b_1d_2)j + (a_1d_2 + a_2d_1 - b_1c_2 + c_1b_2)k$$

따라서 ***사원수는 곱셈에 대해 교환법칙이 성립하지 않는다***.     
[표 14-2](#표-14-2-사원수-곱셈-연산의-성질)에 사원수 곱셈 연산의 성질을 정리했다.

###### 표 14-2 사원수 곱셈 연산의 성질
|성질|만족 여부 및 값|
|---|---|
|곱셈에 대해 닫혀 있음|O|
|곱셈에 대한 교환법칙이 성립함|X|
|곱셈에 대한 결합법칙이 성립함|O|
|곱셈에 대한 항등원이 존재함|1|
|곱셈에 대한 역원이 존재함|켤레를 활용해 계산|
|덧셈과 곱셈에 대한 분배법칙이 성립함|O|

***사원수 곱셈은 교환법칙이 성립되지 않아 체의 구조를 가지고 있지 않지만 결합법칙 등 나머지 체의 성질은 모두 만족한다***.     
***체의 구조에서 교환법칙이 성립하지 않는 구조***를 ***유사체(Skew field)*** 라고 하는데, 이에 따라 ***사원수는 유사체의 구조를 지닌다***.     
따라서 ***사원수끼리 곱셈식을 전개할 때 왼쪽과 오른쪽의 순서가 바뀌지 않도록 주의***해야 한다.        

사원수의 크기는 복소수와 동일하게 각 계수를 제곱한 값을 더하고 제곱근을 취해 계산하며 절댓값 기호 $||$를 써서 표기한다.     
사원수의 크기 역시 ***노름(Norm)*** 이라 부른다.

$$|q| = \sqrt{a^2 + b^2 + c^2 + d^2}$$

사원수 중에서 ***크기가 1인 사원수***를 ***단위 사원수(Unit quaternion)*** 라고 한다.    
사원수의 ***세 허수부의 계수에 음수를 적용한 사원수***를 ***켤레 사원수***라고 부르고 $q^*$로 표기하며 다음과 같이 표현한다.

$$q^* = a - (bi + cj + dk)$$

***사원수와 켤레 사원수의 곱은 복소수와 켤레 복소수 간의 곱의 성질과 동일***하다.

$$(q^*)^* = q$$

$$(pq)^* = q^*p^*$$

***임의의 사원수에 그 켤레를 곱하면 크기의 제곱 값이 나온다***.

$$q^*q = qq^* = a^2 + b^2 + c^2 + d^2 = |q|^2$$

따라서 단위 사원수와 그의 켤레 사원수를 곱한 값은 언제나 1이 된다.      
이러한 사원수도 복소수와 동일하게 켤레 사원수의 성질을 사용해 사원수 곱의 역원을 유도할 수 있다.

$$q^{-1} = \frac{1}{q} = \frac{q^*}{qq^*} = \frac{q^*}{|q|^2}$$

여기서 크기가 1인 단위 사원수의 곱셈의 역원은 복소수와 동일하게 켤레 사원수가 된다.

사원수의 곱셈에 대해 결합법칙이 성립하지 않는다는 점을 제외하고, 복소수와 사원수는 공통점이 많이 있다.      

# 49.3. 사원수와 벡터
2개의 요소를 사용하는 복소수는 2개의 수 집합이 직교하는 복소평면으로 시각화할 수 있다.      
이와 유사하게 4개의 요소를 사용하는 사원수는 4개의 수 집합이 직교하는 4차원의 공간으로 시각화가 가능하다고 생각할 수 있지만, 4차원 공간은 일반적인 인지범위를 넘어서기 때문에 이를 시각적으로 정확하게 표현하는 것은 불가능하다.      
그래서 사원수를 다룰 때에는 4차원 공간을 1차원과 3차원으로 분리하고 3차원 공간의 성질을 관찰하는 것이 더욱 효과적이다.

###### 그림 14-1 인지 불가능한 4차원 공간의 입방체 테서랙트(Tesseract)
![인지 불가능한 4차원 공간의 입방체(Tesseract)](/img/)

따라서 ***사원수를 다룰 때에는 허수부를 사용하는 3개의 수 집합을 하나로 묶고, 나머지 실수부는 별도로 관리하는 방법을 사용***한다.     
세 허수부의 계수를 3차원 벡터로 묶는다면, 사원수는 실수와 3차원 벡터 두 가지 요소로 구성된다고 볼 수 있다.      
사원수 $q$를 실수와 3차원 벡터로 구성된 순서쌍으로 표현하면 다음과 같다.

$$q = w + xi + yj + zk = (w, \vec{v})$$

이 ***순서쌍의 원소***를 차례대로 ***실수부, 허수부***라고 하는데, 이들을 ***스칼라부, 벡터부***라고도 부른다.        
3차원 벡터를 사용해 사원수를 표현하면 사원수의 연산을 좀 더 체계적으로 정리할 수 있다.      
임의의 두 사원수를 $q_1 = (w_1, \vec{v}_1), q_2 = (w_2, \vec{v}_2)$로 표현하고 사원수의 기본 연산인 덧셈과 곱셈을 다시 표현한다.        
사원수 $q_1$과 $q_2$의 덧셈은 다음과 같은 순서쌍으로 표현할 수 있다.

$$q_1 + q_2 = (w_1 + w_2, \vec{v}_1 + \vec{v}_2)$$

사원수 $q_1$과 $q_2$의 곱셈은 벡터의 ***내적과 외적을 사용***해 다음과 같이 깔끔하게 정리할 수 있다.

$$q_1 \cdot q_2 = (w_1w_2 - (\vec{v}_1 \cdot \vec{v}_2), w_1\vec{v}_2 + w_2\vec{v}_1 + \vec{v}_1 \times \vec{v}_2)$$

사원수의 곱셈을 내적과 외적으로 정리했는데, 이를 통해 사원수의 곱셈은 교환법칙이 성립하지 않는지도 확인할 수 있다.      
허수부를 구성하는 벡터 연산이 교환법칙이 성립하지 않는 외적에 관련되어 있기 때문이다.

사원수에서 ***실수부가 0인 사원수***를 특별히 ***순허수 사원수(Pure imaginary quarternion)*** 라고 부른다.       
순허수 사원수는 세 허수로만 구성된 수를 말하는데, 이는 3차원 벡터 공간에 대응되는 개념이다.     
즉 3차원 공간이 사원수를 다루는 4차원 공간의 일부라면, 3차원 공간의 벡터 $\vec{v} = (x, y, z)$는 다음의 순허수 사원수에 대응된다고 할 수 있다.

$$xi + yj + zk = (0, \vec{v})$$

순허수 사원수 $q_1$과 $q_2$의 곱셈을 전개하면 $w_1$과 $w_2$의 값이 0이다 보니 이들이 포함된 항의 값은 모두 0이 된다.        
곱셈 결과는 아래와 같이 내적과 외적만 남아 더욱 단순해진다.

$$q_1 \cdot q_2 = (-\vec{v}_1 \cdot \vec{v}_2, \vec{v}_1 \times \vec{v}_2)$$

# 50. 사원수의 회전
자연지수함수, $\sin$ 함수, $\cos$ 함수를 매클로린 급수로 전개했을 때 세 급수가 서로 통합되기 위해서는 크기가 1이고, 제곱한 수가 -1이 되는 특별한 수가 필요하다.     
복소수 체계에서 이 조건을 만족하는 특별한 수인 허수 $i$를 사용해 다음의 오일러 공식을 전개할 수 있다.

$$e^{i\theta} = \cos \theta + i \sin \theta = (\cos \theta, \sin \theta)$$

사원수에서도 허수 $i$와 동일하게 크기가 1이고 제곱한 값이 -1인 수가 있다면 오일러 공식을 만족한다.

# 50.1. 사원수와 오일러 공식
***크기가 1인 순허수 사원수도 크기가 1이고 제곱한 값이 -1이다***.     
크기가 1인 순허수 사원수를 $q_n$으로 지정하고 이를 직접 확인한다.       
먼저 순허수 사원수 $q_n$의 요소를 $(0, \vec{n})$으로 표시한다.      
$q_n$의 크기는 1이므로 다음의 식이 성립한다.

$$\sqrt{0 + |\vec{n}|^2} = 1$$

이로써 $\vec{n}$의 크기도 1이 됨을 알 수 있으며, 내적 $\vec{n} \cdot \vec{n}$의 값도 1이 된다.

$$|\vec{n}| = \vec{n} \cdot \vec{n} = 1$$

순허수 사원수 $q_n$의 제곱을 전개하면 다음과 같다.

$$q_n^2 = q_n \cdot q_n = (-\vec{n} \cdot \vec{n}, \vec{n} \times \vec{n})$$

그런데 $\vec{n} \cdot \vec{n}$은 1이고 ***평행한 벡터의 외적은 영벡터***가 되므로 위 식은 다음과 같이 간략하게 전개된다.

$$q_n \cdot q_n = (-1, \vec{0})$$

따라서 크기가 1인 순허수 사원수 $q_n$을 제곱한 결과는 $-1$이 됨을 확인할 수 있다.       
그렇다면 오일러 공식의 전개 과정에 허수 $i$대신 순허수 사원수의 벡터 $\vec{n}$을 사용할 수 있다.        
이렇게 하면 자연상수의 지수함수로 사원수의 회전을 표현하는 것이 가능하다.       
이를 수식으로 정리하면 단위 복소수와 형태가 유사해진다.

$$e^{\vec{n}\theta} = \cos \theta + \sin \theta \cdot \vec{n} = (\cos \theta, \sin \theta \cdot \vec{n})$$

$(\cos \theta, \sin \theta \cdot \vec{n})$ 형태의 사원수는 4차원 공간에서 회전축 $\vec{n}$을 중심으로 회전 변환하는 성질을 가지는데, 이를 ***회전 사원수(Rotation quaternion)*** 라고 한다.        
회전 사원수를 $q$, 벡터 $\vec{n}$의 요소를 $(a, b, c)$로 표기하고 이를 확인한다.        
여기서 벡터 $\vec{n}$은 크기가 1인 단위 벡터이므로 $a^2 + b^2 + c^2 = 1$의 조건에 의해 다음과 같이 전개되어 회전 사원수는 언제나 단위 사원수임을 확인할 수 있다.

$$q = \cos \theta + \sin \theta \cdot \vec{n} = \cos \theta + \sin \theta (ai + bj + ck)$$

$$|q| = \cos^2 \theta + \sin^2 \theta (a^2 + b^2 + c^2) = 1$$

회전 사원수의 켤레는 다음과 같이 표현한다.

$$q^* = (\cos \theta, -\sin \theta \cdot \vec{n})$$

이는 반대 방향의 회전을 의미한다.

$$q^* = (\cos(-\theta), \sin(-\theta) \cdot \vec{n})$$

반대 방향의 회전을 의미하는 회전 사원수의 켤레 사원수는 오일러의 공식으로도 확인할 수 있다.     
단위 사원수와 그 켤레를 곱한 값은 언제나 1이 나옴을 확인했는데, 이를 자연지수함수로 표현하면 다음과 같이 0의 지수로 나타낼 수 있다.

$$q \cdot q^* = 1 = e^0$$

오일러의 공식에 의해 회전 사원수에 대응하는 지수함수는 다음과 같다.

$$q = e^{\vec{n}\theta}$$

이를 회전 사원수 $q$에 치환한 식은 다음과 같이 전개된다.ㅣ

$$e^{\vec{n}\theta} \cdot q^* = e^0$$

이를 만족하는 $q^*$의 값은 $e^{-\vec{n}\theta}$이며 이는 같은 축 $\vec{n}$을 중심으로 반대 방향으로 $\theta$ 돌리는 회전을 의미한다.

$$\therefore q^* = e^{-\vec{n}\theta} = e^{\vec{n}(-\theta)}$$

# 50.2. 회전 사원수를 이용한 3차원 공간에서의 회전
회전 사원수 $q$를 사용해 임의의 회전축 $\vec{n}$에 대해 3차원 공간의 벡터 $\vec{v}$를 각 $\theta$만큼 회전시키는 방법을 확인해보자.

일반적으로 사용하는 ***3차원 공간의 벡터*** $\vec{v}$는 ***순허수 사원수에 대응되는 개념***이다.    
벡터 $\vec{v}$의 값을 $(x, y, z)$로 표시하고, 회전축 $\vec{n}$의 값을 $(a, b, c)$로 지정한다.       
회전축은 단위 벡터이기 때문에 $a^2 + b^2 + c^2 = 1$의 조건을 가진다.        
그리고 회전축 $\vec{n}$으로 각 $\theta$만큼 회전시키는 회전 사원수 $q$는 $(\cos \theta, \sin \theta \cdot \vec{n})$의 값을 가진다.

회전 사원수 $q$를 사용해 벡터를 회전시키는 방법은 회전 사원수를 벡터의 왼쪽에 배치하고 둘을 곱하는 것이다.          
이때 ***사원수의 곱셈은 교환법칙이 성립하지 않기 떄문에 곱하는 순서에 항상 신경 써야 한다***.

회전 사원수와 순허수 사원수 벡터 $\vec{v}$의 곱셈은 다음과 같이 전개된다.

$$
\begin{matrix}
\vec{v^{'}} &=& q \cdot \vec{v} \\
&=& (\cos \theta, \sin \theta \cdot \vec{n}) \cdot (0, \vec{v}) \\
&=& (-\sin \theta (\vec{n} \cdot \vec{v}), \cos \theta \vec{v} + \sin \theta (\vec{n} \times \vec{v})) \\
\end{matrix}
$$

계산 결과를 살펴보면 ***회전 사원수와 벡터를 곱한 결과는 순허수 사원수가 아닌 네 요소를 모두 사용하는 일반 사원수가 나온다***.        
따라서 이 곱의 결과는 순허수 사원수와 1:1로 대응했던 3차원 공간의 규격에서 벗어나게 되므로 3차원 공간의 요소로 사용할 수 없게 된다.     
[그림 14-2](#그림-14-2-회전-사원수를-사용해-벡터를-회전시킨-결과)에 지금까지의 상황을 정리한다.

###### 그림 14-2 회전 사원수를 사용해 벡터를 회전시킨 결과
![회전 사원수를 사용해 벡터를 회전시킨 결과](/img/)

3차원 공간에서 벡터를 회전시키는 용도로 사원수를 사용하기 위해서는 ***사원수 곱의 결과가 항상 순허수 사원수가 되는 특별한 수식***을 발견해야 한다.        

회전 사원수의 벡터 $\vec{n}$은 회전축의 역할을 수행한다.        
이는 로드리게스 회전 공식에서 언급되는 축-각 회전에 대응하는 벡터다.     
3차원 공간에서 임의의 축 $\vec{n}$에 대한 회전을 표현하면 [그림 14-3](#그림-14-3-임의의-회전축-n에-대한-회전의-표현)과 같다.

###### 그림 14-3 임의의 회전축 n에 대한 회전의 표현
![임의의 회전축 n에 대한 회전의 표현](/img/)

회전시킬 벡터를 $\vec{v}$로 정하고 이를 회전축 $\vec{n}$에 평행한 성분과 수직인 성분으로 나눈다.            
회전축에 수평인 성분을 $\vec{v_\parallel}$, 수직인 성분을 $\vec{v_\perp}$으로 표시하면 다음 식이 성립된다.

$$\vec{v} = \vec{v_\parallel} + \vec{v_\perp}$$

[그림 14-4](#그림-14-4-회전시킬-벡터-v를-평행-성분과-수직-성분으로-분리한-결과)는 벡터 $\vec{v}$를 수직 성분과 수평 성분으로 분리해 나타낸 그림이다.        
이를 각 $\theta$만큼 회전 시킨 벡터를 $\vec{v^{'}}$로 가정한다.

###### 그림 14-4 회전시킬 벡터 v를 평행 성분과 수직 성분으로 분리한 결과
![회전시킬 벡터 v를 평행 성분과 수직 성분으로 분리한 결과](/img/)

이때 원하는 최종 회전의 벡터 $\vec{v^{'}}$는 [그림 14-5](#그림-14-5-3차원-공간에서의-회전의-구현)와 같이 회전축에 수직인 성분만 회전시킨 후, 수평 성분은 그대로 더하면 구할 수 있다.

###### 그림 14-5 3차원 공간에서의 회전의 구현
![3차원 공간에서의 회전의 구현](/img/)

따라서 3차원 공간에서의 회전은 다음과 같은 식이 될 것이다.

$$\vec{v^{'}} = \vec{v_\parallel} + q \cdot \vec{v_\perp}$$

***오일러 공식***을 활용해 위 수식을 간단하게 정리한다.       
이 식에서 회전 사원수 $q$를 자연지수함수로 바꿔 표현하면 다음과 같다.

$$\vec{v^{'}} = \vec{v_\parallel} + e^{\vec{n}\theta} \cdot \vec{v_\perp}$$

우변의 두 번째 항인 회전 사원수와 벡터와의 곱셈은 다음과 같이 간략하게 전개된다.

$$
\begin{matrix}
e^{\vec{n}\theta} \cdot \vec{v_\perp} &=& (-\sin \theta (\vec{n} \cdot \vec{v_\perp}), \cos \theta \vec{v_\perp} + \sin \theta (\vec{n} \times \vec{v_\perp})) \\
&=& (0, \cos \theta \vec{v_\perp} + \sin \theta (\vec{n} \times \vec{v_\perp})) \\
\end{matrix}
$$

회전축 $\vec{n}$와 이에 직교하는 벡터 $\vec{v_\perp}$의 내적은 항상 0이다.

이로써 회전축에 수직인 벡터와 회전 사원수의 곱으로 얻어지는 사원수는 항상 실수부 값이 0인 순허수 사원수가 되므로, 이의 결과는 언제나 3차원 공간의 벡터에 대응됨을 확인할 수 있다.

3차원 공간의 회전식을 간략하게 정리하도록 연산 순서를 바꾼다.       
연산 순서를 변경하면 ***외적의 성질***에 의해 $\sin$ ***함수의 부호가 반대로 바뀐다***.

$$\vec{v_\perp} \cdot e^{\vec{n} \theta} = (0, \cos \theta \vec{v_\perp} - \sin \theta (\vec{n} \times \vec{v_\perp}))$$

그러고 나서 회전 각에 $-\theta$를 대입하면, 이는 $\sin$ 함수에만 영향을 미치므로 다음과 같이 바뀐다.

$$
\begin{matrix}
\vec{v_\perp} \cdot e^{\vec{n}(-\theta)} &=& (0, \cos(-\theta) \vec{v_\perp} - \sin(-\theta)(\vec{n} \times \vec{v_\perp})) \\
&=& (0, \cos \theta \vec{v_\perp} + \sin \theta (\vec{n} \times \vec{v_\perp})) \\
\end{matrix}
$$

두 항의 순서를 바꿔 연산한 결과는 처음 식과 동일하므로 회전축과 직교하는 벡터에 대해서는 다음과 같은 식이 성립한다.

$$e^{\vec{n}\theta} \cdot \vec{v_\perp} = \vec{v_\perp} \cdot e^{\vec{n}(-\theta)}$$

수식에 등장하지 않지만 회전축에 평행한 벡터 $\vec{v_\parallel}$의 회전 사원수 곱이 가지는 성질을 살펴보자.      
평행인 두 벡터의 외적은 영벡터가 되므로 실수부가 남고 허수부가 단순화된다.

$$e^{\vec{n}\theta} \cdot \vec{v_\parallel} = (-\sin \theta (\vec{n} \cdot \vec{v_\parallel}), \cos \theta \vec{v_\parallel})$$

이때 사원수 곱에서 ***교환법칙의 성립을 방해하던 외적 부분***이 사라졌기 때문에, 평행인 벡터와의 곱은 다음과 같이 ***항상 교환법칙이 성립***한다.

$$e^{\vec{n}\theta} \cdot \vec{v_\parallel} = \vec{v_\parallel} \cdot e^{\vec{n}\theta}$$

식을 좀 더 단순화하기 위해, 회전 사원수를 둘로 쪼개서 나타낸다.     
각 $\theta$의 회전을 수행하는 회전 사원수는 이를 절반으로 나눈 각 $\frac{\theta}{2}$의 회전 사원수를 두 번 곱한 결과와 동일하다.

$$e^{\vec{n}\theta} = e^{\vec{n}(\frac{\theta}{2})} \cdot e^{\vec{n}(\frac{\theta}{2})}$$

회전 사원수와 그 켤레 사원수와의 곱은 아무런 변화 없는 $0^\circ$ 회전을 만들어내므로, 이들의 곱은 곱셈의 항등원 1에 대응된다.

$$1 = e^{0} = e^{\vec{n}(\frac{\theta}{2})} \cdot e^{\vec{n}(-\frac{\theta}{2})}$$

직교하는 벡터와 평행하는 벡터의 성질을 파악했다면, 이를 활용해 3차원 공간에서의 회전을 전개하면 다음과 같이 정리된다.

$$
\begin{matrix}
v' &=& \vec{v_\parallel} + e^{\vec{n}\theta} \cdot \vec{v_\perp} \\
&=& e^0 \cdot \vec{v_\parallel} + e^{\vec{n}\theta} \cdot \vec{v_\perp} \\
&=& e^{\vec{n}(\frac{\theta}{2})} \cdot e^{\vec{n}(-\frac{\theta}{2})} \cdot \vec{v_\parallel} + e^{\vec{n}(\frac{\theta}{2})} \cdot e^{\vec{n}(\frac{\theta}{2})} \cdot \vec{v_\perp} \\
&=& e^{\vec{n}(\frac{\theta}{2})} \cdot \vec{v_\parallel} \cdot e^{\vec{n}(-\frac{\theta}{2})} + e^{\vec{n}(\frac{\theta}{2})} \cdot \vec{v_\perp} \cdot e^{\vec{n}(-\frac{\theta}{2})} \\
&=& e^{\vec{n}(\frac{\theta}{2})} \cdot (\vec{v_\parallel} + \vec{v_\perp}) \cdot e^{\vec{n}(-\frac{\theta}{2})} \\
&=& e^{\vec{n}(\frac{\theta}{2})} \cdot \vec{v} \cdot e^{\vec{n}(-\frac{\theta}{2})} \\
\end{matrix}
$$

1. 평행한 벡터 $\vec{v_\parallel}$의 계수 1을 지수함수로 바꿔 표현한다.
2. 평행한 벡터의 계수는 두 개의 상반되는 회전의 곱으로 표현하고, 직교하는 벡터의 계수에 적용하는 회전은 절반 회전의 곱으로 표현한다.
3. 평행한 벡터와의 곱은 교환법칙이 성립하고, 직교하는 벡터와의 곱은 연산 순서를 바꿨을 때 각의 부호가 반대로 바뀐다.
4. 사원수는 덧셈의 분배법칙이 성립하므로 묶을 수 있다.
5. 평행한 벡터와 직교하는 벡터의 합은 원 벡터 $\vec{v}$가 된다.

간략해진 최종 식에서 자연지수함수를 다시 사원수의 형태로 바꾼다.        
각 $\theta$가 아닌 이의 절반값 $\frac{\theta}{2}$만큼 돌리는 회전 사원수를 $q$로 표현한다.      
반대 방향으로 돌리는 사원수는 켤레 사원수 $q^*$가 된다.

$$e^{\vec{n}(\frac{\theta}{2})} = q$$

3차원 공간의 회전을 보장하는 사원수의 회전식은 [식 14-1](#식-14-1)과 같이 최종 정리된다.

###### 식 14-1

$$
\begin{matrix}
v' &=& e^{\vec{n}(\frac{\theta}{2})} \cdot \vec{v} \cdot e^{\vec{n}(-\frac{\theta}{2})} \\
&=& q \cdot v \cdot q^* \\
\end{matrix}
$$

회전 사원수에 사용한 각은 $\frac{\theta}{2}$이므로 여기에 사용한 사원수 $q$의 값은 다음과 같다.

$$q = (\cos \frac{\theta}{2}, \sin \frac{\theta}{2}\vec{n})$$

3차원 공간의 회전을 보장하는 사원수의 회전식이 [식 14-1](#식-14-1)로 깔끔하게 정리된다.     
절반의 각만 회전시키는 단위 사원수를 임의의 벡터와 곱했을 때 그 결과는 항상 실수부가 0인 순허수 사원수가 나오는지 확인해보자.       
회전 사원수 $q$의 실수부와 허수부를 각각 $w$와 $\vec{r}$로 표시해 식을 간단하게 전개한다.

$$q = (\cos \frac{\theta}{2}, \sin \frac{\theta}{2}\vec{n}) = (w, \vec{r})$$

[식 14-1](#식-14-1)을 내적과 외적의 형태로 바꾸면 다음과 같이 전개된다.

$$
\begin{matrix}
v' &=& q \cdot v \cdot q* \\
&=& (w, \vec{r}) \cdot (0, \vec{v}) \cdot (w, -\vec{r}) \\
&=& (-(\vec{r} \cdot \vec{v}), w\vec{v} + \vec{r} \times \vec{v}) \cdot (w, -\vec{r}) \\
&=& (-(\vec{r} \cdot \vec{v})w - (w\vec{v} + \vec{r} \times \vec{v}) \cdot (-\vec{r}), -(\vec{r} \cdot \vec{v}) \cdot -\vec{r} + w(w\vec{v} + \vec{r} \times \vec{v}) + (w\vec{v} + \vec{r} \times \vec{v}) \times -\vec{r}) \\
\end{matrix}
$$

이 결과 중에서 실수부와 허수부를 다음과 같이 각각 따로 전개한다.        
우선 첫 항인 실수부를 전개하면 다음과 같다.

$$
\begin{matrix}
-(\vec{r} \cdot \vec{v})w - (w\vec{v} + \vec{r} \times \vec{v}) \cdot (-\vec{r}) &=& -(\vec{r} \cdot \vec{v})w + w(\vec{v} \cdot \vec{r}) + (\vec{r} \times \vec{v}) \cdot \vec{r} \\
&=& -(\vec{r} \cdot \vec{v})w + w(\vec{v} \cdot \vec{r}) \\
&=& -(\vec{r} \cdot \vec{v})w + (\vec{r} \cdot \vec{v})w \\
&=& 0
\end{matrix}
$$

1. $(\vec{r} \times \vec{v}) \cdot \vec{r}$ 항의 결과는 외적으로 직교하는 벡터를 생성한 후에 이를 내적하므로 언제나 0이 나온다.
2. 내적은 교환법칙이 성립하므로 스칼라와 벡터의 순서를 동일하게 맞춰준다.

[식 14-1](#식-14-1)을 내적과 외적으로 전개했을 때 실수부 값은 언제나 0이 나온다.        
이는 [그림 14-6](#그림-14-6-실수부가-0인-3차원-공간에서의-회전을-보장하는-사원수의-곱셈-공식)과 같이 절반의 각과 그 켤레를 사용해 회전시킨 결과는 항상 3차원 공간의 벡터에 대응된다고 할 수 있다.

###### 그림 14-6 실수부가 0인 3차원 공간에서의 회전을 보장하는 사원수의 곱셈 공식
![실수부가 0인 3차원 공간에서의 회전을 보장하는 사원수의 곱셈 공식](/img/)

허수부의 결과는 어떻게 정리되는지 확인해보자.       
허수부는 사원수를 사용해 회전된 벡터 $\vec{v'}$가 나온다.       
허수부의 수식을 전개하면 다음과 같다.

$$
\begin{matrix}
\vec{v'} &=& -(\vec{r} \cdot \vec{v}) \cdot -\vec{r} + w(w\vec{v} + \vec{r} \times \vec{v}) + (w\vec{v} + \vec{r} \times \vec{v}) \times -\vec{r} \\
&=& (\vec{r} \cdot \vec{v}) \cdot \vec{r} + w^2\vec{v} + w(\vec{r} \times \vec{v}) - w(\vec{v} \times \vec{r}) - (\vec{r} \times \vec{v}) \times \vec{r} \\
&=& (\vec{r} \cdot \vec{v}) \cdot \vec{r} + w^2\vec{v} + 2w(\vec{r} \times \vec{v}) - (\vec{r} \times \vec{v}) \times \vec{r} \\
&=& (\vec{r} \cdot \vec{v}) \cdot \vec{r} + (1 - \vec{r} \cdot \vec{r}) \cdot \vec{v} + 2w(\vec{r} \times \vec{v}) - (\vec{r} \times \vec{v}) - (\vec{r} \times \vec{v}) \times \vec{r} \\
&=& \vec{v} + (\vec{r} \cdot \vec{v}) \cdot \vec{r} - (\vec{r} \cdot \vec{r}) \cdot \vec{v} + 2w(\vec{r} \times \vec{v}) - (\vec{r} \times \vec{v}) \times \vec{r} \\
&=& \vec{v} + \vec{r} \times (\vec{r} \times \vec{v}) + 2w(\vec{r} \times \vec{v}) - (\vec{r} \times \vec{v}) \times \vec{r} \\
&=& \vec{v} + 2w(\vec{r} \times \vec{v}) + 2(\vec{r} \times (\vec{r} \times \vec{v})) \\
\end{matrix}
$$

1. 외적은 순서를 바꾸면 반대 부호가 나오므로 $w(\vec{r} \times \vec{v}) - w(\vec{v} \times \vec{r})$는 $2w(\vec{r} \times \vec{v})$가 된다.
2. 회전 사원수는 단위 사원수이므로 $w^2 + |\vec{r}|^2 = 1$이 성립하는데, 이를 내적으로 바꾸면 $w^2 = 1 - \vec{r} \cdot \vec{r}$이 성립한다.
3. 벡터 삼중곱 공식을 사용해 $(\vec{r} \cdot \vec{v}) \cdot \vec{r} - (\vec{r} \cdot \vec{r}) \cdot \vec{v}$를 벡터 삼중곱 $\vec{r} \times (\vec{r} \times \vec{v})$로 치환한다.
4. 마지막 항에 위치한 외적식의 순서를 뒤집어 벡터 삼중곱으로 변환한 외적식과 함께 묶는다.

최종 값 $\vec{v} + 2w(\vec{r} \times \vec{v}) + 2(\vec{r} \times (\vec{r} \times \vec{v}))$에서 $2(\vec{r} \times \vec{v})$를 벡터 $\vec{t}$로 치환하면 위 식은 [식 14-2](#식-14-2)와 같이 단순하게 정리된다.

###### 식 14-2

$$\vec{v'} = \vec{v} + w\vec{t} + \vec{r} \times \vec{t}$$

이로써 사원수를 사용해 3차원 공간의 벡터 $\vec{v}$를 임의의 회전축 $\vec{n}$을 중심으로 각 $\theta$만큼 회전시키는 최종 수식이 완성된다.

[식 14-2](#식-14-2)를 $\frac{\theta}{2}$가 아닌 각 $\theta$를 중심으로 전개하면 [식 9-2](#식-9-2)의 로드리게스 회전 공식이 유도된다.

$$
\begin{matrix}
\vec{v'} &=& \vec{v} + 2w(\vec{r} \times \vec{v}) + 2(\vec{r} \times (\vec{r} \times \vec{v})) \\
&=& \vec{v} + 2 \cos \frac{\theta}{2}(\sin\frac{\theta}{2}\vec{n}\times \vec{v}) + 2(\sin\frac{\theta}{2}\vec{n} \times (\sin \frac{\theta}{2} \vec{n} \times \vec{v})) \\
&=& \vec{v} + 2 \cos \frac{\theta}{2}\sin\frac{\theta}{2}(\vec{n} \times \vec{v}) + 2\sin^2 \frac{\theta}{2}(\vec{n} \times (\vec{n} \times \vec{v})) \\
&=& \vec{v} + \sin(\frac{\theta}{2} + \frac{\theta}{2})(\vec{n} \times \vec{v}) + (1 - \cos(\frac{\theta}{2} + \frac{\theta}{2})) (\vec{n} \times (\vec{n} \times \vec{v})) \\
&=& \vec{v} + \sin \theta(\vec{n} \times \vec{v}) + (1 - \cos \theta)((\vec{n} \cdot \vec{v})\vec{n} - (\vec{n} \cdot \vec{n})\vec{v}) \\
&=& \vec{v} - (1 - \cos \theta)(\vec{n} \cdot \vec{n})\vec{v} + \sin \theta(\vec{n} \times \vec{v}) + (1 - \cos \theta)(\vec{n} \cdot \vec{v})\vec{n} \\
&=& \cos \theta \vec{v} + (1 - \cos \theta)(\vec{n} \cdot \vec{v})\vec{n} + \sin \theta(\vec{n} \times \vec{v}) \\
\end{matrix}
$$

1. [식 14-2](#식-14-2)를 삼각함수와 회전축으로 바꿔 표현한다.
2. 각 요소에 사용한 모든 삼각함수 값을 계수로 빼서 정리한다.
3. 삼각함수의 배각 공식 $\sin 2\theta = 2\sin\theta \cos \theta$와 $\cos 2 \theta = 1- 2\sin^2\theta$를 사용해 $\frac{\theta}{2}$의 삼각함수를 $\theta$의 삼각함수로 변경한다.
4. 벡터 삼중곱을 내적으로 구성된 수식으로 변경한다.

이로써 회전 사원수의 벡터부에서 설정한 벡터 $\vec{n}$은 축-각 회전에서 회전축의 기능을 수행한다는 사실을 확인할 수 있다.        
그리고 각 $\theta$를 기준으로 전개했을 떄보다 각 $\frac{\theta}{2}$를 기준으로 전개했을 때 식이 더 간편해진다는 것을 알 수 있다.

같은 회전축에 두 개의 다른 각을 연속해서 회전시키는 경우를 알아보자.        
첫 번째 각의 크기를 $2\alpha$, 두 번째 각의 크기를 $2\beta$로 지정하고 회전할 벡터를 $\vec{v}$, 첫 번째 회전을 적용한 벡터를 $\vec{v'}$, 두 번째 회전을 적용한 벡터를 $\vec{v''}$로 표기하면 두 회전 변환을 적용한 식은 다음과 같다.

$$\vec{v'} = q_\alpha \cdot \vec{v} \cdot q^*_\alpha$$

$$\vec{v''} = q_\beta \cdot \vec{v'} \cdot q^*_\beta$$

벡터 $\vec{v'}$를 $q_\alpha \cdot \vec{v} \cdot q^*_\alpha$로 치환하면 $\vec{v''}$를 계산하는 식은 다음과 같이 전개된다.

$$
\begin{matrix}
\vec{v''} &=& q_\beta \cdot (q_\alpha \cdot \vec{v} \cdot q_\alpha^*) \cdot q_\beta^* \\
&=& (q_\beta \cdot q_\alpha) \cdot \vec{v} \cdot (q_\alpha^* \cdot q_\beta^*) \\
&=& (q_\beta \cdot q_\alpha) \cdot \vec{v} \cdot (q_\beta \cdot q_\alpha)^* \\
&=& q_{(\alpha + \beta)} \cdot \vec{v} \cdot q^*_{(\alpha + \beta)} \\
\end{matrix}
$$

1. 사원수의 곱셈은 결합법칙을 만족하므로 벡터를 가운데 두고 양 옆으로 묶을 수 있다.
2. 켤레 사원수로 묶으면 두 사원수의 순서는 뒤집힌다.
3. 두 회전 사원수의 곱은 두 각을 더한 회전 사원수와 동일하다.

이로써 ***3차원 공간의 회전을 위해 절반의 각과 켤레 사원수를 사용하더라도 서로 다른 두 회전 사원수의 곱은 두 각을 합한 회전 사원수와 형태가 동일하다***는 점을 확인할 수 있다.        

# 51. 사원수의 변환
사원수를 활용해 3차원 벡터를 회전시키는 기능을 구현할 수 있지만, 사원수를 구성하는 요소 값은 직관적이지 않아 실제로 사용하는 회전을 설계할 때 어려움이 따른다.

3차원 공간에서 물체의 회전을 설정할 때에는 오일러 각 방식이 사원수보다 직관적이고 편리하기 때문에, 오일러 각의 값을 사원수로 변환해주는 기능을 만들면 게임 제작에 유용하게 사용할 수 있다.

# 51.1. 오일러 각에서 사원수로의 변환
***오일러 각의 각 회전은*** $x, y, z$ ***기저 축이 회전축의 역할을 수행***한다.     
3차원 공간에서 $x$축을 중심으로 각 $\theta$만큼 회전시키는 데 사용하는 회전 사원수 $q$는 다음과 같다.

$$q = (\cos \frac{\theta}{2}, \sin \frac{\theta}{2} \cdot \vec{x}) = \cos \frac{\theta}{2} + \sin \frac{\theta}{2} i$$

따라서 오일러 각을 구성하는 롤, 피치, 요 회전에 대응하는 각 사원수 $q_{roll}, q_{pitch}, q_{yaw}$는 각각 다음과 같이 표기된다.

$$q_{roll} = \cos \frac{\theta_{roll}}{2} + \sin \frac{\theta_{roll}}{2}k$$

$$q_{pitch} = \cos \frac{\theta_{pitch}}{2} + \sin \frac{\theta_{pitch}}{2}i$$

$$q_{yaw} = \cos \frac{\theta_{yaw}}{2} + \sin \frac{\theta_{yaw}}{2}j$$

오일러 각의 회전 순서를 롤, 피치, 요 순으로 적용하고, 이에 대응하는 사원수를 동일한 순서에 맞춰서 곱하면 오일러 각에 대응하는 사원수가 만들어진다.        
이를 계산하면 [식 14-3](#식-14-3)과 같다.

###### 식 14-3

$$q_{yaw} \cdot q_{pitch} \cdot q_{roll} = \cos \frac{\theta_{roll}}{2} \cos \frac{\theta_{pitch}}{2} \cos \frac{\theta_{yaw}}{2} + \sin \frac{\theta_{roll}}{2} \sin \frac{\theta_{pitch}}{2} \sin \frac{\theta_{yaw}}{2} + \\
(\cos \frac{\theta_{roll}}{2} \sin \frac{\theta_{pitch}}{2} \cos \frac{\theta_{yaw}}{2} + \sin \frac{\theta_{roll}}{2} \cos \frac{\theta_{pitch}}{2} \sin \frac{\theta_{yaw}}{2})i + \\
(\cos \frac{\theta_{roll}}{2} \cos \frac{\theta_{pitch}}{2} \sin \frac{\theta_{yaw}}{2} - \sin \frac{\theta_{roll}}{2} \sin \frac{\theta_{pitch}}{2} \cos \frac{\theta_{yaw}}{2})j + \\
(\sin \frac{\theta_{roll}}{2} \cos \frac{\theta_{pitch}}{2} \cos \frac{\theta_{yaw}}{2} - \cos \frac{\theta_{roll}}{2} \sin \frac{\theta_{pitch}}{2} \sin \frac{\theta_{yaw}}{2})k$$

# 51.2. 사원수에서 오일러 각으로의 변환
거꾸로 사원수로부터 오일러 각의 값을 변환하는 방법에 대해 알아보자.     
[식 14-3](#식-14-3)에서 실수부를 $w$, 각 허수부 값을 $x, y, z$로 치환한 후 $2(wz + xy)$를 계산한 결과를 살펴본다.       
요, 롤 피치의 절반각을 $y, r, p$로 표기하고, 이들의 $\sin$ 값을 $sy, sr, sp$로 지정하고 $\cos$ 값을 $cr, cp, cy$로 지정해 식을 전개하면 다음과 같다.

$$
\begin{matrix}
w &=& cr \cdot cp \cdot cy + sr \cdot sp \cdot sy \\
z &=& sr \cdot cp \cdot cy - cr \cdot sp \cdot sy \\
wz &=& cy^2 \cdot cr \cdot cp^2 \cdot sr - cy \cdot ct^2 \cdot cp \cdot sy \cdot sp + cy \cdot cp \cdot sy \cdot sr^2 \cdot sp - cr \cdot sy^2 \cdot sr \cdot sp^2 \\
x &=& sy \cdot sr \cdot cp + sp \cdot cy \cdot cr \\
y &=& sy \cdot cp \cdot cr - sp \cdot sr \cdot cy \\
xy &=& cr \cdot cp^2 \cdot sy^2 \cdot sr - cy \cdot cp \cdot sy \cdot sr^2 \cdot sp + cy \cdot cr^2 \cdot cp \cdot sy \cdot sp - cy^2 \cdot cr \cdot sr \cdot sp^2 \\
\end{matrix}
$$

사원수로부터 오일러 각을 구하려면 사원수를 잘 조합해 단일 각에 대한 삼각함수가 나오도록 식을 설정해야 한다.     
롤 회전에 대한 삼각함수를 만들어주는 $wz + xy$의 값을 계산한다.

$$
\begin{matrix}
wz + xy &=& cr \cdot cp^2 \cdot sr - (cy \cdot cp \cdot sy \cdot sp) + cy \cdot cp \cdot sy \cdot sp - (cr \cdot sr \cdot sp^2) \\
&=& cr \cdot sr(cp^2 - sp^2) \\
&=& \frac{\sin(2r)}{2} \cdot \cos (2p) \\
\end{matrix}
$$

삼각함수의 배각 공식을 사용해 두 배의 각으로 변환한다.

$2(wz + xy)$의 값은 $\sin\theta_{roll} \cdot \cos \theta_{pitch}$가 된다.       
같은 방식으로 $1 - 2(z^2 + x^2)$를 계산하면 $\cos \theta_{roll} \cdot \cos \theta_{pitch}$가 된다.      
그렇다면 $\sin\theta_{roll} \cdot \cos\theta_{pitch}$ 값을 $\cos\theta_{roll} \cdot \cos \theta_{pitch}$로 나누면 다음과 같이 롤 회전의 $\tan$ 값이 나온다.

$$\frac{\sin\theta_{roll} \cdot \cos\theta_{pitch}}{\cos\theta_{roll} \cdot \cos\theta_{pitch}} = \tan\theta_{roll} = \frac{2(wz + xy)}{(1 - 2(z^2 + x^2))}$$

이제 롤 회전의 값은 $\arctan$ 함수를 사용해 구할 수 있다.

$$\theta_{roll} = atan2(2(wz + xy), 1 - 2(z^2 + x^2))$$

피치 회전에 대한 삼각함수를 만들어주는 $wx - yz$ 값은 다음과 같이 전개된다.

$$
\begin{matrix}
wx - yz &=& \sin\frac{\theta_{pitch}}{2} \cdot \cos\frac{\theta_{pitch}}{2} \\
&=& \frac{1}{2}\sin\theta_{pitch} \\
\end{matrix}
$$

$\sin$ 함수의 배각 공식을 사용해 간략화 한다.

따라서 피치 회전각은 $\arcsin$ 함수를 사용해 구할 수 있다.

$$\theta_{pitch} = asin(2(wx - yz))$$

이때 주의할 점은 $\arcsin$ 함수의 정의역은 $|-1, 1|$ 범위로 제한되어 있으므로 $wx - yz$ 값이 $|-0.5, 0.5|$ 범위를 벗어나지 않는지 확인하고 벗어나는 경우에는 범위 내 가장 가까운 값으로 설정해야 한다.

요 회전은 롤 회전과 유사한 방식으로 요 회전의 $\tan$ 함수 값을 구한 후 $\arctan$ 함수를 사용한다.

$$\theta_{yaw} = atan2(2(wy + xz), 1 - 2(x^2 + y^2))$$

# 51.3. 사원수에서 회전 변환행렬로의 변환
사원수에서 회전 변환행렬로 변환하는 식을 계산해보자.        
***회전 변환행렬은 로컬 축으로 구성***되어 있기 때문에 사원수를 사용해 회전된 세 로컬 축의 값을 구하면 쉽게 해결할 수 있다.       
[식 14-2](#식-14-2)를 활용해 사원수로 로컬축을 회전한 결과를 계산한다.

사원수를 구성하는 네 요소를 $x, y, z, w$라고 할 때 $\vec{r}$의 값은 $(x, y, z)$이 되고 여기에 회전시킬 벡터 값을 $\vec{v}$에 대입하면 외적 식으로 회전된 벡터 값을 계산할 수 있다.      
먼저 회전할 벡터는 $x$축 기저벡터 $(1, 0, 0)$이다.      
이를 계산한 결과는 사원수에 의해 회전된 $x$ 로컬 축을 의미한다.

$$
\begin{matrix}
x_{local} &=& (1, 0, 0) + w(0, 2z, -2y) + (x, y, z) \times (0, 2z, -2y) \\
&=& (1, 2zw, -2yw) + (-2y^2 - 2z^2, 2xy, 2xz) \\
&=& (1 - 2(y^2 + z^2), 2(xy + zw), 2(xz - yw)) \\
\end{matrix}
$$

마찬가지로 동일한 사원수에 벡터 $(0, 1, 0), (0, 0, 1)$을 곱하면 각각 다음 식이 나온다.

$$y_{local} = (2(xy - zw), 1 - 2(x^2 + z^2), 2(yz + xw))$$

$$z_{local} = (2(xz + yw), 2(yz - xw), 1 - 2(x^2 + y^2))$$

모든 로컬 축을 구했다면, 이들을 꽂아 넣으면 회전 변환행렬을 만들 수 있다.

###### 식 14-4

$$
\begin{bmatrix}
1-2(y^2 + z^2) & 2(xy - zw) & 2(xz + yw) \\
2(xy + zw) & 1-2(x^2 + z^2) & 2(yz - xw) \\
2(xz - yw) & 2(yz + xw) & 1-2(x^2 + y^2) \\
\end{bmatrix}
$$

# 51.4. 회전 변환행렬에서 사원수로의 변환
회전 변환행렬에서 사원수를 구하는 방법을 알아보자.      
[식 14-4](#식-14-4)를 통해 사원수에서 회전행렬을 구하는 식을 확인했다.      
행렬의 요소를 조합해서 사원수를 구성하는 $x, y, z, w$ 값을 개별로 구하는 방법을 찾아야 한다.        
이는 정방행렬의 모든 대각 성분의 합을 더하는 것에서 실마리를 찾을 수 있다.      
***정방행렬의 대각 성분을 모두 더한 값***을 ***트레이스(Trace)*** 라고 하는데, [그림 14-7](#그림-14-7-정방행렬에서의-트레이스의-표현)과 같이 행렬의 성분과 연산을 표현한다.

###### 그림 14-7 정방행렬에서의 트레이스의 표현
![정방행렬에서의 트레이스의 표현](/img/)

[식 14-4](#식-14-4)의 회전 변환행렬에서 대각행렬 값을 모두 더한 트레이스 $t$는 다음과 같이 계산된다.

$$
\begin{matrix}
t &=& 1 - 2(y^2 + z^2) + 1-2(x^2 + z^2) + 1-2(x^2 + y^2) \\
&=& 3-4(x^2 + y^2 + z^2) \\
\end{matrix}
$$

여기에 1을 더하면 제곱근을 씌울 수 있는 형태가 나오는데 크기가 1인 회전 사원수의 성질에 의해 $x^2 + y^2 + z^2$의 값은 $1 - w^2$이 되므로 트레이스 값은 $4w^2$가 된다.

$$t + 1 = 4 - 4(x^2 + y^2 + z^2) = 4w^2$$

여기에 제곱근을 씌운 값에서 양수 값을 $r$로 지정하면 $r$과 트레이스 $t$의 관계는 다음과 같다.

$$r = 2w = \sqrt{t + 1}$$

사원수의 $w$값은 다음과 같이 구할 수 있다.

$$w = \frac{1}{2}r$$

여기서 구한 $w$ 값을 이용해 나머지 값 $x, y, z$를 구한다.       
회전 변환행렬을 살펴보면 대각 방향으로 대칭된 행렬의 요소를 서로 빼면 두 사원수 요소의 곱으로 정리된다.     
예를 들어 두 번째 열 벡터의 세 번째 요소에서 세 번째 열벡터의 두 번째 요소를 빼면 다음 식이 만들어진다.

$$2yz + 2xw - 2yz + 2xw = 4xw$$

이 식을 그림으로 나타내보면 [그림 14-8]과 같다.     
[그림 14-7](#그림-14-7-정방행렬에서의-트레이스의-표현)과 색상이 다른 부분은 빼는 요소를 의미한다.

###### 그림 14-8 xw값을 구하기 위한 행렬의 성분
![xw값을 구하기 위한 행렬의 성분](/img/)

비슷한 방법으로 세 번째 열벡터의 첫 번째 요소에서 첫 번째 열벡터의 세 번째 요소를 빼면 $yw$를 구할 수 있다.

$$2xz + 2yw - 2xz + 2yw = 4yw$$

마지막으로 첫 번째 열벡터의 두 번째 요소에서 두 번째 열벡터의 첫 번째 요소를 빼면 $zw$값이 얻어진다.

$$2xy + 2zw - 2xy + 2zw = 4zw$$

[그림 14-9](#그림-14-9-yw-zw-값을-구하기-위한-행렬의-성분)의 (a)에 $yw$를 구하는 식에 사용하는 행렬의 요소를, (b)에는 $zw$를 구하는 식에 사용되는 행렬의 요소를 정리한다.

###### 그림 14-9 yw, zw 값을 구하기 위한 행렬의 성분
![yw, zw 값으 구하기 위한 행렬의 성분](/img/)

이 방식으로 사원수를 구할 때는 예외 사항이 있다.      
트레이스 값이 -1보다 작거나 같으면 제곱근을 구하는 값이 0보다 작거나 같아져 $w$를 구하는 데 필요한 $r$의 해가 존재하지 않는다.      
예를 들어 $y$축으로 180도 회전하는 행렬은 $x$ 기저와 $z$ 기저를 반대 방향으로 돌리므로 다음과 같이 구성된다.

$$
\begin{bmatrix}
-1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & -1 \\
\end{bmatrix}
$$

이 행렬을 사용하는 경우 트레이스 값은 -1이 되고 $w$값은 0이 된다.     
0의 역수는 존재하지 않기 때문에 나머지 값들을 구할 수 없게 된다.        
이러한 경우, $w$가 아닌 다른 요소부터 계산한 후에 이로부터 다른 성분을 구하도록 계산 방법을 우회해야 한다.      
주어진 회전 변환행렬에서 첫 번째 대각 성분과 두 번째와 세 번째 대각 성분을 빼면 다음과 같다.

$$1 - 2y^2 - 2z^2 - 1 + 2x^2 + 2z^2 - 1 + 2x^2 + 2y^2 = -1 + 4x^2$$

그렇다면 이를 사용해 $x$값을 구할 수 있다.      
이 수식을 그림으로 표현하면 [그림 14-10](#그림-14-10-예외-상황에서-x값을-구하기-위한-대각-성분)과 같다.

###### 그림 14-10 예외 상황에서 x값을 구하기 위한 대각 성분
![예외 상황에서 x값을 구하기 위한 대각 성분](/img/)

$y$값은 두 번째 대각 성분에 첫 번째와 세 번째를 빼서 얻을 수 있으며 $z$값은 세 번째 대각 성분에 첫 번째와 두 번째를 빼서 얻을 수 있다.      
$y, z$값을 구하는 식을 만들기 위한 행렬의 요소를 순서대로 정리하면 [그림 14-11](#그림-14-11-y-z값을-구하기-위한-대각-성분)과 같다.

###### 그림 14-11 y, z값을 구하기 위한 대각 성분
![y, z값을 구하기 위한 대각 성분](/img/)

예외 상황을 감안해 회전 변환행렬로부터 사원수를 구하는 알고리즘이 1985년에 ***켄 슈메이크(Ken Shoemake)*** 에 의해 고안됐다.       
먼저 회전 변환행렬의 트레이스 값을 구하고 그 값이 충분히 큰지를 파악한다.       
***이론적으로 트레이스 값이 -1보다 크면*** $w$ ***값 계산이 가능하지만, -1에 가까워질수록 오차가 발생***하므로 ***트레이스 값이 0보다 큰 경우에만 트레이스 값을 토대로 사원수의 모든 요소를 구하는 로직을 적용***한다.     
***나머지 트레이스 값이 0보다 작거나 같은 경우에는 예외 상황으로 간주해 다른 값부터 구하는 것이 이 알고리즘의 핵심***이다.        
$w$를 제외하고 $x, y, z$ 중에서 가장 큰 요소를 파악한다.        
각 대각행렬의 요소 값을 비교하면 확인할 수 있다.        
예를 들어 대각행렬의 첫 번째 대각 요소와 두 번째 대각 요소의 크기를 비교했을 때 두 번째 요소 값이 크다면 $y$의 크기는 $x$보다 크다는 의미다.

$$1 - 2(y^2 + z^2) < 1 - 2(x^2 + z^2)$$

$$-y^2 < -x^2$$

이 과정을 한 번 더 거치면 $x, y, z$에서 가장 큰 요소를 찾을 수 있다.        
이렇게 파악된 가장 큰 요소의 값을 먼저 구한다.      
참고로 제곱근으로 해를 구할 때는 항상 양수를 사용한다.      
이와 같은 방법으로 가장 큰 수를 구했다면 나머지 두 요소는 $xy, yz, xz$ 값으로부터 얻을 수 있는데 이들을 구하기 위한 행렬의 요소를 [그림 14-12](#그림-14-12-순서대로-xy-yz-xz-값을-구하기-위한-행렬의-성분)에 (a), (b), (c) 순서대로 정리한다.

###### 그림 14-12 순서대로 xy, yz, xz 값을 구하기 위한 행렬의 성분
![순서대로 xy, yz, xz 값을 구하기 위한 행렬의 성분](/img/)

$x, y, z$를 모두 구했다면 마지막 $w$값은 [그림 14-8](#그림-14-8-xw값을-구하기-위한-행렬의-성분)과 [그림 14-9](#그림-14-9-yw-zw-값을-구하기-위한-행렬의-성분)에서 구한 $xw, yw, zw$의 값으로부터 구한다.     

# 52. 사원수의 보간
***사원수는 로드리게스 회전과 동일한 축-각 방식을 사용해 3차원 공간의 회전을 표현***한다.     
사원수를 사용하는 경우의 장점을 열거해보면 다음과 같다.     

- ***오일러 각과 쉽게 변환이 가능***하며 ***회전행렬 제작이 용이***하다.
- ***임의의 축에 대한 회전 표현이 가능***하기 때문에 ***짐벌락 현상을 방지***할 수 있다.
- ***임의의 축에 대한 회전 보간 값***을 구할 수 있다.
- ***4개의 숫자로 회전을 표현***하기 때문에 저장 공간을 효율적으로 쓸 수 있다.

또한 사원수는 행렬과 상호 변환이 가능하다.      
다른 회전 방식과 비교한 사원수의 장단점은 [표 14-3](#식-14-3)과 같다.

###### 표 14-3 3차원 회전 표현의 장단점 비교

||오일러 각|행렬|사원수|
|---|---|---|---|
|저장공간|가장 작다. 저장 공간의 수는 3|크다. 저장 공간의 수는 9|작다. 저장 공간의 수는 4|
|짐벌락 현상|발생|발생하지 않음|발생하지 않음|
|회전 보간|한 기저 축에 대해서만 가능|불가능|임의의 축에 가능|
|직관성|직관적이다.|직관적이지 않다.|직관적이지 않다.|

다른 회전 방식에 비해 ***사원수가 가지는 장점***은 ***회전 보간이 가능***하다는 것이다.     
사원수를 4차원 공간의 벡터로 생각하고, 두 사원수가 만들어내는 4차원 공간에서의 평면을 상상해보자.   
해당 평면에서 주어진 비율 $t$에 대응하는 사원수는 두 사원수의 위치를 선형 보간한 지점이 된다.       
두 사원수가 만든 평면에서 $\frac{1}{3}$만큼 보간된 사원수를 구하는 방법은 [그림 14-13](#그림-14-13-시작점-q_1에서-끝점-q_2까지-13-만큼-선형-보간된-사원수의-위치)과 같이 계산할 수 있다.

###### 그림 14-13 시작점 q_1에서 끝점 q_2까지 1/3 만큼 선형 보간된 사원수의 위치
![시작점 q_1에서 끝점 q_2까지 1/3 만큼 선형 보간된 사원수의 위치](/img/)

주어진 비율 $t$에 대응하는 중간 사원수를 구하는 식은 다음과 같다.

$$q(t) = (1 - t) \cdot q_1 + t \cdot q_2$$

하지만 선형 보간으로 얻어지는 사원수는 크기가 1인 단위 사원수가 아니기 때문에 해당 사원수를 회전에 사용하려면 정규화 과정을 거쳐야 한다.

$$q' = \frac{q(t)}{|q(t)|}$$

***선형 보간법은 빠르고 간편***하게 사용할 수 있지만, ***원의 궤적을 따라 발생하는 회전을 정확히 반영하지는 못한다***.      
좀 더 높은 수준의 결과물을 위해 회전의 움직임을 따르는 중간 사원수를 구하려면 두 사원수가 이루는 각을 $\theta$로 지정하고 주어진 비율 $t$를 사용해 두 각을 각각 $t\theta$와 $(1 - t)\theta$로 나눠야 한다.      
이해를 돕기 위해 비율값 $t$로 $\frac{1}{3}$이 주어졌다면 구하려는 최종 회전 사원수 값은 [그림 14-14](#그림-14-14-구면으로-보간된-사원수와-직선으로-보간된-사원수의-비교)와 같이 계산될 것이다.

###### 그림 14-14 구면으로 보간된 사원수와 직선으로 보간된 사원수의 비교
![구면으로 보간된 사원수와 직선으로 보간된 사원수의 비교](/img/)

이를 만족시키는 선형 보간식의 두 계수 $\alpha$와 $\beta$값을 찾아야 한다.

###### 식 14-5

$$q' = \alpha \cdot q_1 + \beta \cdot q_2$$

[그림 14-15](#그림-14-15-구면으로-보간된-사원수를-평면의-벡터로-표현하기)와 같이 첫 번째 사원수를 $x$축에 일치시키고 이를 회전한 값을 구한다.        
첫 번째 사원수에 해당하는 벡터를 $\vec{x}$, 두 번째 사원수에 해당하는 벡터를 $\vec{u}$라고 할 때, $\vec{x}$에 직교하는 벡터를 $\vec{y}$로, 구해야 할 중간 사원수의 벡터를 $\vec{v}$로 정한다.

###### 그림 14-15 구면으로 보간된 사원수를 평면의 벡터로 표현하기
![구면으로 보간된 사원수를 평면의 벡터로 표현하기](/img/)

[식 14-5](#식-14-5)는 다음과 같이 벡터로 바꿔 쓸 수 있다.

###### 식 14-6

$$\vec{v} = \alpha \cdot \vec{x} + \beta \cdot \vec{u}$$

두 사원수가 만드는 각을 $\theta$라고 했을 때 우리가 구하려는 벡터 $\vec{v}$는 서로 직교하는 두 기저벡터 $\vec{x}$와 $\vec{y}$의 조합으로 계산된다.

###### 식 14-7

$$\vec{v} = \cos(t\theta) \vec{x} + \sin(t\theta) \vec{y}$$

앞에서 예로 든 비율 $\frac{1}{3}$에 대한 계산은 [그림 14-16](#그림-14-16-직교하는-두-기저벡터를-사용한-중간-벡터의-계산)과 같다.

###### 그림 14-16 직교하는 두 기저벡터를 사용한 중간 벡터의 계산
![직교하는 두 기저벡터를 사용한 중간 벡터의 계산](/img/)

벡터 $\vec{x}$에 직교하는 벡터 $\vec{y}$ 값을 모르므로 벡터 $\vec{u}$와 삼각함수를 활용해 이를 구해야 한다.     
[그림 14-17](#그림-14-17-두-번째-사원수로부터-직교하는-벡터-y-구하기)을 보면 $\vec{u} - \cos \theta \vec{x}$ 값과 $\sin \theta \cdot \vec{y}$ 값은 동일한 벡터를 가리킨다.

###### 그림 14-17 두 번째 사원수로부터 직교하는 벡터 y 구하기
![두 번째 사원수로부터 직교하는 벡터 y 구하기](/img/)

이를 활용하면 벡터 $\vec{y}$의 값은 다음과 같이 구할 수 있다.

$$\vec{y} = \frac{\vec{u} - \cos \theta \vec{x}}{\sin \theta}$$

이 값을 [식 14-7](#식-14-7)에 대입하면 최종 벡터를 구하는 식은 다음과 같이 전개된다.

$$
\begin{matrix}
\vec{v} &=& \cos(t\theta)\vec{x} + \sin(t\theta)(\frac{\vec{u} - \cos\theta\vec{x}}{\sin\theta}) \\
&=& (\frac{\sin\theta\cos(t\theta) - \cos\theta\sin(t\theta)}{\sin\theta})\vec{x} + \frac{\sin(t\theta)}{\sin\theta}\vec{u} \\
&=& \frac{\sin(\theta - t\theta)}{\sin \theta}\vec{x} + \frac{\sin(t\theta)}{\sin\theta}\vec{u} \\
\end{matrix}
$$

1. $\vec{x}$와 $\vec{u}$에 대해 묶는다.
2. $\vec{x}$의 계수는 삼각함수의 합 공식에 의해 간략히 정리된다.

위 식을 [식 14-6](#식-14-6)에 대입하면 찾아야 하는 두 계수 $\alpha$와 $\beta$는 각각 다음과 같다.

$$\alpha = \frac{\sin((1 - t)\theta)}{\sin\theta}$$

$$\beta = \frac{\sin(t\theta)}{\sin\theta}$$

위에서 구한 계수를 [식 14-5](#식-14-5)에 대입하면 구면으로 보간하는 최종 식이 만들어진다.

###### 식 14-8

$$q' = \frac{\sin((1-t)\theta)}{\sin \theta} \cdot q_1 + \frac{\sin(t\theta)}{\sin\theta} \cdot q_2$$

이 방법으로 보간하는 방법을 ***구면 선형 보간(Spherical linear interpolation)*** 이라고 하며, 줄여서 ***슬럽(Slerp)*** 이라 부른다.       
사원수의 구면 선형 보간을 구현하는 데 필요한 두 계수의 식 외에 고려할 점이 몇 가지 있다.        
먼저 ***두 사원수로부터 나오는 회전 경로는 항상 긴 경로와 짧은 경로의 두 가지가 있는데, 이 중에 하나를 선택***해야 한다는 점이다.     
[그림 14-18](#그림-14-18-두-벡터의-사잇각을-구하는-방법)과 같이 원 위에 벡터 $\vec{v_1}$와 벡터 $\vec{v_2}$가 있을 때 두 벡터가 만들어내는 회전 경로는 언제나 짧은 경로 $\theta_1$과 긴 경로 $\theta_2$ 두 가지가 존재한다.     
***일반적으로는 짧은 경로를 사용***한다.

###### 그림 14-18 두 벡터의 사잇각을 구하는 방법
![두 벡터의 사잇각을 구하는 방법](/img/)

[그림 14-18](#그림-14-18-두-벡터의-사잇각을-구하는-방법)의 경우 벡터 $\vec{v_1}$에서 벡터 $\vec{v_2}$로 순서대로 구면 선형 보간을 적용하면 짧은 경로에서의 보간이 진행된다.     
하지만 두 벡터가 [그림 14-19](#그림-14-19-벡터의-각이-긴-경로의-각으로-설정된-경우)와 같이 배치되어 있다면 구면 선형 보간은 긴 경로로 진행된다.

###### 그림 14-19 벡터의 각이 긴 경로의 각으로 설정된 경우
![벡터의 각이 긴 경로의 각으로 설정된 경우](/img/)

따라서 언제나 짧은 경로로 구면 선형 보간하고자 한다면, 구면 선형 보간을 진행하기 전에 두 벡터의 사잇각이 $180^\circ$보다 작은지부터 확인해야 한다.      
이보다 큰 경우에는 짧은 경로의 결과가 나오도록 계산 방법을 조정해야 한다.

두 벡터가 이루는 각을 조사하면 쉽게 해결 할 수 있지만, 현재 사용하는 사원수에는 항상 회전시키고자 하는 각의 절반이 저장되어 있기 때문에, 이를 감안해야 한다.        
예를 들어 사원수 $(0, (1, 0, 0))$에 대해 생각해보자.        
사원수 $(0, (1, 0, 0))$을 4차원 공간의 회전에 사용한다면 이는 $(\cos \theta, \sin \theta \vec{n})$로 해석되므로 $x$축을 중심으로 $90^\circ$로 회전 변환하는 회전 사원수가 된다.     
하지만 사원수 $(0, (1, 0, 0))$을 3차원 공간의 회전에 사용한다면 $(\cos \frac{\theta}{2}, \sin \frac{\theta}{2}\vec{n})$로 해석되어야 한다.      
이 경우에는 앞에서 살펴본 $v' = q \cdot v \cdot q^*$ 공식을 거쳐 3차원 공간에서 $x$축을 중심으로 하는 $180^\circ$ 회전 변환을 만들어낸다.       
[그림 14-20](#그림-14-20-사원수에-담긴-각의-정보)은 이에 관한 예시다.        
어떤 사원수에 저장된 각이 $120^\circ$라면, 해당 사원수를 통해 구현된 3차원 공간의 회전은 그 두 배인 $240^\circ$가 된다.

###### 그림 14-20 사원수에 담긴 각의 정보
![사원수에 담긴 각의 정보](/img/)

그렇기 때문에 긴 경로를 탐지하는 조건도 바뀐다.     
해당 경로가 긴 경로인지 여부를 탐지하기 위해 두 사원수가 이루는 사잇각은 $180^\circ$가 아닌 $90^\circ$가 되어야 한다.       
그렇다면 긴 경로인지 파악하기 위한 사잇각의 최소 크기는 $90^\circ$가 되며 이는 ***내적을 사용해 판별이 가능***하다.       
두 사원수의 내적 값이 음수가 나오면 두 사원수가 이루는 사잇각이 $90^\circ$보다 크다는 의미이며, 이는 긴 경로의 회전에 사원수가 사용된다고 판단할 수 있다.       
이 경우에는 두 번째 사원수를 짧은 경로의 사원수로 바꿔주어야 한다.

짧은 경로의 사원수는 사원수를 반전시키는 것으로 간단히 처리할 수 있다.      
예를 들어 두 사원수의 사잇각이 $120^\circ$인 경우, 실제 진행되는 $240^\circ$ 회전에 대응하는 짧은 경로의 회전은 $-120^\circ$ 회전이 된다.       
짧은 경로의 $-120^\circ$ 회전에 대응하는 사원수는 그 절반인 $-60^\circ$ 사잇각을 가진 사원수가 된다.        
이는 [그림 14-21](#그림-14-21-사원수를-반전시켜-짧은-거리의-사원수를-구하는-예시)과 같이 $120^\circ$ 사잇각을 가진 사원수 $q_2$를 반전해 얻을 수 있다.

###### 그림 14-21 사원수를 반전시켜 짧은 거리의 사원수를 구하는 예시
![사원수를 반전시켜 짧은 거리의 사원수를 구하는 예시](/img/)

구면 선형 보간을 구현할 때 고려할 점은 입력으로 들어온 두 사원수의 방향이 평행하면 분모 $\sin \theta$의 값이 0이 되어 [식 14-8](#식-14-8)의 구면 선형 보간 계산이 불가능해진다는 것이다.        
이 경우 긴 경로인지를 파악하기 위해 이미 계산했던 내적을 활용해 파악할 수 있다.     
내적 값의 크기가 1이면 두 사원수는 평행한 상태이기 때문이다.        
따라서 오차까지 감안해 두 사원수의 내적이 1과 매우 근접한 경우에는 일반 선형 보간을 사용하도록 로직을 만들어야 한다.

***구면 선형 보간은 카메라의 움직임이나 캐릭터 애니메이션과 같이 시간에 따른 부드러운 회전을 구현하는 데 유용하게 사용***된다.        